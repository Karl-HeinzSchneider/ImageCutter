var uy=Object.create;var sd=Object.defineProperty,dy=Object.defineProperties,fy=Object.getOwnPropertyDescriptor,hy=Object.getOwnPropertyDescriptors,py=Object.getOwnPropertyNames,_a=Object.getOwnPropertySymbols,gy=Object.getPrototypeOf,ad=Object.prototype.hasOwnProperty,T0=Object.prototype.propertyIsEnumerable;var M0=(t,e,n)=>e in t?sd(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,T=(t,e)=>{for(var n in e||={})ad.call(e,n)&&M0(t,n,e[n]);if(_a)for(var n of _a(e))T0.call(e,n)&&M0(t,n,e[n]);return t},Se=(t,e)=>dy(t,hy(e));var es=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,n)=>(typeof require<"u"?require:e)[n]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')});var cd=(t,e)=>{var n={};for(var r in t)ad.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&_a)for(var r of _a(t))e.indexOf(r)<0&&T0.call(t,r)&&(n[r]=t[r]);return n};var Y=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var my=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of py(e))!ad.call(t,i)&&i!==n&&sd(t,i,{get:()=>e[i],enumerable:!(r=fy(e,i))||r.enumerable});return t};var ld=(t,e,n)=>(n=t!=null?uy(gy(t)):{},my(e||!t||!t.__esModule?sd(n,"default",{value:t,enumerable:!0}):n,t));var Bt=(t,e,n)=>new Promise((r,i)=>{var o=c=>{try{a(n.next(c))}catch(l){i(l)}},s=c=>{try{a(n.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(o,s);a((n=n.apply(t,e)).next())});var _e=Y(Rt=>{"use strict";Object.defineProperty(Rt,"__esModule",{value:!0});Rt._registerNode=Rt.Konva=Rt.glob=void 0;var LD=Math.PI/180;function VD(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}Rt.glob=typeof global<"u"?global:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{};Rt.Konva={_global:Rt.glob,version:"9.3.0",isBrowser:VD(),isUnminified:/param/.test((function(t){}).toString()),dblClickWindow:400,getAngle(t){return Rt.Konva.angleDeg?t*LD:t},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return Rt.Konva.DD.isDragging},isDragReady(){return!!Rt.Konva.DD.node},releaseCanvasOnDestroy:!0,document:Rt.glob.document,_injectGlobal(t){Rt.glob.Konva=t}};var jD=t=>{Rt.Konva[t.prototype.getClassName()]=t};Rt._registerNode=jD;Rt.Konva._injectGlobal(Rt.Konva)});var st=Y(ze=>{"use strict";Object.defineProperty(ze,"__esModule",{value:!0});ze.Util=ze.Transform=void 0;var Fp=_e(),Vp=class t{constructor(e=[1,0,0,1,0,0]){this.dirty=!1,this.m=e&&e.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new t(this.m)}copyInto(e){e.m[0]=this.m[0],e.m[1]=this.m[1],e.m[2]=this.m[2],e.m[3]=this.m[3],e.m[4]=this.m[4],e.m[5]=this.m[5]}point(e){var n=this.m;return{x:n[0]*e.x+n[2]*e.y+n[4],y:n[1]*e.x+n[3]*e.y+n[5]}}translate(e,n){return this.m[4]+=this.m[0]*e+this.m[2]*n,this.m[5]+=this.m[1]*e+this.m[3]*n,this}scale(e,n){return this.m[0]*=e,this.m[1]*=e,this.m[2]*=n,this.m[3]*=n,this}rotate(e){var n=Math.cos(e),r=Math.sin(e),i=this.m[0]*n+this.m[2]*r,o=this.m[1]*n+this.m[3]*r,s=this.m[0]*-r+this.m[2]*n,a=this.m[1]*-r+this.m[3]*n;return this.m[0]=i,this.m[1]=o,this.m[2]=s,this.m[3]=a,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(e,n){var r=this.m[0]+this.m[2]*n,i=this.m[1]+this.m[3]*n,o=this.m[2]+this.m[0]*e,s=this.m[3]+this.m[1]*e;return this.m[0]=r,this.m[1]=i,this.m[2]=o,this.m[3]=s,this}multiply(e){var n=this.m[0]*e.m[0]+this.m[2]*e.m[1],r=this.m[1]*e.m[0]+this.m[3]*e.m[1],i=this.m[0]*e.m[2]+this.m[2]*e.m[3],o=this.m[1]*e.m[2]+this.m[3]*e.m[3],s=this.m[0]*e.m[4]+this.m[2]*e.m[5]+this.m[4],a=this.m[1]*e.m[4]+this.m[3]*e.m[5]+this.m[5];return this.m[0]=n,this.m[1]=r,this.m[2]=i,this.m[3]=o,this.m[4]=s,this.m[5]=a,this}invert(){var e=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),n=this.m[3]*e,r=-this.m[1]*e,i=-this.m[2]*e,o=this.m[0]*e,s=e*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),a=e*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=n,this.m[1]=r,this.m[2]=i,this.m[3]=o,this.m[4]=s,this.m[5]=a,this}getMatrix(){return this.m}decompose(){var e=this.m[0],n=this.m[1],r=this.m[2],i=this.m[3],o=this.m[4],s=this.m[5],a=e*i-n*r;let c={x:o,y:s,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(e!=0||n!=0){var l=Math.sqrt(e*e+n*n);c.rotation=n>0?Math.acos(e/l):-Math.acos(e/l),c.scaleX=l,c.scaleY=a/l,c.skewX=(e*r+n*i)/a,c.skewY=0}else if(r!=0||i!=0){var u=Math.sqrt(r*r+i*i);c.rotation=Math.PI/2-(i>0?Math.acos(-r/u):-Math.acos(r/u)),c.scaleX=a/u,c.scaleY=u,c.skewX=0,c.skewY=(e*r+n*i)/a}return c.rotation=ze.Util._getRotation(c.rotation),c}};ze.Transform=Vp;var UD="[object Array]",BD="[object Number]",$D="[object String]",HD="[object Boolean]",GD=Math.PI/180,zD=180/Math.PI,kp="#",qD="",WD="0",YD="Konva warning: ",E4="Konva error: ",KD="rgb(",Lp={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},XD=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,ml=[],ZD=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(t){setTimeout(t,60)};ze.Util={_isElement(t){return!!(t&&t.nodeType==1)},_isFunction(t){return!!(t&&t.constructor&&t.call&&t.apply)},_isPlainObject(t){return!!t&&t.constructor===Object},_isArray(t){return Object.prototype.toString.call(t)===UD},_isNumber(t){return Object.prototype.toString.call(t)===BD&&!isNaN(t)&&isFinite(t)},_isString(t){return Object.prototype.toString.call(t)===$D},_isBoolean(t){return Object.prototype.toString.call(t)===HD},isObject(t){return t instanceof Object},isValidSelector(t){if(typeof t!="string")return!1;var e=t[0];return e==="#"||e==="."||e===e.toUpperCase()},_sign(t){return t===0||t>0?1:-1},requestAnimFrame(t){ml.push(t),ml.length===1&&ZD(function(){let e=ml;ml=[],e.forEach(function(n){n()})})},createCanvasElement(){var t=document.createElement("canvas");try{t.style=t.style||{}}catch{}return t},createImageElement(){return document.createElement("img")},_isInDocument(t){for(;t=t.parentNode;)if(t==document)return!0;return!1},_urlToImage(t,e){var n=ze.Util.createImageElement();n.onload=function(){e(n)},n.src=t},_rgbToHex(t,e,n){return((1<<24)+(t<<16)+(e<<8)+n).toString(16).slice(1)},_hexToRgb(t){t=t.replace(kp,qD);var e=parseInt(t,16);return{r:e>>16&255,g:e>>8&255,b:e&255}},getRandomColor(){for(var t=(Math.random()*16777215<<0).toString(16);t.length<6;)t=WD+t;return kp+t},getRGB(t){var e;return t in Lp?(e=Lp[t],{r:e[0],g:e[1],b:e[2]}):t[0]===kp?this._hexToRgb(t.substring(1)):t.substr(0,4)===KD?(e=XD.exec(t.replace(/ /g,"")),{r:parseInt(e[1],10),g:parseInt(e[2],10),b:parseInt(e[3],10)}):{r:0,g:0,b:0}},colorToRGBA(t){return t=t||"black",ze.Util._namedColorToRBA(t)||ze.Util._hex3ColorToRGBA(t)||ze.Util._hex4ColorToRGBA(t)||ze.Util._hex6ColorToRGBA(t)||ze.Util._hex8ColorToRGBA(t)||ze.Util._rgbColorToRGBA(t)||ze.Util._rgbaColorToRGBA(t)||ze.Util._hslColorToRGBA(t)},_namedColorToRBA(t){var e=Lp[t.toLowerCase()];return e?{r:e[0],g:e[1],b:e[2],a:1}:null},_rgbColorToRGBA(t){if(t.indexOf("rgb(")===0){t=t.match(/rgb\(([^)]+)\)/)[1];var e=t.split(/ *, */).map(Number);return{r:e[0],g:e[1],b:e[2],a:1}}},_rgbaColorToRGBA(t){if(t.indexOf("rgba(")===0){t=t.match(/rgba\(([^)]+)\)/)[1];var e=t.split(/ *, */).map((n,r)=>n.slice(-1)==="%"?r===3?parseInt(n)/100:parseInt(n)/100*255:Number(n));return{r:e[0],g:e[1],b:e[2],a:e[3]}}},_hex8ColorToRGBA(t){if(t[0]==="#"&&t.length===9)return{r:parseInt(t.slice(1,3),16),g:parseInt(t.slice(3,5),16),b:parseInt(t.slice(5,7),16),a:parseInt(t.slice(7,9),16)/255}},_hex6ColorToRGBA(t){if(t[0]==="#"&&t.length===7)return{r:parseInt(t.slice(1,3),16),g:parseInt(t.slice(3,5),16),b:parseInt(t.slice(5,7),16),a:1}},_hex4ColorToRGBA(t){if(t[0]==="#"&&t.length===5)return{r:parseInt(t[1]+t[1],16),g:parseInt(t[2]+t[2],16),b:parseInt(t[3]+t[3],16),a:parseInt(t[4]+t[4],16)/255}},_hex3ColorToRGBA(t){if(t[0]==="#"&&t.length===4)return{r:parseInt(t[1]+t[1],16),g:parseInt(t[2]+t[2],16),b:parseInt(t[3]+t[3],16),a:1}},_hslColorToRGBA(t){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(t)){let[e,...n]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(t),r=Number(n[0])/360,i=Number(n[1])/100,o=Number(n[2])/100,s,a,c;if(i===0)return c=o*255,{r:Math.round(c),g:Math.round(c),b:Math.round(c),a:1};o<.5?s=o*(1+i):s=o+i-o*i;let l=2*o-s,u=[0,0,0];for(let f=0;f<3;f++)a=r+1/3*-(f-1),a<0&&a++,a>1&&a--,6*a<1?c=l+(s-l)*6*a:2*a<1?c=s:3*a<2?c=l+(s-l)*(2/3-a)*6:c=l,u[f]=c*255;return{r:Math.round(u[0]),g:Math.round(u[1]),b:Math.round(u[2]),a:1}}},haveIntersection(t,e){return!(e.x>t.x+t.width||e.x+e.width<t.x||e.y>t.y+t.height||e.y+e.height<t.y)},cloneObject(t){var e={};for(var n in t)this._isPlainObject(t[n])?e[n]=this.cloneObject(t[n]):this._isArray(t[n])?e[n]=this.cloneArray(t[n]):e[n]=t[n];return e},cloneArray(t){return t.slice(0)},degToRad(t){return t*GD},radToDeg(t){return t*zD},_degToRad(t){return ze.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),ze.Util.degToRad(t)},_radToDeg(t){return ze.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),ze.Util.radToDeg(t)},_getRotation(t){return Fp.Konva.angleDeg?ze.Util.radToDeg(t):t},_capitalize(t){return t.charAt(0).toUpperCase()+t.slice(1)},throw(t){throw new Error(E4+t)},error(t){console.error(E4+t)},warn(t){Fp.Konva.showWarnings&&console.warn(YD+t)},each(t,e){for(var n in t)e(n,t[n])},_inRange(t,e,n){return e<=t&&t<n},_getProjectionToSegment(t,e,n,r,i,o){var s,a,c,l=(t-n)*(t-n)+(e-r)*(e-r);if(l==0)s=t,a=e,c=(i-n)*(i-n)+(o-r)*(o-r);else{var u=((i-t)*(n-t)+(o-e)*(r-e))/l;u<0?(s=t,a=e,c=(t-i)*(t-i)+(e-o)*(e-o)):u>1?(s=n,a=r,c=(n-i)*(n-i)+(r-o)*(r-o)):(s=t+u*(n-t),a=e+u*(r-e),c=(s-i)*(s-i)+(a-o)*(a-o))}return[s,a,c]},_getProjectionToLine(t,e,n){var r=ze.Util.cloneObject(t),i=Number.MAX_VALUE;return e.forEach(function(o,s){if(!(!n&&s===e.length-1)){var a=e[(s+1)%e.length],c=ze.Util._getProjectionToSegment(o.x,o.y,a.x,a.y,t.x,t.y),l=c[0],u=c[1],f=c[2];f<i&&(r.x=l,r.y=u,i=f)}}),r},_prepareArrayForTween(t,e,n){var r,i=[],o=[];if(t.length>e.length){var s=e;e=t,t=s}for(r=0;r<t.length;r+=2)i.push({x:t[r],y:t[r+1]});for(r=0;r<e.length;r+=2)o.push({x:e[r],y:e[r+1]});var a=[];return o.forEach(function(c){var l=ze.Util._getProjectionToLine(c,i,n);a.push(l.x),a.push(l.y)}),a},_prepareToStringify(t){var e;t.visitedByCircularReferenceRemoval=!0;for(var n in t)if(t.hasOwnProperty(n)&&t[n]&&typeof t[n]=="object"){if(e=Object.getOwnPropertyDescriptor(t,n),t[n].visitedByCircularReferenceRemoval||ze.Util._isElement(t[n]))if(e.configurable)delete t[n];else return null;else if(ze.Util._prepareToStringify(t[n])===null)if(e.configurable)delete t[n];else return null}return delete t.visitedByCircularReferenceRemoval,t},_assign(t,e){for(var n in e)t[n]=e[n];return t},_getFirstPointerId(t){return t.touches?t.changedTouches[0].identifier:t.pointerId||999},releaseCanvas(...t){Fp.Konva.releaseCanvasOnDestroy&&t.forEach(e=>{e.width=0,e.height=0})},drawRoundedRectPath(t,e,n,r){let i=0,o=0,s=0,a=0;typeof r=="number"?i=o=s=a=Math.min(r,e/2,n/2):(i=Math.min(r[0]||0,e/2,n/2),o=Math.min(r[1]||0,e/2,n/2),a=Math.min(r[2]||0,e/2,n/2),s=Math.min(r[3]||0,e/2,n/2)),t.moveTo(i,0),t.lineTo(e-o,0),t.arc(e-o,o,o,Math.PI*3/2,0,!1),t.lineTo(e,n-a),t.arc(e-a,n-a,a,0,Math.PI/2,!1),t.lineTo(s,n),t.arc(s,n-s,s,Math.PI/2,Math.PI,!1),t.lineTo(0,i),t.arc(i,i,i,Math.PI,Math.PI*3/2,!1)}}});var be=Y(tt=>{"use strict";Object.defineProperty(tt,"__esModule",{value:!0});tt.getComponentValidator=tt.getBooleanValidator=tt.getNumberArrayValidator=tt.getFunctionValidator=tt.getStringOrGradientValidator=tt.getStringValidator=tt.getNumberOrAutoValidator=tt.getNumberOrArrayOfNumbersValidator=tt.getNumberValidator=tt.alphaComponent=tt.RGBComponent=void 0;var dr=_e(),ct=st();function fr(t){return ct.Util._isString(t)?'"'+t+'"':Object.prototype.toString.call(t)==="[object Number]"||ct.Util._isBoolean(t)?t:Object.prototype.toString.call(t)}function QD(t){return t>255?255:t<0?0:Math.round(t)}tt.RGBComponent=QD;function JD(t){return t>1?1:t<1e-4?1e-4:t}tt.alphaComponent=JD;function eE(){if(dr.Konva.isUnminified)return function(t,e){return ct.Util._isNumber(t)||ct.Util.warn(fr(t)+' is a not valid value for "'+e+'" attribute. The value should be a number.'),t}}tt.getNumberValidator=eE;function tE(t){if(dr.Konva.isUnminified)return function(e,n){let r=ct.Util._isNumber(e),i=ct.Util._isArray(e)&&e.length==t;return!r&&!i&&ct.Util.warn(fr(e)+' is a not valid value for "'+n+'" attribute. The value should be a number or Array<number>('+t+")"),e}}tt.getNumberOrArrayOfNumbersValidator=tE;function nE(){if(dr.Konva.isUnminified)return function(t,e){var n=ct.Util._isNumber(t),r=t==="auto";return n||r||ct.Util.warn(fr(t)+' is a not valid value for "'+e+'" attribute. The value should be a number or "auto".'),t}}tt.getNumberOrAutoValidator=nE;function rE(){if(dr.Konva.isUnminified)return function(t,e){return ct.Util._isString(t)||ct.Util.warn(fr(t)+' is a not valid value for "'+e+'" attribute. The value should be a string.'),t}}tt.getStringValidator=rE;function iE(){if(dr.Konva.isUnminified)return function(t,e){let n=ct.Util._isString(t),r=Object.prototype.toString.call(t)==="[object CanvasGradient]"||t&&t.addColorStop;return n||r||ct.Util.warn(fr(t)+' is a not valid value for "'+e+'" attribute. The value should be a string or a native gradient.'),t}}tt.getStringOrGradientValidator=iE;function oE(){if(dr.Konva.isUnminified)return function(t,e){return ct.Util._isFunction(t)||ct.Util.warn(fr(t)+' is a not valid value for "'+e+'" attribute. The value should be a function.'),t}}tt.getFunctionValidator=oE;function sE(){if(dr.Konva.isUnminified)return function(t,e){let n=Int8Array?Object.getPrototypeOf(Int8Array):null;return n&&t instanceof n||(ct.Util._isArray(t)?t.forEach(function(r){ct.Util._isNumber(r)||ct.Util.warn('"'+e+'" attribute has non numeric element '+r+". Make sure that all elements are numbers.")}):ct.Util.warn(fr(t)+' is a not valid value for "'+e+'" attribute. The value should be a array of numbers.')),t}}tt.getNumberArrayValidator=sE;function aE(){if(dr.Konva.isUnminified)return function(t,e){var n=t===!0||t===!1;return n||ct.Util.warn(fr(t)+' is a not valid value for "'+e+'" attribute. The value should be a boolean.'),t}}tt.getBooleanValidator=aE;function cE(t){if(dr.Konva.isUnminified)return function(e,n){return e==null||ct.Util.isObject(e)||ct.Util.warn(fr(e)+' is a not valid value for "'+n+'" attribute. The value should be an object with properties '+t),e}}tt.getComponentValidator=cE});var me=Y(In=>{"use strict";Object.defineProperty(In,"__esModule",{value:!0});In.Factory=void 0;var en=st(),lE=be(),Zs="get",Qs="set";In.Factory={addGetterSetter(t,e,n,r,i){In.Factory.addGetter(t,e,n),In.Factory.addSetter(t,e,r,i),In.Factory.addOverloadedGetterSetter(t,e)},addGetter(t,e,n){var r=Zs+en.Util._capitalize(e);t.prototype[r]=t.prototype[r]||function(){var i=this.attrs[e];return i===void 0?n:i}},addSetter(t,e,n,r){var i=Qs+en.Util._capitalize(e);t.prototype[i]||In.Factory.overWriteSetter(t,e,n,r)},overWriteSetter(t,e,n,r){var i=Qs+en.Util._capitalize(e);t.prototype[i]=function(o){return n&&o!==void 0&&o!==null&&(o=n.call(this,o,e)),this._setAttr(e,o),r&&r.call(this),this}},addComponentsGetterSetter(t,e,n,r,i){var o=n.length,s=en.Util._capitalize,a=Zs+s(e),c=Qs+s(e),l,u;t.prototype[a]=function(){var d={};for(l=0;l<o;l++)u=n[l],d[u]=this.getAttr(e+s(u));return d};var f=(0,lE.getComponentValidator)(n);t.prototype[c]=function(d){var h=this.attrs[e],g;r&&(d=r.call(this,d)),f&&f.call(this,d,e);for(g in d)d.hasOwnProperty(g)&&this._setAttr(e+s(g),d[g]);return d||n.forEach(v=>{this._setAttr(e+s(v),void 0)}),this._fireChangeEvent(e,h,d),i&&i.call(this),this},In.Factory.addOverloadedGetterSetter(t,e)},addOverloadedGetterSetter(t,e){var n=en.Util._capitalize(e),r=Qs+n,i=Zs+n;t.prototype[e]=function(){return arguments.length?(this[r](arguments[0]),this):this[i]()}},addDeprecatedGetterSetter(t,e,n,r){en.Util.error("Adding deprecated "+e);var i=Zs+en.Util._capitalize(e),o=e+" property is deprecated and will be removed soon. Look at Konva change log for more information.";t.prototype[i]=function(){en.Util.error(o);var s=this.attrs[e];return s===void 0?n:s},In.Factory.addSetter(t,e,r,function(){en.Util.error(o)}),In.Factory.addOverloadedGetterSetter(t,e)},backCompat(t,e){en.Util.each(e,function(n,r){var i=t.prototype[r],o=Zs+en.Util._capitalize(n),s=Qs+en.Util._capitalize(n);function a(){i.apply(this,arguments),en.Util.error('"'+n+'" method is deprecated and will be removed soon. Use ""'+r+'" instead.')}t.prototype[n]=a,t.prototype[o]=a,t.prototype[s]=a})},afterSetFilter(){this._filterUpToDate=!1}}});var Bp=Y($r=>{"use strict";Object.defineProperty($r,"__esModule",{value:!0});$r.HitContext=$r.SceneContext=$r.Context=void 0;var M4=st(),uE=_e();function dE(t){var e=[],n=t.length,r=M4.Util,i,o;for(i=0;i<n;i++)o=t[i],r._isNumber(o)?o=Math.round(o*1e3)/1e3:r._isString(o)||(o=o+""),e.push(o);return e}var x4=",",fE="(",hE=")",pE="([",gE="])",mE=";",vE="()",yE="=",I4=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],CE=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"],_E=100,Io=class{constructor(e){this.canvas=e,uE.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(e){e.fillEnabled()&&this._fill(e)}_fill(e){}strokeShape(e){e.hasStroke()&&this._stroke(e)}_stroke(e){}fillStrokeShape(e){e.attrs.fillAfterStrokeEnabled?(this.strokeShape(e),this.fillShape(e)):(this.fillShape(e),this.strokeShape(e))}getTrace(e,n){var r=this.traceArr,i=r.length,o="",s,a,c,l;for(s=0;s<i;s++)a=r[s],c=a.method,c?(l=a.args,o+=c,e?o+=vE:M4.Util._isArray(l[0])?o+=pE+l.join(x4)+gE:(n&&(l=l.map(u=>typeof u=="number"?Math.floor(u):u)),o+=fE+l.join(x4)+hE)):(o+=a.property,e||(o+=yE+a.val)),o+=mE;return o}clearTrace(){this.traceArr=[]}_trace(e){var n=this.traceArr,r;n.push(e),r=n.length,r>=_E&&n.shift()}reset(){var e=this.getCanvas().getPixelRatio();this.setTransform(1*e,0,0,1*e,0,0)}getCanvas(){return this.canvas}clear(e){var n=this.getCanvas();e?this.clearRect(e.x||0,e.y||0,e.width||0,e.height||0):this.clearRect(0,0,n.getWidth()/n.pixelRatio,n.getHeight()/n.pixelRatio)}_applyLineCap(e){let n=e.attrs.lineCap;n&&this.setAttr("lineCap",n)}_applyOpacity(e){var n=e.getAbsoluteOpacity();n!==1&&this.setAttr("globalAlpha",n)}_applyLineJoin(e){let n=e.attrs.lineJoin;n&&this.setAttr("lineJoin",n)}setAttr(e,n){this._context[e]=n}arc(e,n,r,i,o,s){this._context.arc(e,n,r,i,o,s)}arcTo(e,n,r,i,o){this._context.arcTo(e,n,r,i,o)}beginPath(){this._context.beginPath()}bezierCurveTo(e,n,r,i,o,s){this._context.bezierCurveTo(e,n,r,i,o,s)}clearRect(e,n,r,i){this._context.clearRect(e,n,r,i)}clip(...e){this._context.clip.apply(this._context,e)}closePath(){this._context.closePath()}createImageData(e,n){var r=arguments;if(r.length===2)return this._context.createImageData(e,n);if(r.length===1)return this._context.createImageData(e)}createLinearGradient(e,n,r,i){return this._context.createLinearGradient(e,n,r,i)}createPattern(e,n){return this._context.createPattern(e,n)}createRadialGradient(e,n,r,i,o,s){return this._context.createRadialGradient(e,n,r,i,o,s)}drawImage(e,n,r,i,o,s,a,c,l){var u=arguments,f=this._context;u.length===3?f.drawImage(e,n,r):u.length===5?f.drawImage(e,n,r,i,o):u.length===9&&f.drawImage(e,n,r,i,o,s,a,c,l)}ellipse(e,n,r,i,o,s,a,c){this._context.ellipse(e,n,r,i,o,s,a,c)}isPointInPath(e,n,r,i){return r?this._context.isPointInPath(r,e,n,i):this._context.isPointInPath(e,n,i)}fill(...e){this._context.fill.apply(this._context,e)}fillRect(e,n,r,i){this._context.fillRect(e,n,r,i)}strokeRect(e,n,r,i){this._context.strokeRect(e,n,r,i)}fillText(e,n,r,i){i?this._context.fillText(e,n,r,i):this._context.fillText(e,n,r)}measureText(e){return this._context.measureText(e)}getImageData(e,n,r,i){return this._context.getImageData(e,n,r,i)}lineTo(e,n){this._context.lineTo(e,n)}moveTo(e,n){this._context.moveTo(e,n)}rect(e,n,r,i){this._context.rect(e,n,r,i)}putImageData(e,n,r){this._context.putImageData(e,n,r)}quadraticCurveTo(e,n,r,i){this._context.quadraticCurveTo(e,n,r,i)}restore(){this._context.restore()}rotate(e){this._context.rotate(e)}save(){this._context.save()}scale(e,n){this._context.scale(e,n)}setLineDash(e){this._context.setLineDash?this._context.setLineDash(e):"mozDash"in this._context?this._context.mozDash=e:"webkitLineDash"in this._context&&(this._context.webkitLineDash=e)}getLineDash(){return this._context.getLineDash()}setTransform(e,n,r,i,o,s){this._context.setTransform(e,n,r,i,o,s)}stroke(e){e?this._context.stroke(e):this._context.stroke()}strokeText(e,n,r,i){this._context.strokeText(e,n,r,i)}transform(e,n,r,i,o,s){this._context.transform(e,n,r,i,o,s)}translate(e,n){this._context.translate(e,n)}_enableTrace(){var e=this,n=I4.length,r=this.setAttr,i,o,s=function(a){var c=e[a],l;e[a]=function(){return o=dE(Array.prototype.slice.call(arguments,0)),l=c.apply(e,arguments),e._trace({method:a,args:o}),l}};for(i=0;i<n;i++)s(I4[i]);e.setAttr=function(){r.apply(e,arguments);var a=arguments[0],c=arguments[1];(a==="shadowOffsetX"||a==="shadowOffsetY"||a==="shadowBlur")&&(c=c/this.canvas.getPixelRatio()),e._trace({property:a,val:c})}}_applyGlobalCompositeOperation(e){let n=e.attrs.globalCompositeOperation;var r=!n||n==="source-over";r||this.setAttr("globalCompositeOperation",n)}};$r.Context=Io;CE.forEach(function(t){Object.defineProperty(Io.prototype,t,{get(){return this._context[t]},set(e){this._context[t]=e}})});var jp=class extends Io{constructor(e,{willReadFrequently:n=!1}={}){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:n})}_fillColor(e){var n=e.fill();this.setAttr("fillStyle",n),e._fillFunc(this)}_fillPattern(e){this.setAttr("fillStyle",e._getFillPattern()),e._fillFunc(this)}_fillLinearGradient(e){var n=e._getLinearGradient();n&&(this.setAttr("fillStyle",n),e._fillFunc(this))}_fillRadialGradient(e){let n=e._getRadialGradient();n&&(this.setAttr("fillStyle",n),e._fillFunc(this))}_fill(e){let n=e.fill(),r=e.getFillPriority();if(n&&r==="color"){this._fillColor(e);return}let i=e.getFillPatternImage();if(i&&r==="pattern"){this._fillPattern(e);return}let o=e.getFillLinearGradientColorStops();if(o&&r==="linear-gradient"){this._fillLinearGradient(e);return}let s=e.getFillRadialGradientColorStops();if(s&&r==="radial-gradient"){this._fillRadialGradient(e);return}n?this._fillColor(e):i?this._fillPattern(e):o?this._fillLinearGradient(e):s&&this._fillRadialGradient(e)}_strokeLinearGradient(e){let n=e.getStrokeLinearGradientStartPoint(),r=e.getStrokeLinearGradientEndPoint(),i=e.getStrokeLinearGradientColorStops(),o=this.createLinearGradient(n.x,n.y,r.x,r.y);if(i){for(var s=0;s<i.length;s+=2)o.addColorStop(i[s],i[s+1]);this.setAttr("strokeStyle",o)}}_stroke(e){var n=e.dash(),r=e.getStrokeScaleEnabled();if(e.hasStroke()){if(!r){this.save();var i=this.getCanvas().getPixelRatio();this.setTransform(i,0,0,i,0,0)}this._applyLineCap(e),n&&e.dashEnabled()&&(this.setLineDash(n),this.setAttr("lineDashOffset",e.dashOffset())),this.setAttr("lineWidth",e.strokeWidth()),e.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)");var o=e.getStrokeLinearGradientColorStops();o?this._strokeLinearGradient(e):this.setAttr("strokeStyle",e.stroke()),e._strokeFunc(this),r||this.restore()}}_applyShadow(e){var n,r,i,o=(n=e.getShadowRGBA())!==null&&n!==void 0?n:"black",s=(r=e.getShadowBlur())!==null&&r!==void 0?r:5,a=(i=e.getShadowOffset())!==null&&i!==void 0?i:{x:0,y:0},c=e.getAbsoluteScale(),l=this.canvas.getPixelRatio(),u=c.x*l,f=c.y*l;this.setAttr("shadowColor",o),this.setAttr("shadowBlur",s*Math.min(Math.abs(u),Math.abs(f))),this.setAttr("shadowOffsetX",a.x*u),this.setAttr("shadowOffsetY",a.y*f)}};$r.SceneContext=jp;var Up=class extends Io{constructor(e){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:!0})}_fill(e){this.save(),this.setAttr("fillStyle",e.colorKey),e._fillFuncHit(this),this.restore()}strokeShape(e){e.hasHitStroke()&&this._stroke(e)}_stroke(e){if(e.hasHitStroke()){let o=e.getStrokeScaleEnabled();if(!o){this.save();var n=this.getCanvas().getPixelRatio();this.setTransform(n,0,0,n,0,0)}this._applyLineCap(e);var r=e.hitStrokeWidth(),i=r==="auto"?e.strokeWidth():r;this.setAttr("lineWidth",i),this.setAttr("strokeStyle",e.colorKey),e._strokeFuncHit(this),o||this.restore()}}};$r.HitContext=Up});var Js=Y(Hr=>{"use strict";Object.defineProperty(Hr,"__esModule",{value:!0});Hr.HitCanvas=Hr.SceneCanvas=Hr.Canvas=void 0;var yl=st(),T4=Bp(),A4=_e(),bE=me(),wE=be(),vl;function SE(){if(vl)return vl;var t=yl.Util.createCanvasElement(),e=t.getContext("2d");return vl=function(){var n=A4.Konva._global.devicePixelRatio||1,r=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return n/r}(),yl.Util.releaseCanvas(t),vl}var Mo=class{constructor(e){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;var n=e||{},r=n.pixelRatio||A4.Konva.pixelRatio||SE();this.pixelRatio=r,this._canvas=yl.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(e){var n=this.pixelRatio;this.pixelRatio=e,this.setSize(this.getWidth()/n,this.getHeight()/n)}setWidth(e){this.width=this._canvas.width=e*this.pixelRatio,this._canvas.style.width=e+"px";var n=this.pixelRatio,r=this.getContext()._context;r.scale(n,n)}setHeight(e){this.height=this._canvas.height=e*this.pixelRatio,this._canvas.style.height=e+"px";var n=this.pixelRatio,r=this.getContext()._context;r.scale(n,n)}getWidth(){return this.width}getHeight(){return this.height}setSize(e,n){this.setWidth(e||0),this.setHeight(n||0)}toDataURL(e,n){try{return this._canvas.toDataURL(e,n)}catch{try{return this._canvas.toDataURL()}catch(i){return yl.Util.error("Unable to get data URL. "+i.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}};Hr.Canvas=Mo;bE.Factory.addGetterSetter(Mo,"pixelRatio",void 0,(0,wE.getNumberValidator)());var $p=class extends Mo{constructor(e={width:0,height:0,willReadFrequently:!1}){super(e),this.context=new T4.SceneContext(this,{willReadFrequently:e.willReadFrequently}),this.setSize(e.width,e.height)}};Hr.SceneCanvas=$p;var Hp=class extends Mo{constructor(e={width:0,height:0}){super(e),this.hitCanvas=!0,this.context=new T4.HitContext(this),this.setSize(e.width,e.height)}};Hr.HitCanvas=Hp});var Cl=Y(Pt=>{"use strict";Object.defineProperty(Pt,"__esModule",{value:!0});Pt.DD=void 0;var ea=_e(),DE=st();Pt.DD={get isDragging(){var t=!1;return Pt.DD._dragElements.forEach(e=>{e.dragStatus==="dragging"&&(t=!0)}),t},justDragged:!1,get node(){var t;return Pt.DD._dragElements.forEach(e=>{t=e.node}),t},_dragElements:new Map,_drag(t){let e=[];Pt.DD._dragElements.forEach((n,r)=>{let{node:i}=n,o=i.getStage();o.setPointersPositions(t),n.pointerId===void 0&&(n.pointerId=DE.Util._getFirstPointerId(t));let s=o._changedPointerPositions.find(l=>l.id===n.pointerId);if(s){if(n.dragStatus!=="dragging"){var a=i.dragDistance(),c=Math.max(Math.abs(s.x-n.startPointerPos.x),Math.abs(s.y-n.startPointerPos.y));if(c<a||(i.startDrag({evt:t}),!i.isDragging()))return}i._setDragPosition(t,n),e.push(i)}}),e.forEach(n=>{n.fire("dragmove",{type:"dragmove",target:n,evt:t},!0)})},_endDragBefore(t){let e=[];Pt.DD._dragElements.forEach(n=>{let{node:r}=n,i=r.getStage();if(t&&i.setPointersPositions(t),!i._changedPointerPositions.find(a=>a.id===n.pointerId))return;(n.dragStatus==="dragging"||n.dragStatus==="stopped")&&(Pt.DD.justDragged=!0,ea.Konva._mouseListenClick=!1,ea.Konva._touchListenClick=!1,ea.Konva._pointerListenClick=!1,n.dragStatus="stopped");let s=n.node.getLayer()||n.node instanceof ea.Konva.Stage&&n.node;s&&e.indexOf(s)===-1&&e.push(s)}),e.forEach(n=>{n.draw()})},_endDragAfter(t){Pt.DD._dragElements.forEach((e,n)=>{e.dragStatus==="stopped"&&e.node.fire("dragend",{type:"dragend",target:e.node,evt:t},!0),e.dragStatus!=="dragging"&&Pt.DD._dragElements.delete(n)})}};ea.Konva.isBrowser&&(window.addEventListener("mouseup",Pt.DD._endDragBefore,!0),window.addEventListener("touchend",Pt.DD._endDragBefore,!0),window.addEventListener("mousemove",Pt.DD._drag),window.addEventListener("touchmove",Pt.DD._drag),window.addEventListener("mouseup",Pt.DD._endDragAfter,!1),window.addEventListener("touchend",Pt.DD._endDragAfter,!1))});var lt=Y(Dl=>{"use strict";Object.defineProperty(Dl,"__esModule",{value:!0});Dl.Node=void 0;var xe=st(),ta=me(),_l=Js(),bi=_e(),dn=Cl(),ht=be(),wl="absoluteOpacity",bl="allEventListeners",hr="absoluteTransform",O4="absoluteScale",wi="canvas",EE="Change",xE="children",IE="konva",Gp="listening",R4="mouseenter",P4="mouseleave",N4="set",F4="Shape",Sl=" ",k4="stage",Gr="transform",ME="Stage",zp="visible",TE=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(Sl),AE=1,se=class t{constructor(e){this._id=AE++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(e),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(e){(e===Gr||e===hr)&&this._cache.get(e)?this._cache.get(e).dirty=!0:e?this._cache.delete(e):this._cache.clear()}_getCache(e,n){var r=this._cache.get(e),i=e===Gr||e===hr,o=r===void 0||i&&r.dirty===!0;return o&&(r=n.call(this),this._cache.set(e,r)),r}_calculate(e,n,r){if(!this._attachedDepsListeners.get(e)){let i=n.map(o=>o+"Change.konva").join(Sl);this.on(i,()=>{this._clearCache(e)}),this._attachedDepsListeners.set(e,!0)}return this._getCache(e,r)}_getCanvasCache(){return this._cache.get(wi)}_clearSelfAndDescendantCache(e){this._clearCache(e),e===hr&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(wi)){let{scene:e,filter:n,hit:r}=this._cache.get(wi);xe.Util.releaseCanvas(e,n,r),this._cache.delete(wi)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(e){var n=e||{},r={};(n.x===void 0||n.y===void 0||n.width===void 0||n.height===void 0)&&(r=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));var i=Math.ceil(n.width||r.width),o=Math.ceil(n.height||r.height),s=n.pixelRatio,a=n.x===void 0?Math.floor(r.x):n.x,c=n.y===void 0?Math.floor(r.y):n.y,l=n.offset||0,u=n.drawBorder||!1,f=n.hitCanvasPixelRatio||1;if(!i||!o){xe.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}i+=l*2+1,o+=l*2+1,a-=l,c-=l;var d=new _l.SceneCanvas({pixelRatio:s,width:i,height:o}),h=new _l.SceneCanvas({pixelRatio:s,width:0,height:0,willReadFrequently:!0}),g=new _l.HitCanvas({pixelRatio:f,width:i,height:o}),v=d.getContext(),b=g.getContext();return g.isCache=!0,d.isCache=!0,this._cache.delete(wi),this._filterUpToDate=!1,n.imageSmoothingEnabled===!1&&(d.getContext()._context.imageSmoothingEnabled=!1,h.getContext()._context.imageSmoothingEnabled=!1),v.save(),b.save(),v.translate(-a,-c),b.translate(-a,-c),this._isUnderCache=!0,this._clearSelfAndDescendantCache(wl),this._clearSelfAndDescendantCache(O4),this.drawScene(d,this),this.drawHit(g,this),this._isUnderCache=!1,v.restore(),b.restore(),u&&(v.save(),v.beginPath(),v.rect(0,0,i,o),v.closePath(),v.setAttr("strokeStyle","red"),v.setAttr("lineWidth",5),v.stroke(),v.restore()),this._cache.set(wi,{scene:d,filter:h,hit:g,x:a,y:c}),this._requestDraw(),this}isCached(){return this._cache.has(wi)}getClientRect(e){throw new Error('abstract "getClientRect" method call')}_transformedRect(e,n){var r=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}],i=1/0,o=1/0,s=-1/0,a=-1/0,c=this.getAbsoluteTransform(n);return r.forEach(function(l){var u=c.point(l);i===void 0&&(i=s=u.x,o=a=u.y),i=Math.min(i,u.x),o=Math.min(o,u.y),s=Math.max(s,u.x),a=Math.max(a,u.y)}),{x:i,y:o,width:s-i,height:a-o}}_drawCachedSceneCanvas(e){e.save(),e._applyOpacity(this),e._applyGlobalCompositeOperation(this);let n=this._getCanvasCache();e.translate(n.x,n.y);var r=this._getCachedSceneCanvas(),i=r.pixelRatio;e.drawImage(r._canvas,0,0,r.width/i,r.height/i),e.restore()}_drawCachedHitCanvas(e){var n=this._getCanvasCache(),r=n.hit;e.save(),e.translate(n.x,n.y),e.drawImage(r._canvas,0,0,r.width/r.pixelRatio,r.height/r.pixelRatio),e.restore()}_getCachedSceneCanvas(){var e=this.filters(),n=this._getCanvasCache(),r=n.scene,i=n.filter,o=i.getContext(),s,a,c,l;if(e){if(!this._filterUpToDate){var u=r.pixelRatio;i.setSize(r.width/r.pixelRatio,r.height/r.pixelRatio);try{for(s=e.length,o.clear(),o.drawImage(r._canvas,0,0,r.getWidth()/u,r.getHeight()/u),a=o.getImageData(0,0,i.getWidth(),i.getHeight()),c=0;c<s;c++){if(l=e[c],typeof l!="function"){xe.Util.error("Filter should be type of function, but got "+typeof l+" instead. Please check correct filters");continue}l.call(this,a),o.putImageData(a,0,0)}}catch(f){xe.Util.error("Unable to apply filter. "+f.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return i}return r}on(e,n){if(this._cache&&this._cache.delete(bl),arguments.length===3)return this._delegate.apply(this,arguments);var r=e.split(Sl),i=r.length,o,s,a,c,l;for(o=0;o<i;o++)s=r[o],a=s.split("."),c=a[0],l=a[1]||"",this.eventListeners[c]||(this.eventListeners[c]=[]),this.eventListeners[c].push({name:l,handler:n});return this}off(e,n){var r=(e||"").split(Sl),i=r.length,o,s,a,c,l,u;if(this._cache&&this._cache.delete(bl),!e)for(s in this.eventListeners)this._off(s);for(o=0;o<i;o++)if(a=r[o],c=a.split("."),l=c[0],u=c[1],l)this.eventListeners[l]&&this._off(l,u,n);else for(s in this.eventListeners)this._off(s,u,n);return this}dispatchEvent(e){var n={target:this,type:e.type,evt:e};return this.fire(e.type,n),this}addEventListener(e,n){return this.on(e,function(r){n.call(this,r.evt)}),this}removeEventListener(e){return this.off(e),this}_delegate(e,n,r){var i=this;this.on(e,function(o){for(var s=o.target.findAncestors(n,!0,i),a=0;a<s.length;a++)o=xe.Util.cloneObject(o),o.currentTarget=s[a],r.call(s[a],o)})}remove(){return this.isDragging()&&this.stopDrag(),dn.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(hr),this._clearSelfAndDescendantCache(wl),this._clearSelfAndDescendantCache(O4),this._clearSelfAndDescendantCache(k4),this._clearSelfAndDescendantCache(zp),this._clearSelfAndDescendantCache(Gp)}_remove(){this._clearCaches();var e=this.getParent();e&&e.children&&(e.children.splice(this.index,1),e._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(e){var n="get"+xe.Util._capitalize(e);return xe.Util._isFunction(this[n])?this[n]():this.attrs[e]}getAncestors(){for(var e=this.getParent(),n=[];e;)n.push(e),e=e.getParent();return n}getAttrs(){return this.attrs||{}}setAttrs(e){return this._batchTransformChanges(()=>{var n,r;if(!e)return this;for(n in e)n!==xE&&(r=N4+xe.Util._capitalize(n),xe.Util._isFunction(this[r])?this[r](e[n]):this._setAttr(n,e[n]))}),this}isListening(){return this._getCache(Gp,this._isListening)}_isListening(e){if(!this.listening())return!1;let r=this.getParent();return r&&r!==e&&this!==e?r._isListening(e):!0}isVisible(){return this._getCache(zp,this._isVisible)}_isVisible(e){if(!this.visible())return!1;let r=this.getParent();return r&&r!==e&&this!==e?r._isVisible(e):!0}shouldDrawHit(e,n=!1){if(e)return this._isVisible(e)&&this._isListening(e);var r=this.getLayer(),i=!1;dn.DD._dragElements.forEach(s=>{s.dragStatus==="dragging"&&(s.node.nodeType==="Stage"||s.node.getLayer()===r)&&(i=!0)});var o=!n&&!bi.Konva.hitOnDragEnabled&&i;return this.isListening()&&this.isVisible()&&!o}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){var e=this.getDepth(),n=this,r=0,i,o,s,a;function c(u){for(i=[],o=u.length,s=0;s<o;s++)a=u[s],r++,a.nodeType!==F4&&(i=i.concat(a.getChildren().slice())),a._id===n._id&&(s=o);i.length>0&&i[0].getDepth()<=e&&c(i)}let l=this.getStage();return n.nodeType!==ME&&l&&c(l.getChildren()),r}getDepth(){for(var e=0,n=this.parent;n;)e++,n=n.parent;return e}_batchTransformChanges(e){this._batchingTransformChange=!0,e(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(Gr),this._clearSelfAndDescendantCache(hr)),this._needClearTransformCache=!1}setPosition(e){return this._batchTransformChanges(()=>{this.x(e.x),this.y(e.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){let e=this.getStage();if(!e)return null;var n=e.getPointerPosition();if(!n)return null;var r=this.getAbsoluteTransform().copy();return r.invert(),r.point(n)}getAbsolutePosition(e){let n=!1,r=this.parent;for(;r;){if(r.isCached()){n=!0;break}r=r.parent}n&&!e&&(e=!0);var i=this.getAbsoluteTransform(e).getMatrix(),o=new xe.Transform,s=this.offset();return o.m=i.slice(),o.translate(s.x,s.y),o.getTranslation()}setAbsolutePosition(e){let s=this._clearTransform(),{x:n,y:r}=s,i=cd(s,["x","y"]);this.attrs.x=n,this.attrs.y=r,this._clearCache(Gr);var o=this._getAbsoluteTransform().copy();return o.invert(),o.translate(e.x,e.y),e={x:this.attrs.x+o.getTranslation().x,y:this.attrs.y+o.getTranslation().y},this._setTransform(i),this.setPosition({x:e.x,y:e.y}),this._clearCache(Gr),this._clearSelfAndDescendantCache(hr),this}_setTransform(e){var n;for(n in e)this.attrs[n]=e[n]}_clearTransform(){var e={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,e}move(e){var n=e.x,r=e.y,i=this.x(),o=this.y();return n!==void 0&&(i+=n),r!==void 0&&(o+=r),this.setPosition({x:i,y:o}),this}_eachAncestorReverse(e,n){var r=[],i=this.getParent(),o,s;if(!(n&&n._id===this._id)){for(r.unshift(this);i&&(!n||i._id!==n._id);)r.unshift(i),i=i.parent;for(o=r.length,s=0;s<o;s++)e(r[s])}}rotate(e){return this.rotation(this.rotation()+e),this}moveToTop(){if(!this.parent)return xe.Util.warn("Node has no parent. moveToTop function is ignored."),!1;var e=this.index,n=this.parent.getChildren().length;return e<n-1?(this.parent.children.splice(e,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return xe.Util.warn("Node has no parent. moveUp function is ignored."),!1;var e=this.index,n=this.parent.getChildren().length;return e<n-1?(this.parent.children.splice(e,1),this.parent.children.splice(e+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return xe.Util.warn("Node has no parent. moveDown function is ignored."),!1;var e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.splice(e-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return xe.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;var e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(e){if(!this.parent)return xe.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(e<0||e>=this.parent.children.length)&&xe.Util.warn("Unexpected value "+e+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");var n=this.index;return this.parent.children.splice(n,1),this.parent.children.splice(e,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(wl,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){var e=this.opacity(),n=this.getParent();return n&&!n._isUnderCache&&(e*=n.getAbsoluteOpacity()),e}moveTo(e){return this.getParent()!==e&&(this._remove(),e.add(this)),this}toObject(){var e={},n=this.getAttrs(),r,i,o,s,a;e.attrs={};for(r in n)i=n[r],a=xe.Util.isObject(i)&&!xe.Util._isPlainObject(i)&&!xe.Util._isArray(i),!a&&(o=typeof this[r]=="function"&&this[r],delete n[r],s=o?o.call(this):null,n[r]=i,s!==i&&(e.attrs[r]=i));return e.className=this.getClassName(),xe.Util._prepareToStringify(e)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(e,n,r){var i=[];n&&this._isMatch(e)&&i.push(this);for(var o=this.parent;o;){if(o===r)return i;o._isMatch(e)&&i.push(o),o=o.parent}return i}isAncestorOf(e){return!1}findAncestor(e,n,r){return this.findAncestors(e,n,r)[0]}_isMatch(e){if(!e)return!1;if(typeof e=="function")return e(this);var n=e.replace(/ /g,"").split(","),r=n.length,i,o;for(i=0;i<r;i++)if(o=n[i],xe.Util.isValidSelector(o)||(xe.Util.warn('Selector "'+o+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),xe.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),xe.Util.warn("Konva is awesome, right?")),o.charAt(0)==="#"){if(this.id()===o.slice(1))return!0}else if(o.charAt(0)==="."){if(this.hasName(o.slice(1)))return!0}else if(this.className===o||this.nodeType===o)return!0;return!1}getLayer(){var e=this.getParent();return e?e.getLayer():null}getStage(){return this._getCache(k4,this._getStage)}_getStage(){var e=this.getParent();return e?e.getStage():null}fire(e,n={},r){return n.target=n.target||this,r?this._fireAndBubble(e,n):this._fire(e,n),this}getAbsoluteTransform(e){return e?this._getAbsoluteTransform(e):this._getCache(hr,this._getAbsoluteTransform)}_getAbsoluteTransform(e){var n;if(e)return n=new xe.Transform,this._eachAncestorReverse(function(i){var o=i.transformsEnabled();o==="all"?n.multiply(i.getTransform()):o==="position"&&n.translate(i.x()-i.offsetX(),i.y()-i.offsetY())},e),n;n=this._cache.get(hr)||new xe.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(n):n.reset();var r=this.transformsEnabled();if(r==="all")n.multiply(this.getTransform());else if(r==="position"){let i=this.attrs.x||0,o=this.attrs.y||0,s=this.attrs.offsetX||0,a=this.attrs.offsetY||0;n.translate(i-s,o-a)}return n.dirty=!1,n}getAbsoluteScale(e){for(var n=this;n;)n._isUnderCache&&(e=n),n=n.getParent();let i=this.getAbsoluteTransform(e).decompose();return{x:i.scaleX,y:i.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(Gr,this._getTransform)}_getTransform(){var e,n,r=this._cache.get(Gr)||new xe.Transform;r.reset();var i=this.x(),o=this.y(),s=bi.Konva.getAngle(this.rotation()),a=(e=this.attrs.scaleX)!==null&&e!==void 0?e:1,c=(n=this.attrs.scaleY)!==null&&n!==void 0?n:1,l=this.attrs.skewX||0,u=this.attrs.skewY||0,f=this.attrs.offsetX||0,d=this.attrs.offsetY||0;return(i!==0||o!==0)&&r.translate(i,o),s!==0&&r.rotate(s),(l!==0||u!==0)&&r.skew(l,u),(a!==1||c!==1)&&r.scale(a,c),(f!==0||d!==0)&&r.translate(-1*f,-1*d),r.dirty=!1,r}clone(e){var n=xe.Util.cloneObject(this.attrs),r,i,o,s,a;for(r in e)n[r]=e[r];var c=new this.constructor(n);for(r in this.eventListeners)for(i=this.eventListeners[r],o=i.length,s=0;s<o;s++)a=i[s],a.name.indexOf(IE)<0&&(c.eventListeners[r]||(c.eventListeners[r]=[]),c.eventListeners[r].push(a));return c}_toKonvaCanvas(e){e=e||{};var n=this.getClientRect(),r=this.getStage(),i=e.x!==void 0?e.x:Math.floor(n.x),o=e.y!==void 0?e.y:Math.floor(n.y),s=e.pixelRatio||1,a=new _l.SceneCanvas({width:e.width||Math.ceil(n.width)||(r?r.width():0),height:e.height||Math.ceil(n.height)||(r?r.height():0),pixelRatio:s}),c=a.getContext();return e.imageSmoothingEnabled===!1&&(c._context.imageSmoothingEnabled=!1),c.save(),(i||o)&&c.translate(-1*i,-1*o),this.drawScene(a),c.restore(),a}toCanvas(e){return this._toKonvaCanvas(e)._canvas}toDataURL(e){e=e||{};var n=e.mimeType||null,r=e.quality||null,i=this._toKonvaCanvas(e).toDataURL(n,r);return e.callback&&e.callback(i),i}toImage(e){return new Promise((n,r)=>{try{let i=e?.callback;i&&delete e.callback,xe.Util._urlToImage(this.toDataURL(e),function(o){n(o),i?.(o)})}catch(i){r(i)}})}toBlob(e){return new Promise((n,r)=>{try{let i=e?.callback;i&&delete e.callback,this.toCanvas(e).toBlob(o=>{n(o),i?.(o)},e?.mimeType,e?.quality)}catch(i){r(i)}})}setSize(e){return this.width(e.width),this.height(e.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():bi.Konva.dragDistance}_off(e,n,r){var i=this.eventListeners[e],o,s,a;for(o=0;o<i.length;o++)if(s=i[o].name,a=i[o].handler,(s!=="konva"||n==="konva")&&(!n||s===n)&&(!r||r===a)){if(i.splice(o,1),i.length===0){delete this.eventListeners[e];break}o--}}_fireChangeEvent(e,n,r){this._fire(e+EE,{oldVal:n,newVal:r})}addName(e){if(!this.hasName(e)){var n=this.name(),r=n?n+" "+e:e;this.name(r)}return this}hasName(e){if(!e)return!1;let n=this.name();if(!n)return!1;var r=(n||"").split(/\s/g);return r.indexOf(e)!==-1}removeName(e){var n=(this.name()||"").split(/\s/g),r=n.indexOf(e);return r!==-1&&(n.splice(r,1),this.name(n.join(" "))),this}setAttr(e,n){var r=this[N4+xe.Util._capitalize(e)];return xe.Util._isFunction(r)?r.call(this,n):this._setAttr(e,n),this}_requestDraw(){if(bi.Konva.autoDrawEnabled){let e=this.getLayer()||this.getStage();e?.batchDraw()}}_setAttr(e,n){var r=this.attrs[e];r===n&&!xe.Util.isObject(n)||(n==null?delete this.attrs[e]:this.attrs[e]=n,this._shouldFireChangeEvents&&this._fireChangeEvent(e,r,n),this._requestDraw())}_setComponentAttr(e,n,r){var i;r!==void 0&&(i=this.attrs[e],i||(this.attrs[e]=this.getAttr(e)),this.attrs[e][n]=r,this._fireChangeEvent(e,i,r))}_fireAndBubble(e,n,r){n&&this.nodeType===F4&&(n.target=this);var i=(e===R4||e===P4)&&(r&&(this===r||this.isAncestorOf&&this.isAncestorOf(r))||this.nodeType==="Stage"&&!r);if(!i){this._fire(e,n);var o=(e===R4||e===P4)&&r&&r.isAncestorOf&&r.isAncestorOf(this)&&!r.isAncestorOf(this.parent);(n&&!n.cancelBubble||!n)&&this.parent&&this.parent.isListening()&&!o&&(r&&r.parent?this._fireAndBubble.call(this.parent,e,n,r):this._fireAndBubble.call(this.parent,e,n))}}_getProtoListeners(e){var n,r,i;let o=(n=this._cache.get(bl))!==null&&n!==void 0?n:{},s=o?.[e];if(s===void 0){s=[];let a=Object.getPrototypeOf(this);for(;a;){let c=(i=(r=a.eventListeners)===null||r===void 0?void 0:r[e])!==null&&i!==void 0?i:[];s.push(...c),a=Object.getPrototypeOf(a)}o[e]=s,this._cache.set(bl,o)}return s}_fire(e,n){n=n||{},n.currentTarget=this,n.type=e;let r=this._getProtoListeners(e);if(r)for(var i=0;i<r.length;i++)r[i].handler.call(this,n);let o=this.eventListeners[e];if(o)for(var i=0;i<o.length;i++)o[i].handler.call(this,n)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(e){var n=e?e.pointerId:void 0,r=this.getStage(),i=this.getAbsolutePosition();if(r){var o=r._getPointerById(n)||r._changedPointerPositions[0]||i;dn.DD._dragElements.set(this._id,{node:this,startPointerPos:o,offset:{x:o.x-i.x,y:o.y-i.y},dragStatus:"ready",pointerId:n})}}startDrag(e,n=!0){dn.DD._dragElements.has(this._id)||this._createDragElement(e);let r=dn.DD._dragElements.get(this._id);r.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:e&&e.evt},n)}_setDragPosition(e,n){let r=this.getStage()._getPointerById(n.pointerId);if(r){var i={x:r.x-n.offset.x,y:r.y-n.offset.y},o=this.dragBoundFunc();if(o!==void 0){let s=o.call(this,i,e);s?i=s:xe.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==i.x||this._lastPos.y!==i.y)&&(this.setAbsolutePosition(i),this._requestDraw()),this._lastPos=i}}stopDrag(e){let n=dn.DD._dragElements.get(this._id);n&&(n.dragStatus="stopped"),dn.DD._endDragBefore(e),dn.DD._endDragAfter(e)}setDraggable(e){this._setAttr("draggable",e),this._dragChange()}isDragging(){let e=dn.DD._dragElements.get(this._id);return e?e.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(e){var n=e.evt.button!==void 0,r=!n||bi.Konva.dragButtons.indexOf(e.evt.button)>=0;if(r&&!this.isDragging()){var i=!1;dn.DD._dragElements.forEach(o=>{this.isAncestorOf(o.node)&&(i=!0)}),i||this._createDragElement(e)}})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{this._dragCleanup();var e=this.getStage();if(!e)return;let n=dn.DD._dragElements.get(this._id),r=n&&n.dragStatus==="dragging",i=n&&n.dragStatus==="ready";r?this.stopDrag():i&&dn.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(e={x:0,y:0}){let n=this.getStage();if(!n)return!1;let r={x:-e.x,y:-e.y,width:n.width()+2*e.x,height:n.height()+2*e.y};return xe.Util.haveIntersection(r,this.getClientRect())}static create(e,n){return xe.Util._isString(e)&&(e=JSON.parse(e)),this._createNode(e,n)}static _createNode(e,n){var r=t.prototype.getClassName.call(e),i=e.children,o,s,a;n&&(e.attrs.container=n),bi.Konva[r]||(xe.Util.warn('Can not find a node with class name "'+r+'". Fallback to "Shape".'),r="Shape");let c=bi.Konva[r];if(o=new c(e.attrs),i)for(s=i.length,a=0;a<s;a++)o.add(t._createNode(i[a]));return o}};Dl.Node=se;se.prototype.nodeType="Node";se.prototype._attrsAffectingSize=[];se.prototype.eventListeners={};se.prototype.on.call(se.prototype,TE,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(Gr),this._clearSelfAndDescendantCache(hr)});se.prototype.on.call(se.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(zp)});se.prototype.on.call(se.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(Gp)});se.prototype.on.call(se.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(wl)});var Ge=ta.Factory.addGetterSetter;Ge(se,"zIndex");Ge(se,"absolutePosition");Ge(se,"position");Ge(se,"x",0,(0,ht.getNumberValidator)());Ge(se,"y",0,(0,ht.getNumberValidator)());Ge(se,"globalCompositeOperation","source-over",(0,ht.getStringValidator)());Ge(se,"opacity",1,(0,ht.getNumberValidator)());Ge(se,"name","",(0,ht.getStringValidator)());Ge(se,"id","",(0,ht.getStringValidator)());Ge(se,"rotation",0,(0,ht.getNumberValidator)());ta.Factory.addComponentsGetterSetter(se,"scale",["x","y"]);Ge(se,"scaleX",1,(0,ht.getNumberValidator)());Ge(se,"scaleY",1,(0,ht.getNumberValidator)());ta.Factory.addComponentsGetterSetter(se,"skew",["x","y"]);Ge(se,"skewX",0,(0,ht.getNumberValidator)());Ge(se,"skewY",0,(0,ht.getNumberValidator)());ta.Factory.addComponentsGetterSetter(se,"offset",["x","y"]);Ge(se,"offsetX",0,(0,ht.getNumberValidator)());Ge(se,"offsetY",0,(0,ht.getNumberValidator)());Ge(se,"dragDistance",null,(0,ht.getNumberValidator)());Ge(se,"width",0,(0,ht.getNumberValidator)());Ge(se,"height",0,(0,ht.getNumberValidator)());Ge(se,"listening",!0,(0,ht.getBooleanValidator)());Ge(se,"preventDefault",!0,(0,ht.getBooleanValidator)());Ge(se,"filters",null,function(t){return this._filterUpToDate=!1,t});Ge(se,"visible",!0,(0,ht.getBooleanValidator)());Ge(se,"transformsEnabled","all",(0,ht.getStringValidator)());Ge(se,"size");Ge(se,"dragBoundFunc");Ge(se,"draggable",!1,(0,ht.getBooleanValidator)());ta.Factory.backCompat(se,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"})});var na=Y(xl=>{"use strict";Object.defineProperty(xl,"__esModule",{value:!0});xl.Container=void 0;var To=me(),qp=lt(),El=be(),pr=class extends qp.Node{constructor(){super(...arguments),this.children=[]}getChildren(e){if(!e)return this.children||[];let n=this.children||[];var r=[];return n.forEach(function(i){e(i)&&r.push(i)}),r}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.destroy()}),this.children=[],this._requestDraw(),this}add(...e){if(e.length===0)return this;if(e.length>1){for(var n=0;n<e.length;n++)this.add(e[n]);return this}let r=e[0];return r.getParent()?(r.moveTo(this),this):(this._validateAdd(r),r.index=this.getChildren().length,r.parent=this,r._clearCaches(),this.getChildren().push(r),this._fire("add",{child:r}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(e){return this._generalFind(e,!1)}findOne(e){var n=this._generalFind(e,!0);return n.length>0?n[0]:void 0}_generalFind(e,n){var r=[];return this._descendants(i=>{let o=i._isMatch(e);return o&&r.push(i),!!(o&&n)}),r}_descendants(e){let n=!1,r=this.getChildren();for(let i of r){if(n=e(i),n)return!0;if(i.hasChildren()&&(n=i._descendants(e),n))return!0}return!1}toObject(){var e=qp.Node.prototype.toObject.call(this);return e.children=[],this.getChildren().forEach(n=>{e.children.push(n.toObject())}),e}isAncestorOf(e){for(var n=e.getParent();n;){if(n._id===this._id)return!0;n=n.getParent()}return!1}clone(e){var n=qp.Node.prototype.clone.call(this,e);return this.getChildren().forEach(function(r){n.add(r.clone())}),n}getAllIntersections(e){var n=[];return this.find("Shape").forEach(r=>{r.isVisible()&&r.intersects(e)&&n.push(r)}),n}_clearSelfAndDescendantCache(e){var n;super._clearSelfAndDescendantCache(e),!this.isCached()&&((n=this.children)===null||n===void 0||n.forEach(function(r){r._clearSelfAndDescendantCache(e)}))}_setChildrenIndices(){var e;(e=this.children)===null||e===void 0||e.forEach(function(n,r){n.index=r}),this._requestDraw()}drawScene(e,n){var r=this.getLayer(),i=e||r&&r.getCanvas(),o=i&&i.getContext(),s=this._getCanvasCache(),a=s&&s.scene,c=i&&i.isCache;if(!this.isVisible()&&!c)return this;if(a){o.save();var l=this.getAbsoluteTransform(n).getMatrix();o.transform(l[0],l[1],l[2],l[3],l[4],l[5]),this._drawCachedSceneCanvas(o),o.restore()}else this._drawChildren("drawScene",i,n);return this}drawHit(e,n){if(!this.shouldDrawHit(n))return this;var r=this.getLayer(),i=e||r&&r.hitCanvas,o=i&&i.getContext(),s=this._getCanvasCache(),a=s&&s.hit;if(a){o.save();var c=this.getAbsoluteTransform(n).getMatrix();o.transform(c[0],c[1],c[2],c[3],c[4],c[5]),this._drawCachedHitCanvas(o),o.restore()}else this._drawChildren("drawHit",i,n);return this}_drawChildren(e,n,r){var i,o=n&&n.getContext(),s=this.clipWidth(),a=this.clipHeight(),c=this.clipFunc(),l=s&&a||c;let u=r===this;if(l){o.save();var f=this.getAbsoluteTransform(r),d=f.getMatrix();o.transform(d[0],d[1],d[2],d[3],d[4],d[5]),o.beginPath();let b;if(c)b=c.call(this,o,this);else{var h=this.clipX(),g=this.clipY();o.rect(h,g,s,a)}o.clip.apply(o,b),d=f.copy().invert().getMatrix(),o.transform(d[0],d[1],d[2],d[3],d[4],d[5])}var v=!u&&this.globalCompositeOperation()!=="source-over"&&e==="drawScene";v&&(o.save(),o._applyGlobalCompositeOperation(this)),(i=this.children)===null||i===void 0||i.forEach(function(b){b[e](n,r)}),v&&o.restore(),l&&o.restore()}getClientRect(e={}){var n,r=e.skipTransform,i=e.relativeTo,o,s,a,c,l={x:1/0,y:1/0,width:0,height:0},u=this;(n=this.children)===null||n===void 0||n.forEach(function(v){if(v.visible()){var b=v.getClientRect({relativeTo:u,skipShadow:e.skipShadow,skipStroke:e.skipStroke});b.width===0&&b.height===0||(o===void 0?(o=b.x,s=b.y,a=b.x+b.width,c=b.y+b.height):(o=Math.min(o,b.x),s=Math.min(s,b.y),a=Math.max(a,b.x+b.width),c=Math.max(c,b.y+b.height)))}});for(var f=this.find("Shape"),d=!1,h=0;h<f.length;h++){var g=f[h];if(g._isVisible(this)){d=!0;break}}return d&&o!==void 0?l={x:o,y:s,width:a-o,height:c-s}:l={x:0,y:0,width:0,height:0},r?l:this._transformedRect(l,i)}};xl.Container=pr;To.Factory.addComponentsGetterSetter(pr,"clip",["x","y","width","height"]);To.Factory.addGetterSetter(pr,"clipX",void 0,(0,El.getNumberValidator)());To.Factory.addGetterSetter(pr,"clipY",void 0,(0,El.getNumberValidator)());To.Factory.addGetterSetter(pr,"clipWidth",void 0,(0,El.getNumberValidator)());To.Factory.addGetterSetter(pr,"clipHeight",void 0,(0,El.getNumberValidator)());To.Factory.addGetterSetter(pr,"clipFunc")});var Yp=Y(fn=>{"use strict";Object.defineProperty(fn,"__esModule",{value:!0});fn.releaseCapture=fn.setPointerCapture=fn.hasPointerCapture=fn.createEvent=fn.getCapturedShape=void 0;var OE=_e(),ra=new Map,L4=OE.Konva._global.PointerEvent!==void 0;function RE(t){return ra.get(t)}fn.getCapturedShape=RE;function Wp(t){return{evt:t,pointerId:t.pointerId}}fn.createEvent=Wp;function PE(t,e){return ra.get(t)===e}fn.hasPointerCapture=PE;function NE(t,e){V4(t),e.getStage()&&(ra.set(t,e),L4&&e._fire("gotpointercapture",Wp(new PointerEvent("gotpointercapture"))))}fn.setPointerCapture=NE;function V4(t,e){let n=ra.get(t);if(!n)return;let r=n.getStage();r&&r.content,ra.delete(t),L4&&n._fire("lostpointercapture",Wp(new PointerEvent("lostpointercapture")))}fn.releaseCapture=V4});var Q4=Y(mr=>{"use strict";Object.defineProperty(mr,"__esModule",{value:!0});mr.Stage=mr.stages=void 0;var Xn=st(),FE=me(),j4=na(),zt=_e(),Kp=Js(),Ao=Cl(),kE=_e(),gr=Yp(),LE="Stage",VE="string",U4="px",jE="mouseout",$4="mouseleave",H4="mouseover",G4="mouseenter",z4="mousemove",q4="mousedown",W4="mouseup",ia="pointermove",oa="pointerdown",Ro="pointerup",sa="pointercancel",UE="lostpointercapture",Il="pointerout",Ml="pointerleave",Tl="pointerover",Al="pointerenter",Zp="contextmenu",Y4="touchstart",K4="touchend",X4="touchmove",Z4="touchcancel",Qp="wheel",BE=5,$E=[[G4,"_pointerenter"],[q4,"_pointerdown"],[z4,"_pointermove"],[W4,"_pointerup"],[$4,"_pointerleave"],[Y4,"_pointerdown"],[X4,"_pointermove"],[K4,"_pointerup"],[Z4,"_pointercancel"],[H4,"_pointerover"],[Qp,"_wheel"],[Zp,"_contextmenu"],[oa,"_pointerdown"],[ia,"_pointermove"],[Ro,"_pointerup"],[sa,"_pointercancel"],[UE,"_lostpointercapture"]],Xp={mouse:{[Il]:jE,[Ml]:$4,[Tl]:H4,[Al]:G4,[ia]:z4,[oa]:q4,[Ro]:W4,[sa]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[Il]:"touchout",[Ml]:"touchleave",[Tl]:"touchover",[Al]:"touchenter",[ia]:X4,[oa]:Y4,[Ro]:K4,[sa]:Z4,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[Il]:Il,[Ml]:Ml,[Tl]:Tl,[Al]:Al,[ia]:ia,[oa]:oa,[Ro]:Ro,[sa]:sa,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},aa=t=>t.indexOf("pointer")>=0?"pointer":t.indexOf("touch")>=0?"touch":"mouse",Oo=t=>{let e=aa(t);if(e==="pointer")return zt.Konva.pointerEventsEnabled&&Xp.pointer;if(e==="touch")return Xp.touch;if(e==="mouse")return Xp.mouse};function B4(t={}){return(t.clipFunc||t.clipWidth||t.clipHeight)&&Xn.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),t}var HE="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";mr.stages=[];var Po=class extends j4.Container{constructor(e){super(B4(e)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),mr.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{B4(this.attrs)}),this._checkVisibility()}_validateAdd(e){let n=e.getType()==="Layer",r=e.getType()==="FastLayer";n||r||Xn.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;let e=this.visible()?"":"none";this.content.style.display=e}setContainer(e){if(typeof e===VE){if(e.charAt(0)==="."){var n=e.slice(1);e=document.getElementsByClassName(n)[0]}else{var r;e.charAt(0)!=="#"?r=e:r=e.slice(1),e=document.getElementById(r)}if(!e)throw"Can not find container in document with id "+r}return this._setAttr("container",e),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),e.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){var e=this.children,n=e.length,r;for(r=0;r<n;r++)e[r].clear();return this}clone(e){return e||(e={}),e.container=typeof document<"u"&&document.createElement("div"),j4.Container.prototype.clone.call(this,e)}destroy(){super.destroy();var e=this.content;e&&Xn.Util._isInDocument(e)&&this.container().removeChild(e);var n=mr.stages.indexOf(this);return n>-1&&mr.stages.splice(n,1),Xn.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){let e=this._pointerPositions[0]||this._changedPointerPositions[0];return e?{x:e.x,y:e.y}:(Xn.Util.warn(HE),null)}_getPointerById(e){return this._pointerPositions.find(n=>n.id===e)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(e){e=e||{},e.x=e.x||0,e.y=e.y||0,e.width=e.width||this.width(),e.height=e.height||this.height();var n=new Kp.SceneCanvas({width:e.width,height:e.height,pixelRatio:e.pixelRatio||1}),r=n.getContext()._context,i=this.children;return(e.x||e.y)&&r.translate(-1*e.x,-1*e.y),i.forEach(function(o){if(o.isVisible()){var s=o._toKonvaCanvas(e);r.drawImage(s._canvas,e.x,e.y,s.getWidth()/s.getPixelRatio(),s.getHeight()/s.getPixelRatio())}}),n}getIntersection(e){if(!e)return null;var n=this.children,r=n.length,i=r-1,o;for(o=i;o>=0;o--){let s=n[o].getIntersection(e);if(s)return s}return null}_resizeDOM(){var e=this.width(),n=this.height();this.content&&(this.content.style.width=e+U4,this.content.style.height=n+U4),this.bufferCanvas.setSize(e,n),this.bufferHitCanvas.setSize(e,n),this.children.forEach(r=>{r.setSize({width:e,height:n}),r.draw()})}add(e,...n){if(arguments.length>1){for(var r=0;r<arguments.length;r++)this.add(arguments[r]);return this}super.add(e);var i=this.children.length;return i>BE&&Xn.Util.warn("The stage has "+i+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),e.setSize({width:this.width(),height:this.height()}),e.draw(),zt.Konva.isBrowser&&this.content.appendChild(e.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(e){return gr.hasPointerCapture(e,this)}setPointerCapture(e){gr.setPointerCapture(e,this)}releaseCapture(e){gr.releaseCapture(e,this)}getLayers(){return this.children}_bindContentEvents(){zt.Konva.isBrowser&&$E.forEach(([e,n])=>{this.content.addEventListener(e,r=>{this[n](r)},{passive:!1})})}_pointerenter(e){this.setPointersPositions(e);let n=Oo(e.type);n&&this._fire(n.pointerenter,{evt:e,target:this,currentTarget:this})}_pointerover(e){this.setPointersPositions(e);let n=Oo(e.type);n&&this._fire(n.pointerover,{evt:e,target:this,currentTarget:this})}_getTargetShape(e){let n=this[e+"targetShape"];return n&&!n.getStage()&&(n=null),n}_pointerleave(e){let n=Oo(e.type),r=aa(e.type);if(n){this.setPointersPositions(e);var i=this._getTargetShape(r),o=!Ao.DD.isDragging||zt.Konva.hitOnDragEnabled;i&&o?(i._fireAndBubble(n.pointerout,{evt:e}),i._fireAndBubble(n.pointerleave,{evt:e}),this._fire(n.pointerleave,{evt:e,target:this,currentTarget:this}),this[r+"targetShape"]=null):o&&(this._fire(n.pointerleave,{evt:e,target:this,currentTarget:this}),this._fire(n.pointerout,{evt:e,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}}_pointerdown(e){let n=Oo(e.type),r=aa(e.type);if(n){this.setPointersPositions(e);var i=!1;this._changedPointerPositions.forEach(o=>{var s=this.getIntersection(o);if(Ao.DD.justDragged=!1,zt.Konva["_"+r+"ListenClick"]=!0,!s||!s.isListening())return;zt.Konva.capturePointerEventsEnabled&&s.setPointerCapture(o.id),this[r+"ClickStartShape"]=s,s._fireAndBubble(n.pointerdown,{evt:e,pointerId:o.id}),i=!0;let a=e.type.indexOf("touch")>=0;s.preventDefault()&&e.cancelable&&a&&e.preventDefault()}),i||this._fire(n.pointerdown,{evt:e,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}}_pointermove(e){let n=Oo(e.type),r=aa(e.type);if(!n)return;Ao.DD.isDragging&&Ao.DD.node.preventDefault()&&e.cancelable&&e.preventDefault(),this.setPointersPositions(e);var i=!Ao.DD.isDragging||zt.Konva.hitOnDragEnabled;if(!i)return;var o={};let s=!1;var a=this._getTargetShape(r);this._changedPointerPositions.forEach(c=>{let l=gr.getCapturedShape(c.id)||this.getIntersection(c),u=c.id,f={evt:e,pointerId:u};var d=a!==l;if(d&&a&&(a._fireAndBubble(n.pointerout,T({},f),l),a._fireAndBubble(n.pointerleave,T({},f),l)),l){if(o[l._id])return;o[l._id]=!0}l&&l.isListening()?(s=!0,d&&(l._fireAndBubble(n.pointerover,T({},f),a),l._fireAndBubble(n.pointerenter,T({},f),a),this[r+"targetShape"]=l),l._fireAndBubble(n.pointermove,T({},f))):a&&(this._fire(n.pointerover,{evt:e,target:this,currentTarget:this,pointerId:u}),this[r+"targetShape"]=null)}),s||this._fire(n.pointermove,{evt:e,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(e){let n=Oo(e.type),r=aa(e.type);if(!n)return;this.setPointersPositions(e);let i=this[r+"ClickStartShape"],o=this[r+"ClickEndShape"];var s={};let a=!1;this._changedPointerPositions.forEach(c=>{let l=gr.getCapturedShape(c.id)||this.getIntersection(c);if(l){if(l.releaseCapture(c.id),s[l._id])return;s[l._id]=!0}let u=c.id,f={evt:e,pointerId:u},d=!1;zt.Konva["_"+r+"InDblClickWindow"]?(d=!0,clearTimeout(this[r+"DblTimeout"])):Ao.DD.justDragged||(zt.Konva["_"+r+"InDblClickWindow"]=!0,clearTimeout(this[r+"DblTimeout"])),this[r+"DblTimeout"]=setTimeout(function(){zt.Konva["_"+r+"InDblClickWindow"]=!1},zt.Konva.dblClickWindow),l&&l.isListening()?(a=!0,this[r+"ClickEndShape"]=l,l._fireAndBubble(n.pointerup,T({},f)),zt.Konva["_"+r+"ListenClick"]&&i&&i===l&&(l._fireAndBubble(n.pointerclick,T({},f)),d&&o&&o===l&&l._fireAndBubble(n.pointerdblclick,T({},f)))):(this[r+"ClickEndShape"]=null,zt.Konva["_"+r+"ListenClick"]&&this._fire(n.pointerclick,{evt:e,target:this,currentTarget:this,pointerId:u}),d&&this._fire(n.pointerdblclick,{evt:e,target:this,currentTarget:this,pointerId:u}))}),a||this._fire(n.pointerup,{evt:e,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),zt.Konva["_"+r+"ListenClick"]=!1,e.cancelable&&r!=="touch"&&e.preventDefault()}_contextmenu(e){this.setPointersPositions(e);var n=this.getIntersection(this.getPointerPosition());n&&n.isListening()?n._fireAndBubble(Zp,{evt:e}):this._fire(Zp,{evt:e,target:this,currentTarget:this})}_wheel(e){this.setPointersPositions(e);var n=this.getIntersection(this.getPointerPosition());n&&n.isListening()?n._fireAndBubble(Qp,{evt:e}):this._fire(Qp,{evt:e,target:this,currentTarget:this})}_pointercancel(e){this.setPointersPositions(e);let n=gr.getCapturedShape(e.pointerId)||this.getIntersection(this.getPointerPosition());n&&n._fireAndBubble(Ro,gr.createEvent(e)),gr.releaseCapture(e.pointerId)}_lostpointercapture(e){gr.releaseCapture(e.pointerId)}setPointersPositions(e){var n=this._getContentPosition(),r=null,i=null;e=e||window.event,e.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(e.touches,o=>{this._pointerPositions.push({id:o.identifier,x:(o.clientX-n.left)/n.scaleX,y:(o.clientY-n.top)/n.scaleY})}),Array.prototype.forEach.call(e.changedTouches||e.touches,o=>{this._changedPointerPositions.push({id:o.identifier,x:(o.clientX-n.left)/n.scaleX,y:(o.clientY-n.top)/n.scaleY})})):(r=(e.clientX-n.left)/n.scaleX,i=(e.clientY-n.top)/n.scaleY,this.pointerPos={x:r,y:i},this._pointerPositions=[{x:r,y:i,id:Xn.Util._getFirstPointerId(e)}],this._changedPointerPositions=[{x:r,y:i,id:Xn.Util._getFirstPointerId(e)}])}_setPointerPosition(e){Xn.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(e)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};var e=this.content.getBoundingClientRect();return{top:e.top,left:e.left,scaleX:e.width/this.content.clientWidth||1,scaleY:e.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new Kp.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new Kp.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!!zt.Konva.isBrowser){var e=this.container();if(!e)throw"Stage has no container. A container is required.";e.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),e.appendChild(this.content),this._resizeDOM()}}cache(){return Xn.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(e){e.batchDraw()}),this}};mr.Stage=Po;Po.prototype.nodeType=LE;(0,kE._registerNode)(Po);FE.Factory.addGetterSetter(Po,"container")});var Et=Y(vr=>{"use strict";Object.defineProperty(vr,"__esModule",{value:!0});vr.Shape=vr.shapes=void 0;var GE=_e(),Zn=st(),q=me(),J4=lt(),wt=be(),zE=_e(),Jp=Yp(),e5="hasShadow",t5="shadowRGBA",n5="patternImage",r5="linearGradient",i5="radialGradient",Ol;function e1(){return Ol||(Ol=Zn.Util.createCanvasElement().getContext("2d"),Ol)}vr.shapes={};function qE(t){let e=this.attrs.fillRule;e?t.fill(e):t.fill()}function WE(t){t.stroke()}function YE(t){t.fill()}function KE(t){t.stroke()}function XE(){this._clearCache(e5)}function ZE(){this._clearCache(t5)}function QE(){this._clearCache(n5)}function JE(){this._clearCache(r5)}function ex(){this._clearCache(i5)}var V=class extends J4.Node{constructor(e){super(e);let n;for(;n=Zn.Util.getRandomColor(),!(n&&!(n in vr.shapes)););this.colorKey=n,vr.shapes[n]=this}getContext(){return Zn.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return Zn.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(e5,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(n5,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){var e=e1();let n=e.createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(n&&n.setTransform){let r=new Zn.Transform;r.translate(this.fillPatternX(),this.fillPatternY()),r.rotate(GE.Konva.getAngle(this.fillPatternRotation())),r.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),r.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());let i=r.getMatrix(),o=typeof DOMMatrix>"u"?{a:i[0],b:i[1],c:i[2],d:i[3],e:i[4],f:i[5]}:new DOMMatrix(i);n.setTransform(o)}return n}}_getLinearGradient(){return this._getCache(r5,this.__getLinearGradient)}__getLinearGradient(){var e=this.fillLinearGradientColorStops();if(e){for(var n=e1(),r=this.fillLinearGradientStartPoint(),i=this.fillLinearGradientEndPoint(),o=n.createLinearGradient(r.x,r.y,i.x,i.y),s=0;s<e.length;s+=2)o.addColorStop(e[s],e[s+1]);return o}}_getRadialGradient(){return this._getCache(i5,this.__getRadialGradient)}__getRadialGradient(){var e=this.fillRadialGradientColorStops();if(e){for(var n=e1(),r=this.fillRadialGradientStartPoint(),i=this.fillRadialGradientEndPoint(),o=n.createRadialGradient(r.x,r.y,this.fillRadialGradientStartRadius(),i.x,i.y,this.fillRadialGradientEndRadius()),s=0;s<e.length;s+=2)o.addColorStop(e[s],e[s+1]);return o}}getShadowRGBA(){return this._getCache(t5,this._getShadowRGBA)}_getShadowRGBA(){if(this.hasShadow()){var e=Zn.Util.colorToRGBA(this.shadowColor());if(e)return"rgba("+e.r+","+e.g+","+e.b+","+e.a*(this.shadowOpacity()||1)+")"}}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){let e=this.hitStrokeWidth();return e==="auto"?this.hasStroke():this.strokeEnabled()&&!!e}intersects(e){var n=this.getStage();if(!n)return!1;let r=n.bufferHitCanvas;return r.getContext().clear(),this.drawHit(r,void 0,!0),r.context.getImageData(Math.round(e.x),Math.round(e.y),1,1).data[3]>0}destroy(){return J4.Node.prototype.destroy.call(this),delete vr.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(e){var n;if(!this.getStage()||!((n=this.attrs.perfectDrawEnabled)!==null&&n!==void 0?n:!0))return!1;let i=e||this.hasFill(),o=this.hasStroke(),s=this.getAbsoluteOpacity()!==1;if(i&&o&&s)return!0;let a=this.hasShadow(),c=this.shadowForStrokeEnabled();return!!(i&&o&&a&&c)}setStrokeHitEnabled(e){Zn.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),e?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){var e=this.size();return{x:this._centroid?-e.width/2:0,y:this._centroid?-e.height/2:0,width:e.width,height:e.height}}getClientRect(e={}){let n=e.skipTransform,r=e.relativeTo,i=this.getSelfRect(),s=!e.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,a=i.width+s,c=i.height+s,l=!e.skipShadow&&this.hasShadow(),u=l?this.shadowOffsetX():0,f=l?this.shadowOffsetY():0,d=a+Math.abs(u),h=c+Math.abs(f),g=l&&this.shadowBlur()||0,v=d+g*2,b=h+g*2,D={width:v,height:b,x:-(s/2+g)+Math.min(u,0)+i.x,y:-(s/2+g)+Math.min(f,0)+i.y};return n?D:this._transformedRect(D,r)}drawScene(e,n){var r=this.getLayer(),i=e||r.getCanvas(),o=i.getContext(),s=this._getCanvasCache(),a=this.getSceneFunc(),c=this.hasShadow(),l,u,f,d=i.isCache,h=n===this;if(!this.isVisible()&&!h)return this;if(s){o.save();var g=this.getAbsoluteTransform(n).getMatrix();return o.transform(g[0],g[1],g[2],g[3],g[4],g[5]),this._drawCachedSceneCanvas(o),o.restore(),this}if(!a)return this;if(o.save(),this._useBufferCanvas()&&!d){l=this.getStage(),u=l.bufferCanvas,f=u.getContext(),f.clear(),f.save(),f._applyLineJoin(this);var v=this.getAbsoluteTransform(n).getMatrix();f.transform(v[0],v[1],v[2],v[3],v[4],v[5]),a.call(this,f,this),f.restore();var b=u.pixelRatio;c&&o._applyShadow(this),o._applyOpacity(this),o._applyGlobalCompositeOperation(this),o.drawImage(u._canvas,0,0,u.width/b,u.height/b)}else{if(o._applyLineJoin(this),!h){var v=this.getAbsoluteTransform(n).getMatrix();o.transform(v[0],v[1],v[2],v[3],v[4],v[5]),o._applyOpacity(this),o._applyGlobalCompositeOperation(this)}c&&o._applyShadow(this),a.call(this,o,this)}return o.restore(),this}drawHit(e,n,r=!1){if(!this.shouldDrawHit(n,r))return this;var i=this.getLayer(),o=e||i.hitCanvas,s=o&&o.getContext(),a=this.hitFunc()||this.sceneFunc(),c=this._getCanvasCache(),l=c&&c.hit;if(this.colorKey||Zn.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),l){s.save();var u=this.getAbsoluteTransform(n).getMatrix();return s.transform(u[0],u[1],u[2],u[3],u[4],u[5]),this._drawCachedHitCanvas(s),s.restore(),this}if(!a)return this;if(s.save(),s._applyLineJoin(this),!(this===n)){var d=this.getAbsoluteTransform(n).getMatrix();s.transform(d[0],d[1],d[2],d[3],d[4],d[5])}return a.call(this,s,this),s.restore(),this}drawHitFromCache(e=0){var n=this._getCanvasCache(),r=this._getCachedSceneCanvas(),i=n.hit,o=i.getContext(),s=i.getWidth(),a=i.getHeight(),c,l,u,f,d,h;o.clear(),o.drawImage(r._canvas,0,0,s,a);try{for(c=o.getImageData(0,0,s,a),l=c.data,u=l.length,f=Zn.Util._hexToRgb(this.colorKey),d=0;d<u;d+=4)h=l[d+3],h>e?(l[d]=f.r,l[d+1]=f.g,l[d+2]=f.b,l[d+3]=255):l[d+3]=0;o.putImageData(c,0,0)}catch(g){Zn.Util.error("Unable to draw hit graph from cached scene canvas. "+g.message)}return this}hasPointerCapture(e){return Jp.hasPointerCapture(e,this)}setPointerCapture(e){Jp.setPointerCapture(e,this)}releaseCapture(e){Jp.releaseCapture(e,this)}};vr.Shape=V;V.prototype._fillFunc=qE;V.prototype._strokeFunc=WE;V.prototype._fillFuncHit=YE;V.prototype._strokeFuncHit=KE;V.prototype._centroid=!1;V.prototype.nodeType="Shape";(0,zE._registerNode)(V);V.prototype.eventListeners={};V.prototype.on.call(V.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",XE);V.prototype.on.call(V.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",ZE);V.prototype.on.call(V.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",QE);V.prototype.on.call(V.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",JE);V.prototype.on.call(V.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",ex);q.Factory.addGetterSetter(V,"stroke",void 0,(0,wt.getStringOrGradientValidator)());q.Factory.addGetterSetter(V,"strokeWidth",2,(0,wt.getNumberValidator)());q.Factory.addGetterSetter(V,"fillAfterStrokeEnabled",!1);q.Factory.addGetterSetter(V,"hitStrokeWidth","auto",(0,wt.getNumberOrAutoValidator)());q.Factory.addGetterSetter(V,"strokeHitEnabled",!0,(0,wt.getBooleanValidator)());q.Factory.addGetterSetter(V,"perfectDrawEnabled",!0,(0,wt.getBooleanValidator)());q.Factory.addGetterSetter(V,"shadowForStrokeEnabled",!0,(0,wt.getBooleanValidator)());q.Factory.addGetterSetter(V,"lineJoin");q.Factory.addGetterSetter(V,"lineCap");q.Factory.addGetterSetter(V,"sceneFunc");q.Factory.addGetterSetter(V,"hitFunc");q.Factory.addGetterSetter(V,"dash");q.Factory.addGetterSetter(V,"dashOffset",0,(0,wt.getNumberValidator)());q.Factory.addGetterSetter(V,"shadowColor",void 0,(0,wt.getStringValidator)());q.Factory.addGetterSetter(V,"shadowBlur",0,(0,wt.getNumberValidator)());q.Factory.addGetterSetter(V,"shadowOpacity",1,(0,wt.getNumberValidator)());q.Factory.addComponentsGetterSetter(V,"shadowOffset",["x","y"]);q.Factory.addGetterSetter(V,"shadowOffsetX",0,(0,wt.getNumberValidator)());q.Factory.addGetterSetter(V,"shadowOffsetY",0,(0,wt.getNumberValidator)());q.Factory.addGetterSetter(V,"fillPatternImage");q.Factory.addGetterSetter(V,"fill",void 0,(0,wt.getStringOrGradientValidator)());q.Factory.addGetterSetter(V,"fillPatternX",0,(0,wt.getNumberValidator)());q.Factory.addGetterSetter(V,"fillPatternY",0,(0,wt.getNumberValidator)());q.Factory.addGetterSetter(V,"fillLinearGradientColorStops");q.Factory.addGetterSetter(V,"strokeLinearGradientColorStops");q.Factory.addGetterSetter(V,"fillRadialGradientStartRadius",0);q.Factory.addGetterSetter(V,"fillRadialGradientEndRadius",0);q.Factory.addGetterSetter(V,"fillRadialGradientColorStops");q.Factory.addGetterSetter(V,"fillPatternRepeat","repeat");q.Factory.addGetterSetter(V,"fillEnabled",!0);q.Factory.addGetterSetter(V,"strokeEnabled",!0);q.Factory.addGetterSetter(V,"shadowEnabled",!0);q.Factory.addGetterSetter(V,"dashEnabled",!0);q.Factory.addGetterSetter(V,"strokeScaleEnabled",!0);q.Factory.addGetterSetter(V,"fillPriority","color");q.Factory.addComponentsGetterSetter(V,"fillPatternOffset",["x","y"]);q.Factory.addGetterSetter(V,"fillPatternOffsetX",0,(0,wt.getNumberValidator)());q.Factory.addGetterSetter(V,"fillPatternOffsetY",0,(0,wt.getNumberValidator)());q.Factory.addComponentsGetterSetter(V,"fillPatternScale",["x","y"]);q.Factory.addGetterSetter(V,"fillPatternScaleX",1,(0,wt.getNumberValidator)());q.Factory.addGetterSetter(V,"fillPatternScaleY",1,(0,wt.getNumberValidator)());q.Factory.addComponentsGetterSetter(V,"fillLinearGradientStartPoint",["x","y"]);q.Factory.addComponentsGetterSetter(V,"strokeLinearGradientStartPoint",["x","y"]);q.Factory.addGetterSetter(V,"fillLinearGradientStartPointX",0);q.Factory.addGetterSetter(V,"strokeLinearGradientStartPointX",0);q.Factory.addGetterSetter(V,"fillLinearGradientStartPointY",0);q.Factory.addGetterSetter(V,"strokeLinearGradientStartPointY",0);q.Factory.addComponentsGetterSetter(V,"fillLinearGradientEndPoint",["x","y"]);q.Factory.addComponentsGetterSetter(V,"strokeLinearGradientEndPoint",["x","y"]);q.Factory.addGetterSetter(V,"fillLinearGradientEndPointX",0);q.Factory.addGetterSetter(V,"strokeLinearGradientEndPointX",0);q.Factory.addGetterSetter(V,"fillLinearGradientEndPointY",0);q.Factory.addGetterSetter(V,"strokeLinearGradientEndPointY",0);q.Factory.addComponentsGetterSetter(V,"fillRadialGradientStartPoint",["x","y"]);q.Factory.addGetterSetter(V,"fillRadialGradientStartPointX",0);q.Factory.addGetterSetter(V,"fillRadialGradientStartPointY",0);q.Factory.addComponentsGetterSetter(V,"fillRadialGradientEndPoint",["x","y"]);q.Factory.addGetterSetter(V,"fillRadialGradientEndPointX",0);q.Factory.addGetterSetter(V,"fillRadialGradientEndPointY",0);q.Factory.addGetterSetter(V,"fillPatternRotation",0);q.Factory.addGetterSetter(V,"fillRule",void 0,(0,wt.getStringValidator)());q.Factory.backCompat(V,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})});var r1=Y(Rl=>{"use strict";Object.defineProperty(Rl,"__esModule",{value:!0});Rl.Layer=void 0;var yr=st(),t1=na(),No=lt(),n1=me(),o5=Js(),tx=be(),nx=Et(),rx=_e(),ix="#",ox="beforeDraw",sx="draw",s5=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],ax=s5.length,zr=class extends t1.Container{constructor(e){super(e),this.canvas=new o5.SceneCanvas,this.hitCanvas=new o5.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(e){return this.getContext().clear(e),this.getHitCanvas().getContext().clear(e),this}setZIndex(e){super.setZIndex(e);var n=this.getStage();return n&&n.content&&(n.content.removeChild(this.getNativeCanvasElement()),e<n.children.length-1?n.content.insertBefore(this.getNativeCanvasElement(),n.children[e+1].getCanvas()._canvas):n.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){No.Node.prototype.moveToTop.call(this);var e=this.getStage();return e&&e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){var e=No.Node.prototype.moveUp.call(this);if(!e)return!1;var n=this.getStage();return!n||!n.content?!1:(n.content.removeChild(this.getNativeCanvasElement()),this.index<n.children.length-1?n.content.insertBefore(this.getNativeCanvasElement(),n.children[this.index+1].getCanvas()._canvas):n.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(No.Node.prototype.moveDown.call(this)){var e=this.getStage();if(e){var n=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),n[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(No.Node.prototype.moveToBottom.call(this)){var e=this.getStage();if(e){var n=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),n[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){var e=this.getNativeCanvasElement();return No.Node.prototype.remove.call(this),e&&e.parentNode&&yr.Util._isInDocument(e)&&e.parentNode.removeChild(e),this}getStage(){return this.parent}setSize({width:e,height:n}){return this.canvas.setSize(e,n),this.hitCanvas.setSize(e,n),this._setSmoothEnabled(),this}_validateAdd(e){var n=e.getType();n!=="Group"&&n!=="Shape"&&yr.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(e){return e=e||{},e.width=e.width||this.getWidth(),e.height=e.height||this.getHeight(),e.x=e.x!==void 0?e.x:this.x(),e.y=e.y!==void 0?e.y:this.y(),No.Node.prototype._toKonvaCanvas.call(this,e)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){yr.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){yr.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,yr.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(e){if(!this.isListening()||!this.isVisible())return null;for(var n=1,r=!1;;){for(let i=0;i<ax;i++){let o=s5[i],s=this._getIntersection({x:e.x+o.x*n,y:e.y+o.y*n}),a=s.shape;if(a)return a;if(r=!!s.antialiased,!s.antialiased)break}if(r)n+=1;else return null}}_getIntersection(e){let n=this.hitCanvas.pixelRatio,r=this.hitCanvas.context.getImageData(Math.round(e.x*n),Math.round(e.y*n),1,1).data,i=r[3];if(i===255){let o=yr.Util._rgbToHex(r[0],r[1],r[2]),s=nx.shapes[ix+o];return s?{shape:s}:{antialiased:!0}}else if(i>0)return{antialiased:!0};return{}}drawScene(e,n){var r=this.getLayer(),i=e||r&&r.getCanvas();return this._fire(ox,{node:this}),this.clearBeforeDraw()&&i.getContext().clear(),t1.Container.prototype.drawScene.call(this,i,n),this._fire(sx,{node:this}),this}drawHit(e,n){var r=this.getLayer(),i=e||r&&r.hitCanvas;return r&&r.clearBeforeDraw()&&r.getHitCanvas().getContext().clear(),t1.Container.prototype.drawHit.call(this,i,n),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(e){yr.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(e)}getHitGraphEnabled(e){return yr.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!(!this.parent||!this.parent.content)){var e=this.parent,n=!!this.hitCanvas._canvas.parentNode;n?e.content.removeChild(this.hitCanvas._canvas):e.content.appendChild(this.hitCanvas._canvas)}}destroy(){return yr.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}};Rl.Layer=zr;zr.prototype.nodeType="Layer";(0,rx._registerNode)(zr);n1.Factory.addGetterSetter(zr,"imageSmoothingEnabled",!0);n1.Factory.addGetterSetter(zr,"clearBeforeDraw",!0);n1.Factory.addGetterSetter(zr,"hitGraphEnabled",!0,(0,tx.getBooleanValidator)())});var a5=Y(Pl=>{"use strict";Object.defineProperty(Pl,"__esModule",{value:!0});Pl.FastLayer=void 0;var cx=st(),lx=r1(),ux=_e(),ca=class extends lx.Layer{constructor(e){super(e),this.listening(!1),cx.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}};Pl.FastLayer=ca;ca.prototype.nodeType="FastLayer";(0,ux._registerNode)(ca)});var Fl=Y(Nl=>{"use strict";Object.defineProperty(Nl,"__esModule",{value:!0});Nl.Group=void 0;var dx=st(),fx=na(),hx=_e(),la=class extends fx.Container{_validateAdd(e){var n=e.getType();n!=="Group"&&n!=="Shape"&&dx.Util.throw("You may only add groups and shapes to groups.")}};Nl.Group=la;la.prototype.nodeType="Group";(0,hx._registerNode)(la)});var Ll=Y(kl=>{"use strict";Object.defineProperty(kl,"__esModule",{value:!0});kl.Animation=void 0;var i1=_e(),c5=st(),o1=function(){return i1.glob.performance&&i1.glob.performance.now?function(){return i1.glob.performance.now()}:function(){return new Date().getTime()}}(),Fo=class t{constructor(e,n){this.id=t.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:o1(),frameRate:0},this.func=e,this.setLayers(n)}setLayers(e){let n=[];return e&&(n=Array.isArray(e)?e:[e]),this.layers=n,this}getLayers(){return this.layers}addLayer(e){let n=this.layers,r=n.length;for(let i=0;i<r;i++)if(n[i]._id===e._id)return!1;return this.layers.push(e),!0}isRunning(){let n=t.animations,r=n.length;for(let i=0;i<r;i++)if(n[i].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=o1(),t._addAnimation(this),this}stop(){return t._removeAnimation(this),this}_updateFrameObject(e){this.frame.timeDiff=e-this.frame.lastTime,this.frame.lastTime=e,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(e){this.animations.push(e),this._handleAnimation()}static _removeAnimation(e){let n=e.id,r=this.animations,i=r.length;for(let o=0;o<i;o++)if(r[o].id===n){this.animations.splice(o,1);break}}static _runFrames(){let e={},n=this.animations;for(let r=0;r<n.length;r++){let i=n[r],o=i.layers,s=i.func;i._updateFrameObject(o1());let a=o.length,c;if(s?c=s.call(i,i.frame)!==!1:c=!0,!!c)for(let l=0;l<a;l++){let u=o[l];u._id!==void 0&&(e[u._id]=u)}}for(let r in e)e.hasOwnProperty(r)&&e[r].batchDraw()}static _animationLoop(){let e=t;e.animations.length?(e._runFrames(),c5.Util.requestAnimFrame(e._animationLoop)):e.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,c5.Util.requestAnimFrame(this._animationLoop))}};kl.Animation=Fo;Fo.animations=[];Fo.animIdCounter=0;Fo.animRunning=!1});var f5=Y(Qn=>{"use strict";Object.defineProperty(Qn,"__esModule",{value:!0});Qn.Easings=Qn.Tween=void 0;var Cr=st(),px=Ll(),gx=lt(),mx=_e(),vx={node:1,duration:1,easing:1,onFinish:1,yoyo:1},yx=1,l5=2,u5=3,Cx=0,d5=["fill","stroke","shadowColor"],s1=class{constructor(e,n,r,i,o,s,a){this.prop=e,this.propFunc=n,this.begin=i,this._pos=i,this.duration=s,this._change=0,this.prevPos=0,this.yoyo=a,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=r,this._change=o-this.begin,this.pause()}fire(e){var n=this[e];n&&n()}setTime(e){e>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():e<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=e,this.update())}getTime(){return this._time}setPosition(e){this.prevPos=this._pos,this.propFunc(e),this._pos=e}getPosition(e){return e===void 0&&(e=this._time),this.func(e,this.begin,this._change,this.duration)}play(){this.state=l5,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=u5,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(e){this.pause(),this._time=e,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){var e=this.getTimer()-this._startTime;this.state===l5?this.setTime(e):this.state===u5&&this.setTime(this.duration-e)}pause(){this.state=yx,this.fire("onPause")}getTimer(){return new Date().getTime()}},ko=class t{constructor(e){var n=this,r=e.node,i=r._id,o,s=e.easing||Qn.Easings.Linear,a=!!e.yoyo,c;typeof e.duration>"u"?o=.3:e.duration===0?o=.001:o=e.duration,this.node=r,this._id=Cx++;var l=r.getLayer()||(r instanceof mx.Konva.Stage?r.getLayers():null);l||Cr.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new px.Animation(function(){n.tween.onEnterFrame()},l),this.tween=new s1(c,function(u){n._tweenFunc(u)},s,0,1,o*1e3,a),this._addListeners(),t.attrs[i]||(t.attrs[i]={}),t.attrs[i][this._id]||(t.attrs[i][this._id]={}),t.tweens[i]||(t.tweens[i]={});for(c in e)vx[c]===void 0&&this._addAttr(c,e[c]);this.reset(),this.onFinish=e.onFinish,this.onReset=e.onReset,this.onUpdate=e.onUpdate}_addAttr(e,n){var r=this.node,i=r._id,o,s,a,c,l,u,f,d;if(a=t.tweens[i][e],a&&delete t.attrs[i][a][e],o=r.getAttr(e),Cr.Util._isArray(n))if(s=[],l=Math.max(n.length,o.length),e==="points"&&n.length!==o.length&&(n.length>o.length?(f=o,o=Cr.Util._prepareArrayForTween(o,n,r.closed())):(u=n,n=Cr.Util._prepareArrayForTween(n,o,r.closed()))),e.indexOf("fill")===0)for(c=0;c<l;c++)if(c%2===0)s.push(n[c]-o[c]);else{var h=Cr.Util.colorToRGBA(o[c]);d=Cr.Util.colorToRGBA(n[c]),o[c]=h,s.push({r:d.r-h.r,g:d.g-h.g,b:d.b-h.b,a:d.a-h.a})}else for(c=0;c<l;c++)s.push(n[c]-o[c]);else d5.indexOf(e)!==-1?(o=Cr.Util.colorToRGBA(o),d=Cr.Util.colorToRGBA(n),s={r:d.r-o.r,g:d.g-o.g,b:d.b-o.b,a:d.a-o.a}):s=n-o;t.attrs[i][this._id][e]={start:o,diff:s,end:n,trueEnd:u,trueStart:f},t.tweens[i][e]=this._id}_tweenFunc(e){var n=this.node,r=t.attrs[n._id][this._id],i,o,s,a,c,l,u,f;for(i in r){if(o=r[i],s=o.start,a=o.diff,f=o.end,Cr.Util._isArray(s))if(c=[],u=Math.max(s.length,f.length),i.indexOf("fill")===0)for(l=0;l<u;l++)l%2===0?c.push((s[l]||0)+a[l]*e):c.push("rgba("+Math.round(s[l].r+a[l].r*e)+","+Math.round(s[l].g+a[l].g*e)+","+Math.round(s[l].b+a[l].b*e)+","+(s[l].a+a[l].a*e)+")");else for(l=0;l<u;l++)c.push((s[l]||0)+a[l]*e);else d5.indexOf(i)!==-1?c="rgba("+Math.round(s.r+a.r*e)+","+Math.round(s.g+a.g*e)+","+Math.round(s.b+a.b*e)+","+(s.a+a.a*e)+")":c=s+a*e;n.setAttr(i,c)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{var e=this.node,n=t.attrs[e._id][this._id];n.points&&n.points.trueEnd&&e.setAttr("points",n.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{var e=this.node,n=t.attrs[e._id][this._id];n.points&&n.points.trueStart&&e.points(n.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(e){return this.tween.seek(e*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){var e=this.node._id,n=this._id,r=t.tweens[e],i;this.pause();for(i in r)delete t.tweens[e][i];delete t.attrs[e][n]}};Qn.Tween=ko;ko.attrs={};ko.tweens={};gx.Node.prototype.to=function(t){var e=t.onFinish;t.node=this,t.onFinish=function(){this.destroy(),e&&e()};var n=new ko(t);n.play()};Qn.Easings={BackEaseIn(t,e,n,r){var i=1.70158;return n*(t/=r)*t*((i+1)*t-i)+e},BackEaseOut(t,e,n,r){var i=1.70158;return n*((t=t/r-1)*t*((i+1)*t+i)+1)+e},BackEaseInOut(t,e,n,r){var i=1.70158;return(t/=r/2)<1?n/2*(t*t*(((i*=1.525)+1)*t-i))+e:n/2*((t-=2)*t*(((i*=1.525)+1)*t+i)+2)+e},ElasticEaseIn(t,e,n,r,i,o){var s=0;return t===0?e:(t/=r)===1?e+n:(o||(o=r*.3),!i||i<Math.abs(n)?(i=n,s=o/4):s=o/(2*Math.PI)*Math.asin(n/i),-(i*Math.pow(2,10*(t-=1))*Math.sin((t*r-s)*(2*Math.PI)/o))+e)},ElasticEaseOut(t,e,n,r,i,o){var s=0;return t===0?e:(t/=r)===1?e+n:(o||(o=r*.3),!i||i<Math.abs(n)?(i=n,s=o/4):s=o/(2*Math.PI)*Math.asin(n/i),i*Math.pow(2,-10*t)*Math.sin((t*r-s)*(2*Math.PI)/o)+n+e)},ElasticEaseInOut(t,e,n,r,i,o){var s=0;return t===0?e:(t/=r/2)===2?e+n:(o||(o=r*(.3*1.5)),!i||i<Math.abs(n)?(i=n,s=o/4):s=o/(2*Math.PI)*Math.asin(n/i),t<1?-.5*(i*Math.pow(2,10*(t-=1))*Math.sin((t*r-s)*(2*Math.PI)/o))+e:i*Math.pow(2,-10*(t-=1))*Math.sin((t*r-s)*(2*Math.PI)/o)*.5+n+e)},BounceEaseOut(t,e,n,r){return(t/=r)<1/2.75?n*(7.5625*t*t)+e:t<2/2.75?n*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?n*(7.5625*(t-=2.25/2.75)*t+.9375)+e:n*(7.5625*(t-=2.625/2.75)*t+.984375)+e},BounceEaseIn(t,e,n,r){return n-Qn.Easings.BounceEaseOut(r-t,0,n,r)+e},BounceEaseInOut(t,e,n,r){return t<r/2?Qn.Easings.BounceEaseIn(t*2,0,n,r)*.5+e:Qn.Easings.BounceEaseOut(t*2-r,0,n,r)*.5+n*.5+e},EaseIn(t,e,n,r){return n*(t/=r)*t+e},EaseOut(t,e,n,r){return-n*(t/=r)*(t-2)+e},EaseInOut(t,e,n,r){return(t/=r/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e},StrongEaseIn(t,e,n,r){return n*(t/=r)*t*t*t*t+e},StrongEaseOut(t,e,n,r){return n*((t=t/r-1)*t*t*t*t+1)+e},StrongEaseInOut(t,e,n,r){return(t/=r/2)<1?n/2*t*t*t*t*t+e:n/2*((t-=2)*t*t*t*t+2)+e},Linear(t,e,n,r){return n*t/r+e}}});var m5=Y(Lo=>{"use strict";Object.defineProperty(Lo,"__esModule",{value:!0});Lo.Konva=void 0;var _x=_e(),a1=st(),bx=lt(),wx=na(),h5=Q4(),Sx=r1(),Dx=a5(),Ex=Fl(),xx=Cl(),p5=Et(),Ix=Ll(),g5=f5(),Mx=Bp(),Tx=Js();Lo.Konva=a1.Util._assign(_x.Konva,{Util:a1.Util,Transform:a1.Transform,Node:bx.Node,Container:wx.Container,Stage:h5.Stage,stages:h5.stages,Layer:Sx.Layer,FastLayer:Dx.FastLayer,Group:Ex.Group,DD:xx.DD,Shape:p5.Shape,shapes:p5.shapes,Animation:Ix.Animation,Tween:g5.Tween,Easings:g5.Easings,Context:Mx.Context,Canvas:Tx.Canvas});Lo.default=Lo.Konva});var y5=Y(Ul=>{"use strict";Object.defineProperty(Ul,"__esModule",{value:!0});Ul.Arc=void 0;var Vl=me(),Ax=Et(),v5=_e(),jl=be(),Ox=_e(),Mn=class extends Ax.Shape{_sceneFunc(e){var n=v5.Konva.getAngle(this.angle()),r=this.clockwise();e.beginPath(),e.arc(0,0,this.outerRadius(),0,n,r),e.arc(0,0,this.innerRadius(),n,0,!r),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}getSelfRect(){let e=this.innerRadius(),n=this.outerRadius(),r=this.clockwise(),i=v5.Konva.getAngle(r?360-this.angle():this.angle()),o=Math.cos(Math.min(i,Math.PI)),s=1,a=Math.sin(Math.min(Math.max(Math.PI,i),3*Math.PI/2)),c=Math.sin(Math.min(i,Math.PI/2)),l=o*(o>0?e:n),u=s*(s>0?n:e),f=a*(a>0?e:n),d=c*(c>0?n:e);return{x:l,y:r?-1*d:f,width:u-l,height:d-f}}};Ul.Arc=Mn;Mn.prototype._centroid=!0;Mn.prototype.className="Arc";Mn.prototype._attrsAffectingSize=["innerRadius","outerRadius"];(0,Ox._registerNode)(Mn);Vl.Factory.addGetterSetter(Mn,"innerRadius",0,(0,jl.getNumberValidator)());Vl.Factory.addGetterSetter(Mn,"outerRadius",0,(0,jl.getNumberValidator)());Vl.Factory.addGetterSetter(Mn,"angle",0,(0,jl.getNumberValidator)());Vl.Factory.addGetterSetter(Mn,"clockwise",!1,(0,jl.getBooleanValidator)())});var l1=Y($l=>{"use strict";Object.defineProperty($l,"__esModule",{value:!0});$l.Line=void 0;var Bl=me(),Rx=Et(),_5=be(),Px=_e();function c1(t,e,n,r,i,o,s){var a=Math.sqrt(Math.pow(n-t,2)+Math.pow(r-e,2)),c=Math.sqrt(Math.pow(i-n,2)+Math.pow(o-r,2)),l=s*a/(a+c),u=s*c/(a+c),f=n-l*(i-t),d=r-l*(o-e),h=n+u*(i-t),g=r+u*(o-e);return[f,d,h,g]}function C5(t,e){var n=t.length,r=[],i,o;for(i=2;i<n-2;i+=2)o=c1(t[i-2],t[i-1],t[i],t[i+1],t[i+2],t[i+3],e),!isNaN(o[0])&&(r.push(o[0]),r.push(o[1]),r.push(t[i]),r.push(t[i+1]),r.push(o[2]),r.push(o[3]));return r}var Jn=class extends Rx.Shape{constructor(e){super(e),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(e){var n=this.points(),r=n.length,i=this.tension(),o=this.closed(),s=this.bezier(),a,c,l;if(r){if(e.beginPath(),e.moveTo(n[0],n[1]),i!==0&&r>4){for(a=this.getTensionPoints(),c=a.length,l=o?0:4,o||e.quadraticCurveTo(a[0],a[1],a[2],a[3]);l<c-2;)e.bezierCurveTo(a[l++],a[l++],a[l++],a[l++],a[l++],a[l++]);o||e.quadraticCurveTo(a[c-2],a[c-1],n[r-2],n[r-1])}else if(s)for(l=2;l<r;)e.bezierCurveTo(n[l++],n[l++],n[l++],n[l++],n[l++],n[l++]);else for(l=2;l<r;l+=2)e.lineTo(n[l],n[l+1]);o?(e.closePath(),e.fillStrokeShape(this)):e.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():C5(this.points(),this.tension())}_getTensionPointsClosed(){var e=this.points(),n=e.length,r=this.tension(),i=c1(e[n-2],e[n-1],e[0],e[1],e[2],e[3],r),o=c1(e[n-4],e[n-3],e[n-2],e[n-1],e[0],e[1],r),s=C5(e,r),a=[i[2],i[3]].concat(s).concat([o[0],o[1],e[n-2],e[n-1],o[2],o[3],i[0],i[1],e[0],e[1]]);return a}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){var e=this.points();if(e.length<4)return{x:e[0]||0,y:e[1]||0,width:0,height:0};this.tension()!==0?e=[e[0],e[1],...this._getTensionPoints(),e[e.length-2],e[e.length-1]]:e=this.points();for(var n=e[0],r=e[0],i=e[1],o=e[1],s,a,c=0;c<e.length/2;c++)s=e[c*2],a=e[c*2+1],n=Math.min(n,s),r=Math.max(r,s),i=Math.min(i,a),o=Math.max(o,a);return{x:n,y:i,width:r-n,height:o-i}}};$l.Line=Jn;Jn.prototype.className="Line";Jn.prototype._attrsAffectingSize=["points","bezier","tension"];(0,Px._registerNode)(Jn);Bl.Factory.addGetterSetter(Jn,"closed",!1);Bl.Factory.addGetterSetter(Jn,"bezier",!1);Bl.Factory.addGetterSetter(Jn,"tension",0,(0,_5.getNumberValidator)());Bl.Factory.addGetterSetter(Jn,"points",[],(0,_5.getNumberArrayValidator)())});var b5=Y(Nt=>{"use strict";Object.defineProperty(Nt,"__esModule",{value:!0});Nt.t2length=Nt.getQuadraticArcLength=Nt.getCubicArcLength=Nt.binomialCoefficients=Nt.cValues=Nt.tValues=void 0;Nt.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]];Nt.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]];Nt.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];var Nx=(t,e,n)=>{let r,i,o;r=n/2,i=0;for(let a=0;a<20;a++)o=r*Nt.tValues[20][a]+r,i+=Nt.cValues[20][a]*kx(t,e,o);return r*i};Nt.getCubicArcLength=Nx;var Fx=(t,e,n)=>{n===void 0&&(n=1);let r=t[0]-2*t[1]+t[2],i=e[0]-2*e[1]+e[2],o=2*t[1]-2*t[0],s=2*e[1]-2*e[0],a=4*(r*r+i*i),c=4*(r*o+i*s),l=o*o+s*s;if(a===0)return n*Math.sqrt(Math.pow(t[2]-t[0],2)+Math.pow(e[2]-e[0],2));let u=c/(2*a),f=l/a,d=n+u,h=f-u*u,g=d*d+h>0?Math.sqrt(d*d+h):0,v=u*u+h>0?Math.sqrt(u*u+h):0,b=u+Math.sqrt(u*u+h)!==0?h*Math.log(Math.abs((d+g)/(u+v))):0;return Math.sqrt(a)/2*(d*g-u*v+b)};Nt.getQuadraticArcLength=Fx;function kx(t,e,n){let r=u1(1,n,t),i=u1(1,n,e),o=r*r+i*i;return Math.sqrt(o)}var u1=(t,e,n)=>{let r=n.length-1,i,o;if(r===0)return 0;if(t===0){o=0;for(let s=0;s<=r;s++)o+=Nt.binomialCoefficients[r][s]*Math.pow(1-e,r-s)*Math.pow(e,s)*n[s];return o}else{i=new Array(r);for(let s=0;s<r;s++)i[s]=r*(n[s+1]-n[s]);return u1(t-1,e,i)}},Lx=(t,e,n)=>{let r=1,i=t/e,o=(t-n(i))/e,s=0;for(;r>.001;){let a=n(i+o),c=Math.abs(t-a)/e;if(c<r)r=c,i+=o;else{let l=n(i-o),u=Math.abs(t-l)/e;u<r?(r=u,i-=o):o/=2}if(s++,s>500)break}return i};Nt.t2length=Lx});var Gl=Y(Hl=>{"use strict";Object.defineProperty(Hl,"__esModule",{value:!0});Hl.Path=void 0;var Vx=me(),jx=Et(),Ux=_e(),Vo=b5(),Si=class t extends jx.Shape{constructor(e){super(e),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=t.parsePathData(this.data()),this.pathLength=t.getPathLength(this.dataArray)}_sceneFunc(e){var n=this.dataArray;e.beginPath();for(var r=!1,i=0;i<n.length;i++){var o=n[i].command,s=n[i].points;switch(o){case"L":e.lineTo(s[0],s[1]);break;case"M":e.moveTo(s[0],s[1]);break;case"C":e.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5]);break;case"Q":e.quadraticCurveTo(s[0],s[1],s[2],s[3]);break;case"A":var a=s[0],c=s[1],l=s[2],u=s[3],f=s[4],d=s[5],h=s[6],g=s[7],v=l>u?l:u,b=l>u?1:l/u,D=l>u?u/l:1;e.translate(a,c),e.rotate(h),e.scale(b,D),e.arc(0,0,v,f,f+d,1-g),e.scale(1/b,1/D),e.rotate(-h),e.translate(-a,-c);break;case"z":r=!0,e.closePath();break}}!r&&!this.hasFill()?e.strokeShape(this):e.fillStrokeShape(this)}getSelfRect(){var e=[];this.dataArray.forEach(function(l){if(l.command==="A"){var u=l.points[4],f=l.points[5],d=l.points[4]+f,h=Math.PI/180;if(Math.abs(u-d)<h&&(h=Math.abs(u-d)),f<0)for(let g=u-h;g>d;g-=h){let v=t.getPointOnEllipticalArc(l.points[0],l.points[1],l.points[2],l.points[3],g,0);e.push(v.x,v.y)}else for(let g=u+h;g<d;g+=h){let v=t.getPointOnEllipticalArc(l.points[0],l.points[1],l.points[2],l.points[3],g,0);e.push(v.x,v.y)}}else if(l.command==="C")for(let g=0;g<=1;g+=.01){let v=t.getPointOnCubicBezier(g,l.start.x,l.start.y,l.points[0],l.points[1],l.points[2],l.points[3],l.points[4],l.points[5]);e.push(v.x,v.y)}else e=e.concat(l.points)});for(var n=e[0],r=e[0],i=e[1],o=e[1],s,a,c=0;c<e.length/2;c++)s=e[c*2],a=e[c*2+1],isNaN(s)||(n=Math.min(n,s),r=Math.max(r,s)),isNaN(a)||(i=Math.min(i,a),o=Math.max(o,a));return{x:n,y:i,width:r-n,height:o-i}}getLength(){return this.pathLength}getPointAtLength(e){return t.getPointAtLengthOfDataArray(e,this.dataArray)}static getLineLength(e,n,r,i){return Math.sqrt((r-e)*(r-e)+(i-n)*(i-n))}static getPathLength(e){let n=0;for(var r=0;r<e.length;++r)n+=e[r].pathLength;return n}static getPointAtLengthOfDataArray(e,n){var r,i=0,o=n.length;if(!o)return null;for(;i<o&&e>n[i].pathLength;)e-=n[i].pathLength,++i;if(i===o)return r=n[i-1].points.slice(-2),{x:r[0],y:r[1]};if(e<.01)return r=n[i].points.slice(0,2),{x:r[0],y:r[1]};var s=n[i],a=s.points;switch(s.command){case"L":return t.getPointOnLine(e,s.start.x,s.start.y,a[0],a[1]);case"C":return t.getPointOnCubicBezier((0,Vo.t2length)(e,t.getPathLength(n),v=>(0,Vo.getCubicArcLength)([s.start.x,a[0],a[2],a[4]],[s.start.y,a[1],a[3],a[5]],v)),s.start.x,s.start.y,a[0],a[1],a[2],a[3],a[4],a[5]);case"Q":return t.getPointOnQuadraticBezier((0,Vo.t2length)(e,t.getPathLength(n),v=>(0,Vo.getQuadraticArcLength)([s.start.x,a[0],a[2]],[s.start.y,a[1],a[3]],v)),s.start.x,s.start.y,a[0],a[1],a[2],a[3]);case"A":var c=a[0],l=a[1],u=a[2],f=a[3],d=a[4],h=a[5],g=a[6];return d+=h*e/s.pathLength,t.getPointOnEllipticalArc(c,l,u,f,d,g)}return null}static getPointOnLine(e,n,r,i,o,s,a){s===void 0&&(s=n),a===void 0&&(a=r);var c=(o-r)/(i-n+1e-8),l=Math.sqrt(e*e/(1+c*c));i<n&&(l*=-1);var u=c*l,f;if(i===n)f={x:s,y:a+u};else if((a-r)/(s-n+1e-8)===c)f={x:s+l,y:a+u};else{var d,h,g=this.getLineLength(n,r,i,o),v=(s-n)*(i-n)+(a-r)*(o-r);v=v/(g*g),d=n+v*(i-n),h=r+v*(o-r);var b=this.getLineLength(s,a,d,h),D=Math.sqrt(e*e-b*b);l=Math.sqrt(D*D/(1+c*c)),i<n&&(l*=-1),u=c*l,f={x:d+l,y:h+u}}return f}static getPointOnCubicBezier(e,n,r,i,o,s,a,c,l){function u(b){return b*b*b}function f(b){return 3*b*b*(1-b)}function d(b){return 3*b*(1-b)*(1-b)}function h(b){return(1-b)*(1-b)*(1-b)}var g=c*u(e)+s*f(e)+i*d(e)+n*h(e),v=l*u(e)+a*f(e)+o*d(e)+r*h(e);return{x:g,y:v}}static getPointOnQuadraticBezier(e,n,r,i,o,s,a){function c(h){return h*h}function l(h){return 2*h*(1-h)}function u(h){return(1-h)*(1-h)}var f=s*c(e)+i*l(e)+n*u(e),d=a*c(e)+o*l(e)+r*u(e);return{x:f,y:d}}static getPointOnEllipticalArc(e,n,r,i,o,s){var a=Math.cos(s),c=Math.sin(s),l={x:r*Math.cos(o),y:i*Math.sin(o)};return{x:e+(l.x*a-l.y*c),y:n+(l.x*c+l.y*a)}}static parsePathData(e){if(!e)return[];var n=e,r=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];n=n.replace(new RegExp(" ","g"),",");for(var i=0;i<r.length;i++)n=n.replace(new RegExp(r[i],"g"),"|"+r[i]);var o=n.split("|"),s=[],a=[],c=0,l=0,u=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi,f;for(i=1;i<o.length;i++){var d=o[i],h=d.charAt(0);for(d=d.slice(1),a.length=0;f=u.exec(d);)a.push(f[0]);for(var g=[],v=0,b=a.length;v<b;v++){if(a[v]==="00"){g.push(0,0);continue}var D=parseFloat(a[v]);isNaN(D)?g.push(0):g.push(D)}for(;g.length>0&&!isNaN(g[0]);){var I="",E=[],O=c,U=l,S,k,R,j,B,$,ve,we,je,xt;switch(h){case"l":c+=g.shift(),l+=g.shift(),I="L",E.push(c,l);break;case"L":c=g.shift(),l=g.shift(),E.push(c,l);break;case"m":var Ue=g.shift(),ut=g.shift();if(c+=Ue,l+=ut,I="M",s.length>2&&s[s.length-1].command==="z"){for(var dt=s.length-2;dt>=0;dt--)if(s[dt].command==="M"){c=s[dt].points[0]+Ue,l=s[dt].points[1]+ut;break}}E.push(c,l),h="l";break;case"M":c=g.shift(),l=g.shift(),I="M",E.push(c,l),h="L";break;case"h":c+=g.shift(),I="L",E.push(c,l);break;case"H":c=g.shift(),I="L",E.push(c,l);break;case"v":l+=g.shift(),I="L",E.push(c,l);break;case"V":l=g.shift(),I="L",E.push(c,l);break;case"C":E.push(g.shift(),g.shift(),g.shift(),g.shift()),c=g.shift(),l=g.shift(),E.push(c,l);break;case"c":E.push(c+g.shift(),l+g.shift(),c+g.shift(),l+g.shift()),c+=g.shift(),l+=g.shift(),I="C",E.push(c,l);break;case"S":k=c,R=l,S=s[s.length-1],S.command==="C"&&(k=c+(c-S.points[2]),R=l+(l-S.points[3])),E.push(k,R,g.shift(),g.shift()),c=g.shift(),l=g.shift(),I="C",E.push(c,l);break;case"s":k=c,R=l,S=s[s.length-1],S.command==="C"&&(k=c+(c-S.points[2]),R=l+(l-S.points[3])),E.push(k,R,c+g.shift(),l+g.shift()),c+=g.shift(),l+=g.shift(),I="C",E.push(c,l);break;case"Q":E.push(g.shift(),g.shift()),c=g.shift(),l=g.shift(),E.push(c,l);break;case"q":E.push(c+g.shift(),l+g.shift()),c+=g.shift(),l+=g.shift(),I="Q",E.push(c,l);break;case"T":k=c,R=l,S=s[s.length-1],S.command==="Q"&&(k=c+(c-S.points[0]),R=l+(l-S.points[1])),c=g.shift(),l=g.shift(),I="Q",E.push(k,R,c,l);break;case"t":k=c,R=l,S=s[s.length-1],S.command==="Q"&&(k=c+(c-S.points[0]),R=l+(l-S.points[1])),c+=g.shift(),l+=g.shift(),I="Q",E.push(k,R,c,l);break;case"A":j=g.shift(),B=g.shift(),$=g.shift(),ve=g.shift(),we=g.shift(),je=c,xt=l,c=g.shift(),l=g.shift(),I="A",E=this.convertEndpointToCenterParameterization(je,xt,c,l,ve,we,j,B,$);break;case"a":j=g.shift(),B=g.shift(),$=g.shift(),ve=g.shift(),we=g.shift(),je=c,xt=l,c+=g.shift(),l+=g.shift(),I="A",E=this.convertEndpointToCenterParameterization(je,xt,c,l,ve,we,j,B,$);break}s.push({command:I||h,points:E,start:{x:O,y:U},pathLength:this.calcLength(O,U,I||h,E)})}(h==="z"||h==="Z")&&s.push({command:"z",points:[],start:void 0,pathLength:0})}return s}static calcLength(e,n,r,i){var o,s,a,c,l=t;switch(r){case"L":return l.getLineLength(e,n,i[0],i[1]);case"C":return(0,Vo.getCubicArcLength)([e,i[0],i[2],i[4]],[n,i[1],i[3],i[5]],1);case"Q":return(0,Vo.getQuadraticArcLength)([e,i[0],i[2]],[n,i[1],i[3]],1);case"A":o=0;var u=i[4],f=i[5],d=i[4]+f,h=Math.PI/180;if(Math.abs(u-d)<h&&(h=Math.abs(u-d)),s=l.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],u,0),f<0)for(c=u-h;c>d;c-=h)a=l.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],c,0),o+=l.getLineLength(s.x,s.y,a.x,a.y),s=a;else for(c=u+h;c<d;c+=h)a=l.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],c,0),o+=l.getLineLength(s.x,s.y,a.x,a.y),s=a;return a=l.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],d,0),o+=l.getLineLength(s.x,s.y,a.x,a.y),o}return 0}static convertEndpointToCenterParameterization(e,n,r,i,o,s,a,c,l){var u=l*(Math.PI/180),f=Math.cos(u)*(e-r)/2+Math.sin(u)*(n-i)/2,d=-1*Math.sin(u)*(e-r)/2+Math.cos(u)*(n-i)/2,h=f*f/(a*a)+d*d/(c*c);h>1&&(a*=Math.sqrt(h),c*=Math.sqrt(h));var g=Math.sqrt((a*a*(c*c)-a*a*(d*d)-c*c*(f*f))/(a*a*(d*d)+c*c*(f*f)));o===s&&(g*=-1),isNaN(g)&&(g=0);var v=g*a*d/c,b=g*-c*f/a,D=(e+r)/2+Math.cos(u)*v-Math.sin(u)*b,I=(n+i)/2+Math.sin(u)*v+Math.cos(u)*b,E=function(B){return Math.sqrt(B[0]*B[0]+B[1]*B[1])},O=function(B,$){return(B[0]*$[0]+B[1]*$[1])/(E(B)*E($))},U=function(B,$){return(B[0]*$[1]<B[1]*$[0]?-1:1)*Math.acos(O(B,$))},S=U([1,0],[(f-v)/a,(d-b)/c]),k=[(f-v)/a,(d-b)/c],R=[(-1*f-v)/a,(-1*d-b)/c],j=U(k,R);return O(k,R)<=-1&&(j=Math.PI),O(k,R)>=1&&(j=0),s===0&&j>0&&(j=j-2*Math.PI),s===1&&j<0&&(j=j+2*Math.PI),[D,I,a,c,S,j,u,s]}};Hl.Path=Si;Si.prototype.className="Path";Si.prototype._attrsAffectingSize=["data"];(0,Ux._registerNode)(Si);Vx.Factory.addGetterSetter(Si,"data")});var D5=Y(ql=>{"use strict";Object.defineProperty(ql,"__esModule",{value:!0});ql.Arrow=void 0;var zl=me(),Bx=l1(),S5=be(),$x=_e(),w5=Gl(),_r=class extends Bx.Line{_sceneFunc(e){super._sceneFunc(e);var n=Math.PI*2,r=this.points(),i=r,o=this.tension()!==0&&r.length>4;o&&(i=this.getTensionPoints());var s=this.pointerLength(),a=r.length,c,l;if(o){let d=[i[i.length-4],i[i.length-3],i[i.length-2],i[i.length-1],r[a-2],r[a-1]],h=w5.Path.calcLength(i[i.length-4],i[i.length-3],"C",d),g=w5.Path.getPointOnQuadraticBezier(Math.min(1,1-s/h),d[0],d[1],d[2],d[3],d[4],d[5]);c=r[a-2]-g.x,l=r[a-1]-g.y}else c=r[a-2]-r[a-4],l=r[a-1]-r[a-3];var u=(Math.atan2(l,c)+n)%n,f=this.pointerWidth();this.pointerAtEnding()&&(e.save(),e.beginPath(),e.translate(r[a-2],r[a-1]),e.rotate(u),e.moveTo(0,0),e.lineTo(-s,f/2),e.lineTo(-s,-f/2),e.closePath(),e.restore(),this.__fillStroke(e)),this.pointerAtBeginning()&&(e.save(),e.beginPath(),e.translate(r[0],r[1]),o?(c=(i[0]+i[2])/2-r[0],l=(i[1]+i[3])/2-r[1]):(c=r[2]-r[0],l=r[3]-r[1]),e.rotate((Math.atan2(-l,-c)+n)%n),e.moveTo(0,0),e.lineTo(-s,f/2),e.lineTo(-s,-f/2),e.closePath(),e.restore(),this.__fillStroke(e))}__fillStroke(e){var n=this.dashEnabled();n&&(this.attrs.dashEnabled=!1,e.setLineDash([])),e.fillStrokeShape(this),n&&(this.attrs.dashEnabled=!0)}getSelfRect(){let e=super.getSelfRect(),n=this.pointerWidth()/2;return{x:e.x-n,y:e.y-n,width:e.width+n*2,height:e.height+n*2}}};ql.Arrow=_r;_r.prototype.className="Arrow";(0,$x._registerNode)(_r);zl.Factory.addGetterSetter(_r,"pointerLength",10,(0,S5.getNumberValidator)());zl.Factory.addGetterSetter(_r,"pointerWidth",10,(0,S5.getNumberValidator)());zl.Factory.addGetterSetter(_r,"pointerAtBeginning",!1);zl.Factory.addGetterSetter(_r,"pointerAtEnding",!0)});var E5=Y(Wl=>{"use strict";Object.defineProperty(Wl,"__esModule",{value:!0});Wl.Circle=void 0;var Hx=me(),Gx=Et(),zx=be(),qx=_e(),qr=class extends Gx.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius()!==e/2&&this.radius(e/2)}setHeight(e){this.radius()!==e/2&&this.radius(e/2)}};Wl.Circle=qr;qr.prototype._centroid=!0;qr.prototype.className="Circle";qr.prototype._attrsAffectingSize=["radius"];(0,qx._registerNode)(qr);Hx.Factory.addGetterSetter(qr,"radius",0,(0,zx.getNumberValidator)())});var I5=Y(Yl=>{"use strict";Object.defineProperty(Yl,"__esModule",{value:!0});Yl.Ellipse=void 0;var d1=me(),Wx=Et(),x5=be(),Yx=_e(),er=class extends Wx.Shape{_sceneFunc(e){var n=this.radiusX(),r=this.radiusY();e.beginPath(),e.save(),n!==r&&e.scale(1,r/n),e.arc(0,0,n,0,Math.PI*2,!1),e.restore(),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(e){this.radiusX(e/2)}setHeight(e){this.radiusY(e/2)}};Yl.Ellipse=er;er.prototype.className="Ellipse";er.prototype._centroid=!0;er.prototype._attrsAffectingSize=["radiusX","radiusY"];(0,Yx._registerNode)(er);d1.Factory.addComponentsGetterSetter(er,"radius",["x","y"]);d1.Factory.addGetterSetter(er,"radiusX",0,(0,x5.getNumberValidator)());d1.Factory.addGetterSetter(er,"radiusY",0,(0,x5.getNumberValidator)())});var M5=Y(Kl=>{"use strict";Object.defineProperty(Kl,"__esModule",{value:!0});Kl.Image=void 0;var f1=st(),Di=me(),Kx=Et(),Xx=_e(),ua=be(),hn=class t extends Kx.Shape{constructor(e){super(e),this.on("imageChange.konva",()=>{this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){let e=this.image();e&&e.complete||e&&e.readyState===4||e&&e.addEventListener&&e.addEventListener("load",()=>{this._requestDraw()})}_useBufferCanvas(){return super._useBufferCanvas(!0)}_sceneFunc(e){let n=this.getWidth(),r=this.getHeight(),i=this.cornerRadius(),o=this.attrs.image,s;if(o){let a=this.attrs.cropWidth,c=this.attrs.cropHeight;a&&c?s=[o,this.cropX(),this.cropY(),a,c,0,0,n,r]:s=[o,0,0,n,r]}(this.hasFill()||this.hasStroke()||i)&&(e.beginPath(),i?f1.Util.drawRoundedRectPath(e,n,r,i):e.rect(0,0,n,r),e.closePath(),e.fillStrokeShape(this)),o&&(i&&e.clip(),e.drawImage.apply(e,s))}_hitFunc(e){var n=this.width(),r=this.height(),i=this.cornerRadius();e.beginPath(),i?f1.Util.drawRoundedRectPath(e,n,r,i):e.rect(0,0,n,r),e.closePath(),e.fillStrokeShape(this)}getWidth(){var e,n;return(e=this.attrs.width)!==null&&e!==void 0?e:(n=this.image())===null||n===void 0?void 0:n.width}getHeight(){var e,n;return(e=this.attrs.height)!==null&&e!==void 0?e:(n=this.image())===null||n===void 0?void 0:n.height}static fromURL(e,n,r=null){var i=f1.Util.createImageElement();i.onload=function(){var o=new t({image:i});n(o)},i.onerror=r,i.crossOrigin="Anonymous",i.src=e}};Kl.Image=hn;hn.prototype.className="Image";(0,Xx._registerNode)(hn);Di.Factory.addGetterSetter(hn,"cornerRadius",0,(0,ua.getNumberOrArrayOfNumbersValidator)(4));Di.Factory.addGetterSetter(hn,"image");Di.Factory.addComponentsGetterSetter(hn,"crop",["x","y","width","height"]);Di.Factory.addGetterSetter(hn,"cropX",0,(0,ua.getNumberValidator)());Di.Factory.addGetterSetter(hn,"cropY",0,(0,ua.getNumberValidator)());Di.Factory.addGetterSetter(hn,"cropWidth",0,(0,ua.getNumberValidator)());Di.Factory.addGetterSetter(hn,"cropHeight",0,(0,ua.getNumberValidator)())});var O5=Y(jo=>{"use strict";Object.defineProperty(jo,"__esModule",{value:!0});jo.Tag=jo.Label=void 0;var Xl=me(),Zx=Et(),Qx=Fl(),v1=be(),T5=_e(),A5=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],Jx="Change.konva",eI="none",h1="up",p1="right",g1="down",m1="left",tI=A5.length,da=class extends Qx.Group{constructor(e){super(e),this.on("add.konva",function(n){this._addListeners(n.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(e){var n=this,r,i=function(){n._sync()};for(r=0;r<tI;r++)e.on(A5[r]+Jx,i)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){var e=this.getText(),n=this.getTag(),r,i,o,s,a,c,l;if(e&&n){switch(r=e.width(),i=e.height(),o=n.pointerDirection(),s=n.pointerWidth(),l=n.pointerHeight(),a=0,c=0,o){case h1:a=r/2,c=-1*l;break;case p1:a=r+s,c=i/2;break;case g1:a=r/2,c=i+l;break;case m1:a=-1*s,c=i/2;break}n.setAttrs({x:-1*a,y:-1*c,width:r,height:i}),e.setAttrs({x:-1*a,y:-1*c})}}};jo.Label=da;da.prototype.className="Label";(0,T5._registerNode)(da);var br=class extends Zx.Shape{_sceneFunc(e){var n=this.width(),r=this.height(),i=this.pointerDirection(),o=this.pointerWidth(),s=this.pointerHeight(),a=this.cornerRadius();let c=0,l=0,u=0,f=0;typeof a=="number"?c=l=u=f=Math.min(a,n/2,r/2):(c=Math.min(a[0]||0,n/2,r/2),l=Math.min(a[1]||0,n/2,r/2),f=Math.min(a[2]||0,n/2,r/2),u=Math.min(a[3]||0,n/2,r/2)),e.beginPath(),e.moveTo(c,0),i===h1&&(e.lineTo((n-o)/2,0),e.lineTo(n/2,-1*s),e.lineTo((n+o)/2,0)),e.lineTo(n-l,0),e.arc(n-l,l,l,Math.PI*3/2,0,!1),i===p1&&(e.lineTo(n,(r-s)/2),e.lineTo(n+o,r/2),e.lineTo(n,(r+s)/2)),e.lineTo(n,r-f),e.arc(n-f,r-f,f,0,Math.PI/2,!1),i===g1&&(e.lineTo((n+o)/2,r),e.lineTo(n/2,r+s),e.lineTo((n-o)/2,r)),e.lineTo(u,r),e.arc(u,r-u,u,Math.PI/2,Math.PI,!1),i===m1&&(e.lineTo(0,(r+s)/2),e.lineTo(-1*o,r/2),e.lineTo(0,(r-s)/2)),e.lineTo(0,c),e.arc(c,c,c,Math.PI,Math.PI*3/2,!1),e.closePath(),e.fillStrokeShape(this)}getSelfRect(){var e=0,n=0,r=this.pointerWidth(),i=this.pointerHeight(),o=this.pointerDirection(),s=this.width(),a=this.height();return o===h1?(n-=i,a+=i):o===g1?a+=i:o===m1?(e-=r*1.5,s+=r):o===p1&&(s+=r*1.5),{x:e,y:n,width:s,height:a}}};jo.Tag=br;br.prototype.className="Tag";(0,T5._registerNode)(br);Xl.Factory.addGetterSetter(br,"pointerDirection",eI);Xl.Factory.addGetterSetter(br,"pointerWidth",0,(0,v1.getNumberValidator)());Xl.Factory.addGetterSetter(br,"pointerHeight",0,(0,v1.getNumberValidator)());Xl.Factory.addGetterSetter(br,"cornerRadius",0,(0,v1.getNumberOrArrayOfNumbersValidator)(4))});var y1=Y(Zl=>{"use strict";Object.defineProperty(Zl,"__esModule",{value:!0});Zl.Rect=void 0;var nI=me(),rI=Et(),iI=_e(),oI=st(),sI=be(),Uo=class extends rI.Shape{_sceneFunc(e){var n=this.cornerRadius(),r=this.width(),i=this.height();e.beginPath(),n?oI.Util.drawRoundedRectPath(e,r,i,n):e.rect(0,0,r,i),e.closePath(),e.fillStrokeShape(this)}};Zl.Rect=Uo;Uo.prototype.className="Rect";(0,iI._registerNode)(Uo);nI.Factory.addGetterSetter(Uo,"cornerRadius",0,(0,sI.getNumberOrArrayOfNumbersValidator)(4))});var N5=Y(Ql=>{"use strict";Object.defineProperty(Ql,"__esModule",{value:!0});Ql.RegularPolygon=void 0;var R5=me(),aI=Et(),P5=be(),cI=_e(),wr=class extends aI.Shape{_sceneFunc(e){let n=this._getPoints();e.beginPath(),e.moveTo(n[0].x,n[0].y);for(var r=1;r<n.length;r++)e.lineTo(n[r].x,n[r].y);e.closePath(),e.fillStrokeShape(this)}_getPoints(){let e=this.attrs.sides,n=this.attrs.radius||0,r=[];for(var i=0;i<e;i++)r.push({x:n*Math.sin(i*2*Math.PI/e),y:-1*n*Math.cos(i*2*Math.PI/e)});return r}getSelfRect(){let e=this._getPoints();var n=e[0].x,r=e[0].y,i=e[0].x,o=e[0].y;return e.forEach(s=>{n=Math.min(n,s.x),r=Math.max(r,s.x),i=Math.min(i,s.y),o=Math.max(o,s.y)}),{x:n,y:i,width:r-n,height:o-i}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}};Ql.RegularPolygon=wr;wr.prototype.className="RegularPolygon";wr.prototype._centroid=!0;wr.prototype._attrsAffectingSize=["radius"];(0,cI._registerNode)(wr);R5.Factory.addGetterSetter(wr,"radius",0,(0,P5.getNumberValidator)());R5.Factory.addGetterSetter(wr,"sides",0,(0,P5.getNumberValidator)())});var V5=Y(Jl=>{"use strict";Object.defineProperty(Jl,"__esModule",{value:!0});Jl.Ring=void 0;var k5=me(),lI=Et(),L5=be(),uI=_e(),F5=Math.PI*2,Sr=class extends lI.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.innerRadius(),0,F5,!1),e.moveTo(this.outerRadius(),0),e.arc(0,0,this.outerRadius(),F5,0,!0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}};Jl.Ring=Sr;Sr.prototype.className="Ring";Sr.prototype._centroid=!0;Sr.prototype._attrsAffectingSize=["innerRadius","outerRadius"];(0,uI._registerNode)(Sr);k5.Factory.addGetterSetter(Sr,"innerRadius",0,(0,L5.getNumberValidator)());k5.Factory.addGetterSetter(Sr,"outerRadius",0,(0,L5.getNumberValidator)())});var U5=Y(eu=>{"use strict";Object.defineProperty(eu,"__esModule",{value:!0});eu.Sprite=void 0;var Ei=me(),dI=Et(),fI=Ll(),j5=be(),hI=_e(),pn=class extends dI.Shape{constructor(e){super(e),this._updated=!0,this.anim=new fI.Animation(()=>{var n=this._updated;return this._updated=!1,n}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(e){var n=this.animation(),r=this.frameIndex(),i=r*4,o=this.animations()[n],s=this.frameOffsets(),a=o[i+0],c=o[i+1],l=o[i+2],u=o[i+3],f=this.image();if((this.hasFill()||this.hasStroke())&&(e.beginPath(),e.rect(0,0,l,u),e.closePath(),e.fillStrokeShape(this)),f)if(s){var d=s[n],h=r*2;e.drawImage(f,a,c,l,u,d[h+0],d[h+1],l,u)}else e.drawImage(f,a,c,l,u,0,0,l,u)}_hitFunc(e){var n=this.animation(),r=this.frameIndex(),i=r*4,o=this.animations()[n],s=this.frameOffsets(),a=o[i+2],c=o[i+3];if(e.beginPath(),s){var l=s[n],u=r*2;e.rect(l[u+0],l[u+1],a,c)}else e.rect(0,0,a,c);e.closePath(),e.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){var e=this;this.interval=setInterval(function(){e._updateIndex()},1e3/this.frameRate())}start(){if(!this.isRunning()){var e=this.getLayer();this.anim.setLayers(e),this._setInterval(),this.anim.start()}}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){var e=this.frameIndex(),n=this.animation(),r=this.animations(),i=r[n],o=i.length/4;e<o-1?this.frameIndex(e+1):this.frameIndex(0)}};eu.Sprite=pn;pn.prototype.className="Sprite";(0,hI._registerNode)(pn);Ei.Factory.addGetterSetter(pn,"animation");Ei.Factory.addGetterSetter(pn,"animations");Ei.Factory.addGetterSetter(pn,"frameOffsets");Ei.Factory.addGetterSetter(pn,"image");Ei.Factory.addGetterSetter(pn,"frameIndex",0,(0,j5.getNumberValidator)());Ei.Factory.addGetterSetter(pn,"frameRate",17,(0,j5.getNumberValidator)());Ei.Factory.backCompat(pn,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"})});var B5=Y(tu=>{"use strict";Object.defineProperty(tu,"__esModule",{value:!0});tu.Star=void 0;var C1=me(),pI=Et(),_1=be(),gI=_e(),tr=class extends pI.Shape{_sceneFunc(e){var n=this.innerRadius(),r=this.outerRadius(),i=this.numPoints();e.beginPath(),e.moveTo(0,0-r);for(var o=1;o<i*2;o++){var s=o%2===0?r:n,a=s*Math.sin(o*Math.PI/i),c=-1*s*Math.cos(o*Math.PI/i);e.lineTo(a,c)}e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}};tu.Star=tr;tr.prototype.className="Star";tr.prototype._centroid=!0;tr.prototype._attrsAffectingSize=["innerRadius","outerRadius"];(0,gI._registerNode)(tr);C1.Factory.addGetterSetter(tr,"numPoints",5,(0,_1.getNumberValidator)());C1.Factory.addGetterSetter(tr,"innerRadius",0,(0,_1.getNumberValidator)());C1.Factory.addGetterSetter(tr,"outerRadius",0,(0,_1.getNumberValidator)())});var D1=Y($o=>{"use strict";Object.defineProperty($o,"__esModule",{value:!0});$o.Text=$o.stringToArray=void 0;var S1=st(),Vt=me(),mI=Et(),Wr=be(),vI=_e();function q5(t){return Array.from(t)}$o.stringToArray=q5;var Bo="auto",yI="center",W5="inherit",fa="justify",CI="Change.konva",_I="2d",$5="-",Y5="left",bI="text",wI="Text",SI="top",DI="bottom",H5="middle",K5="normal",EI="px ",nu=" ",xI="right",G5="rtl",II="word",MI="char",z5="none",b1="\u2026",X5=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],TI=X5.length;function AI(t){return t.split(",").map(e=>{e=e.trim();let n=e.indexOf(" ")>=0,r=e.indexOf('"')>=0||e.indexOf("'")>=0;return n&&!r&&(e=`"${e}"`),e}).join(", ")}var ru;function w1(){return ru||(ru=S1.Util.createCanvasElement().getContext(_I),ru)}function OI(t){t.fillText(this._partialText,this._partialTextX,this._partialTextY)}function RI(t){t.setAttr("miterLimit",2),t.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function PI(t){return t=t||{},!t.fillLinearGradientColorStops&&!t.fillRadialGradientColorStops&&!t.fillPatternImage&&(t.fill=t.fill||"black"),t}var nt=class extends mI.Shape{constructor(e){super(PI(e)),this._partialTextX=0,this._partialTextY=0;for(var n=0;n<TI;n++)this.on(X5[n]+CI,this._setTextData);this._setTextData()}_sceneFunc(e){var n=this.textArr,r=n.length;if(this.text()){var i=this.padding(),o=this.fontSize(),s=this.lineHeight()*o,a=this.verticalAlign(),c=this.direction(),l=0,u=this.align(),f=this.getWidth(),d=this.letterSpacing(),h=this.fill(),g=this.textDecoration(),v=g.indexOf("underline")!==-1,b=g.indexOf("line-through")!==-1,D;c=c===W5?e.direction:c;var I=0,I=s/2,E=0,O=0;for(c===G5&&e.setAttr("direction",c),e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",H5),e.setAttr("textAlign",Y5),a===H5?l=(this.getHeight()-r*s-i*2)/2:a===DI&&(l=this.getHeight()-r*s-i*2),e.translate(i,l+i),D=0;D<r;D++){var E=0,O=0,U=n[D],S=U.text,k=U.width,R=U.lastInParagraph,j,B,$;if(e.save(),u===xI?E+=f-k-i*2:u===yI&&(E+=(f-k-i*2)/2),v){e.save(),e.beginPath(),e.moveTo(E,I+O+Math.round(o/2)),j=S.split(" ").length-1,B=j===0,$=u===fa&&!R?f-i*2:k,e.lineTo(E+Math.round($),I+O+Math.round(o/2)),e.lineWidth=o/15;let ut=this._getLinearGradient();e.strokeStyle=ut||h,e.stroke(),e.restore()}if(b){e.save(),e.beginPath(),e.moveTo(E,I+O),j=S.split(" ").length-1,B=j===0,$=u===fa&&R&&!B?f-i*2:k,e.lineTo(E+Math.round($),I+O),e.lineWidth=o/15;let ut=this._getLinearGradient();e.strokeStyle=ut||h,e.stroke(),e.restore()}if(c!==G5&&(d!==0||u===fa)){j=S.split(" ").length-1;for(var ve=q5(S),we=0;we<ve.length;we++){var je=ve[we];je===" "&&!R&&u===fa&&(E+=(f-i*2-k)/j),this._partialTextX=E,this._partialTextY=I+O,this._partialText=je,e.fillStrokeShape(this),E+=this.measureSize(je).width+d}}else d!==0&&e.setAttr("letterSpacing",`${d}px`),this._partialTextX=E,this._partialTextY=I+O,this._partialText=S,e.fillStrokeShape(this);e.restore(),r>1&&(I+=s)}}}_hitFunc(e){var n=this.getWidth(),r=this.getHeight();e.beginPath(),e.rect(0,0,n,r),e.closePath(),e.fillStrokeShape(this)}setText(e){var n=S1.Util._isString(e)?e:e==null?"":e+"";return this._setAttr(bI,n),this}getWidth(){var e=this.attrs.width===Bo||this.attrs.width===void 0;return e?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){var e=this.attrs.height===Bo||this.attrs.height===void 0;return e?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return S1.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(e){var n=w1(),r=this.fontSize(),i;return n.save(),n.font=this._getContextFont(),i=n.measureText(e),n.restore(),{width:i.width,height:r}}_getContextFont(){return this.fontStyle()+nu+this.fontVariant()+nu+(this.fontSize()+EI)+AI(this.fontFamily())}_addTextLine(e){this.align()===fa&&(e=e.trim());var r=this._getTextWidth(e);return this.textArr.push({text:e,width:r,lastInParagraph:!1})}_getTextWidth(e){var n=this.letterSpacing(),r=e.length;return w1().measureText(e).width+(r?n*(r-1):0)}_setTextData(){var e=this.text().split(`
`),n=+this.fontSize(),r=0,i=this.lineHeight()*n,o=this.attrs.width,s=this.attrs.height,a=o!==Bo&&o!==void 0,c=s!==Bo&&s!==void 0,l=this.padding(),u=o-l*2,f=s-l*2,d=0,h=this.wrap(),g=h!==z5,v=h!==MI&&g,b=this.ellipsis();this.textArr=[],w1().font=this._getContextFont();for(var D=b?this._getTextWidth(b1):0,I=0,E=e.length;I<E;++I){var O=e[I],U=this._getTextWidth(O);if(a&&U>u)for(;O.length>0;){for(var S=0,k=O.length,R="",j=0;S<k;){var B=S+k>>>1,$=O.slice(0,B+1),ve=this._getTextWidth($)+D;ve<=u?(S=B+1,R=$,j=ve):k=B}if(R){if(v){var we,je=O[R.length],xt=je===nu||je===$5;xt&&j<=u?we=R.length:we=Math.max(R.lastIndexOf(nu),R.lastIndexOf($5))+1,we>0&&(S=we,R=R.slice(0,S),j=this._getTextWidth(R))}R=R.trimRight(),this._addTextLine(R),r=Math.max(r,j),d+=i;var Ue=this._shouldHandleEllipsis(d);if(Ue){this._tryToAddEllipsisToLastLine();break}if(O=O.slice(S),O=O.trimLeft(),O.length>0&&(U=this._getTextWidth(O),U<=u)){this._addTextLine(O),d+=i,r=Math.max(r,U);break}}else break}else this._addTextLine(O),d+=i,r=Math.max(r,U),this._shouldHandleEllipsis(d)&&I<E-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),c&&d+i>f)break}this.textHeight=n,this.textWidth=r}_shouldHandleEllipsis(e){var n=+this.fontSize(),r=this.lineHeight()*n,i=this.attrs.height,o=i!==Bo&&i!==void 0,s=this.padding(),a=i-s*2,c=this.wrap(),l=c!==z5;return!l||o&&e+r>a}_tryToAddEllipsisToLastLine(){var e=this.attrs.width,n=e!==Bo&&e!==void 0,r=this.padding(),i=e-r*2,o=this.ellipsis(),s=this.textArr[this.textArr.length-1];if(!(!s||!o)){if(n){var a=this._getTextWidth(s.text+b1)<i;a||(s.text=s.text.slice(0,s.text.length-3))}this.textArr.splice(this.textArr.length-1,1),this._addTextLine(s.text+b1)}}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){let e=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,n=this.hasShadow();return e&&n?!0:super._useBufferCanvas()}};$o.Text=nt;nt.prototype._fillFunc=OI;nt.prototype._strokeFunc=RI;nt.prototype.className=wI;nt.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"];(0,vI._registerNode)(nt);Vt.Factory.overWriteSetter(nt,"width",(0,Wr.getNumberOrAutoValidator)());Vt.Factory.overWriteSetter(nt,"height",(0,Wr.getNumberOrAutoValidator)());Vt.Factory.addGetterSetter(nt,"direction",W5);Vt.Factory.addGetterSetter(nt,"fontFamily","Arial");Vt.Factory.addGetterSetter(nt,"fontSize",12,(0,Wr.getNumberValidator)());Vt.Factory.addGetterSetter(nt,"fontStyle",K5);Vt.Factory.addGetterSetter(nt,"fontVariant",K5);Vt.Factory.addGetterSetter(nt,"padding",0,(0,Wr.getNumberValidator)());Vt.Factory.addGetterSetter(nt,"align",Y5);Vt.Factory.addGetterSetter(nt,"verticalAlign",SI);Vt.Factory.addGetterSetter(nt,"lineHeight",1,(0,Wr.getNumberValidator)());Vt.Factory.addGetterSetter(nt,"wrap",II);Vt.Factory.addGetterSetter(nt,"ellipsis",!1,(0,Wr.getBooleanValidator)());Vt.Factory.addGetterSetter(nt,"letterSpacing",0,(0,Wr.getNumberValidator)());Vt.Factory.addGetterSetter(nt,"text","",(0,Wr.getStringValidator)());Vt.Factory.addGetterSetter(nt,"textDecoration","")});var t3=Y(iu=>{"use strict";Object.defineProperty(iu,"__esModule",{value:!0});iu.TextPath=void 0;var E1=st(),Tn=me(),NI=Et(),ha=Gl(),x1=D1(),Z5=be(),FI=_e(),kI="",Q5="normal";function J5(t){t.fillText(this.partialText,0,0)}function e3(t){t.strokeText(this.partialText,0,0)}var pt=class extends NI.Shape{constructor(e){super(e),this.dummyCanvas=E1.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return ha.Path.getPathLength(this.dataArray)}_getPointAtLength(e){if(!this.attrs.data)return null;let n=this.pathLength;return e-1>n?null:ha.Path.getPointAtLengthOfDataArray(e,this.dataArray)}_readDataAttribute(){this.dataArray=ha.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(e){e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",this.textBaseline()),e.setAttr("textAlign","left"),e.save();var n=this.textDecoration(),r=this.fill(),i=this.fontSize(),o=this.glyphInfo;n==="underline"&&e.beginPath();for(var s=0;s<o.length;s++){e.save();var a=o[s].p0;e.translate(a.x,a.y),e.rotate(o[s].rotation),this.partialText=o[s].text,e.fillStrokeShape(this),n==="underline"&&(s===0&&e.moveTo(0,i/2+1),e.lineTo(i,i/2+1)),e.restore()}n==="underline"&&(e.strokeStyle=r,e.lineWidth=i/20,e.stroke()),e.restore()}_hitFunc(e){e.beginPath();var n=this.glyphInfo;if(n.length>=1){var r=n[0].p0;e.moveTo(r.x,r.y)}for(var i=0;i<n.length;i++){var o=n[i].p1;e.lineTo(o.x,o.y)}e.setAttr("lineWidth",this.fontSize()),e.setAttr("strokeStyle",this.colorKey),e.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return E1.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(e){return x1.Text.prototype.setText.call(this,e)}_getContextFont(){return x1.Text.prototype._getContextFont.call(this)}_getTextSize(e){var n=this.dummyCanvas,r=n.getContext("2d");r.save(),r.font=this._getContextFont();var i=r.measureText(e);return r.restore(),{width:i.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){let{width:e,height:n}=this._getTextSize(this.attrs.text);if(this.textWidth=e,this.textHeight=n,this.glyphInfo=[],!this.attrs.data)return null;let r=this.letterSpacing(),i=this.align(),o=this.kerningFunc(),s=Math.max(this.textWidth+((this.attrs.text||"").length-1)*r,0),a=0;i==="center"&&(a=Math.max(0,this.pathLength/2-s/2)),i==="right"&&(a=Math.max(0,this.pathLength-s));let c=(0,x1.stringToArray)(this.text()),l=a;for(var u=0;u<c.length;u++){let f=this._getPointAtLength(l);if(!f)return;let d=this._getTextSize(c[u]).width+r;if(c[u]===" "&&i==="justify"){let I=this.text().split(" ").length-1;d+=(this.pathLength-s)/I}let h=this._getPointAtLength(l+d);if(!h)return;let g=ha.Path.getLineLength(f.x,f.y,h.x,h.y),v=0;if(o)try{v=o(c[u-1],c[u])*this.fontSize()}catch{v=0}f.x+=v,h.x+=v,this.textWidth+=v;let b=ha.Path.getPointOnLine(v+g/2,f.x,f.y,h.x,h.y),D=Math.atan2(h.y-f.y,h.x-f.x);this.glyphInfo.push({transposeX:b.x,transposeY:b.y,text:c[u],rotation:D,p0:f,p1:h}),l+=d}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};var e=[];this.glyphInfo.forEach(function(u){e.push(u.p0.x),e.push(u.p0.y),e.push(u.p1.x),e.push(u.p1.y)});for(var n=e[0]||0,r=e[0]||0,i=e[1]||0,o=e[1]||0,s,a,c=0;c<e.length/2;c++)s=e[c*2],a=e[c*2+1],n=Math.min(n,s),r=Math.max(r,s),i=Math.min(i,a),o=Math.max(o,a);var l=this.fontSize();return{x:n-l/2,y:i-l/2,width:r-n+l,height:o-i+l}}destroy(){return E1.Util.releaseCanvas(this.dummyCanvas),super.destroy()}};iu.TextPath=pt;pt.prototype._fillFunc=J5;pt.prototype._strokeFunc=e3;pt.prototype._fillFuncHit=J5;pt.prototype._strokeFuncHit=e3;pt.prototype.className="TextPath";pt.prototype._attrsAffectingSize=["text","fontSize","data"];(0,FI._registerNode)(pt);Tn.Factory.addGetterSetter(pt,"data");Tn.Factory.addGetterSetter(pt,"fontFamily","Arial");Tn.Factory.addGetterSetter(pt,"fontSize",12,(0,Z5.getNumberValidator)());Tn.Factory.addGetterSetter(pt,"fontStyle",Q5);Tn.Factory.addGetterSetter(pt,"align","left");Tn.Factory.addGetterSetter(pt,"letterSpacing",0,(0,Z5.getNumberValidator)());Tn.Factory.addGetterSetter(pt,"textBaseline","middle");Tn.Factory.addGetterSetter(pt,"fontVariant",Q5);Tn.Factory.addGetterSetter(pt,"text",kI);Tn.Factory.addGetterSetter(pt,"textDecoration",null);Tn.Factory.addGetterSetter(pt,"kerningFunc",null)});var c3=Y(su=>{"use strict";Object.defineProperty(su,"__esModule",{value:!0});su.Transformer=void 0;var $e=st(),Re=me(),n3=lt(),LI=Et(),VI=y1(),r3=Fl(),An=_e(),Yr=be(),jI=_e(),s3="tr-konva",UI=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(t=>t+`.${s3}`).join(" "),i3="nodesRect",BI=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],$I={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},HI="ontouchstart"in An.Konva._global;function GI(t,e,n){if(t==="rotater")return n;e+=$e.Util.degToRad($I[t]||0);var r=($e.Util.radToDeg(e)%360+360)%360;return $e.Util._inRange(r,315+22.5,360)||$e.Util._inRange(r,0,22.5)?"ns-resize":$e.Util._inRange(r,45-22.5,45+22.5)?"nesw-resize":$e.Util._inRange(r,90-22.5,90+22.5)?"ew-resize":$e.Util._inRange(r,135-22.5,135+22.5)?"nwse-resize":$e.Util._inRange(r,180-22.5,180+22.5)?"ns-resize":$e.Util._inRange(r,225-22.5,225+22.5)?"nesw-resize":$e.Util._inRange(r,270-22.5,270+22.5)?"ew-resize":$e.Util._inRange(r,315-22.5,315+22.5)?"nwse-resize":($e.Util.error("Transformer has unknown angle for cursor detection: "+r),"pointer")}var ou=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"],o3=1e8;function zI(t){return{x:t.x+t.width/2*Math.cos(t.rotation)+t.height/2*Math.sin(-t.rotation),y:t.y+t.height/2*Math.cos(t.rotation)+t.width/2*Math.sin(t.rotation)}}function a3(t,e,n){let r=n.x+(t.x-n.x)*Math.cos(e)-(t.y-n.y)*Math.sin(e),i=n.y+(t.x-n.x)*Math.sin(e)+(t.y-n.y)*Math.cos(e);return Se(T({},t),{rotation:t.rotation+e,x:r,y:i})}function qI(t,e){let n=zI(t);return a3(t,e,n)}function WI(t,e,n){let r=e;for(let i=0;i<t.length;i++){let o=An.Konva.getAngle(t[i]),s=Math.abs(o-e)%(Math.PI*2);Math.min(s,Math.PI*2-s)<n&&(r=o)}return r}var Ie=class extends r3.Group{constructor(e){super(e),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(UI,this.update),this.getNode()&&this.update()}attachTo(e){return this.setNode(e),this}setNode(e){return $e.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([e])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return s3+this._id}setNodes(e=[]){this._nodes&&this._nodes.length&&this.detach();let n=e.filter(i=>i.isAncestorOf(this)?($e.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);this._nodes=e=n,e.length===1&&this.useSingleNodeRotation()?this.rotation(e[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(i=>{let o=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()},s=i._attrsAffectingSize.map(a=>a+"Change."+this._getEventNamespace()).join(" ");i.on(s,o),i.on(BI.map(a=>a+`.${this._getEventNamespace()}`).join(" "),o),i.on(`absoluteTransformChange.${this._getEventNamespace()}`,o),this._proxyDrag(i)}),this._resetTransformCache();var r=!!this.findOne(".top-left");return r&&this.update(),this}_proxyDrag(e){let n;e.on(`dragstart.${this._getEventNamespace()}`,r=>{n=e.getAbsolutePosition(),!this.isDragging()&&e!==this.findOne(".back")&&this.startDrag(r,!1)}),e.on(`dragmove.${this._getEventNamespace()}`,r=>{if(!n)return;let i=e.getAbsolutePosition(),o=i.x-n.x,s=i.y-n.y;this.nodes().forEach(a=>{if(a===e||a.isDragging())return;let c=a.getAbsolutePosition();a.setAbsolutePosition({x:c.x+o,y:c.y+s}),a.startDrag(r)}),n=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(e=>{e.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(i3),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(i3,this.__getNodeRect)}__getNodeShape(e,n=this.rotation(),r){var i=e.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),o=e.getAbsoluteScale(r),s=e.getAbsolutePosition(r),a=i.x*o.x-e.offsetX()*o.x,c=i.y*o.y-e.offsetY()*o.y;let l=(An.Konva.getAngle(e.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),u={x:s.x+a*Math.cos(l)+c*Math.sin(-l),y:s.y+c*Math.cos(l)+a*Math.sin(l),width:i.width*o.x,height:i.height*o.y,rotation:l};return a3(u,-An.Konva.getAngle(n),{x:0,y:0})}__getNodeRect(){var e=this.getNode();if(!e)return{x:-o3,y:-o3,width:0,height:0,rotation:0};let n=[];this.nodes().map(l=>{let u=l.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()});var f=[{x:u.x,y:u.y},{x:u.x+u.width,y:u.y},{x:u.x+u.width,y:u.y+u.height},{x:u.x,y:u.y+u.height}],d=l.getAbsoluteTransform();f.forEach(function(h){var g=d.point(h);n.push(g)})});let r=new $e.Transform;r.rotate(-An.Konva.getAngle(this.rotation()));var i=1/0,o=1/0,s=-1/0,a=-1/0;n.forEach(function(l){var u=r.point(l);i===void 0&&(i=s=u.x,o=a=u.y),i=Math.min(i,u.x),o=Math.min(o,u.y),s=Math.max(s,u.x),a=Math.max(a,u.y)}),r.invert();let c=r.point({x:i,y:o});return{x:c.x,y:c.y,width:s-i,height:a-o,rotation:An.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),ou.forEach(e=>{this._createAnchor(e)}),this._createAnchor("rotater")}_createAnchor(e){var n=new VI.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:e+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:HI?10:"auto"}),r=this;n.on("mousedown touchstart",function(i){r._handleMouseDown(i)}),n.on("dragstart",i=>{n.stopDrag(),i.cancelBubble=!0}),n.on("dragend",i=>{i.cancelBubble=!0}),n.on("mouseenter",()=>{var i=An.Konva.getAngle(this.rotation()),o=this.rotateAnchorCursor(),s=GI(e,i,o);n.getStage().content&&(n.getStage().content.style.cursor=s),this._cursorChange=!0}),n.on("mouseout",()=>{n.getStage().content&&(n.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(n)}_createBack(){var e=new LI.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(n,r){var i=r.getParent(),o=i.padding();n.beginPath(),n.rect(-o,-o,r.width()+o*2,r.height()+o*2),n.moveTo(r.width()/2,-o),i.rotateEnabled()&&i.rotateLineVisible()&&n.lineTo(r.width()/2,-i.rotateAnchorOffset()*$e.Util._sign(r.height())-o),n.fillStrokeShape(r)},hitFunc:(n,r)=>{if(this.shouldOverdrawWholeArea()){var i=this.padding();n.beginPath(),n.rect(-i,-i,r.width()+i*2,r.height()+i*2),n.fillStrokeShape(r)}}});this.add(e),this._proxyDrag(e),e.on("dragstart",n=>{n.cancelBubble=!0}),e.on("dragmove",n=>{n.cancelBubble=!0}),e.on("dragend",n=>{n.cancelBubble=!0}),this.on("dragmove",n=>{this.update()})}_handleMouseDown(e){this._movingAnchorName=e.target.name().split(" ")[0];var n=this._getNodeRect(),r=n.width,i=n.height,o=Math.sqrt(Math.pow(r,2)+Math.pow(i,2));this.sin=Math.abs(i/o),this.cos=Math.abs(r/o),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;var s=e.target.getAbsolutePosition(),a=e.target.getStage().getPointerPosition();this._anchorDragOffset={x:a.x-s.x,y:a.y-s.y},this._fire("transformstart",{evt:e.evt,target:this.getNode()}),this._nodes.forEach(c=>{c._fire("transformstart",{evt:e.evt,target:c})})}_handleMouseMove(e){var n,r,i,o=this.findOne("."+this._movingAnchorName),s=o.getStage();s.setPointersPositions(e);let a=s.getPointerPosition(),c={x:a.x-this._anchorDragOffset.x,y:a.y-this._anchorDragOffset.y},l=o.getAbsolutePosition();this.anchorDragBoundFunc()&&(c=this.anchorDragBoundFunc()(l,c,e)),o.setAbsolutePosition(c);let u=o.getAbsolutePosition();if(!(l.x===u.x&&l.y===u.y)){if(this._movingAnchorName==="rotater"){var f=this._getNodeRect();n=o.x()-f.width/2,r=-o.y()+f.height/2;let we=Math.atan2(-r,n)+Math.PI/2;f.height<0&&(we-=Math.PI);var d=An.Konva.getAngle(this.rotation());let je=d+we,xt=An.Konva.getAngle(this.rotationSnapTolerance()),ut=WI(this.rotationSnaps(),je,xt)-f.rotation,dt=qI(f,ut);this._fitNodesInto(dt,e);return}var h=this.shiftBehavior(),g;h==="inverted"?g=this.keepRatio()&&!e.shiftKey:h==="none"?g=this.keepRatio():g=this.keepRatio()||e.shiftKey;var E=this.centeredScaling()||e.altKey;if(this._movingAnchorName==="top-left"){if(g){var v=E?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};i=Math.sqrt(Math.pow(v.x-o.x(),2)+Math.pow(v.y-o.y(),2));var b=this.findOne(".top-left").x()>v.x?-1:1,D=this.findOne(".top-left").y()>v.y?-1:1;n=i*this.cos*b,r=i*this.sin*D,this.findOne(".top-left").x(v.x-n),this.findOne(".top-left").y(v.y-r)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(o.y());else if(this._movingAnchorName==="top-right"){if(g){var v=E?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};i=Math.sqrt(Math.pow(o.x()-v.x,2)+Math.pow(v.y-o.y(),2));var b=this.findOne(".top-right").x()<v.x?-1:1,D=this.findOne(".top-right").y()>v.y?-1:1;n=i*this.cos*b,r=i*this.sin*D,this.findOne(".top-right").x(v.x+n),this.findOne(".top-right").y(v.y-r)}var I=o.position();this.findOne(".top-left").y(I.y),this.findOne(".bottom-right").x(I.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(o.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(o.x());else if(this._movingAnchorName==="bottom-left"){if(g){var v=E?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};i=Math.sqrt(Math.pow(v.x-o.x(),2)+Math.pow(o.y()-v.y,2));var b=v.x<o.x()?-1:1,D=o.y()<v.y?-1:1;n=i*this.cos*b,r=i*this.sin*D,o.x(v.x-n),o.y(v.y+r)}I=o.position(),this.findOne(".top-left").x(I.x),this.findOne(".bottom-right").y(I.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(o.y());else if(this._movingAnchorName==="bottom-right"){if(g){var v=E?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};i=Math.sqrt(Math.pow(o.x()-v.x,2)+Math.pow(o.y()-v.y,2));var b=this.findOne(".bottom-right").x()<v.x?-1:1,D=this.findOne(".bottom-right").y()<v.y?-1:1;n=i*this.cos*b,r=i*this.sin*D,this.findOne(".bottom-right").x(v.x+n),this.findOne(".bottom-right").y(v.y+r)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));var E=this.centeredScaling()||e.altKey;if(E){var O=this.findOne(".top-left"),U=this.findOne(".bottom-right"),S=O.x(),k=O.y(),R=this.getWidth()-U.x(),j=this.getHeight()-U.y();U.move({x:-S,y:-k}),O.move({x:R,y:j})}var B=this.findOne(".top-left").getAbsolutePosition();n=B.x,r=B.y;var $=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),ve=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:n,y:r,width:$,height:ve,rotation:An.Konva.getAngle(this.rotation())},e)}}_handleMouseUp(e){this._removeEvents(e)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(e){if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));var n=this.getNode();this._fire("transformend",{evt:e,target:n}),n&&this._nodes.forEach(r=>{r._fire("transformend",{evt:e,target:r})}),this._movingAnchorName=null}}_fitNodesInto(e,n){var r=this._getNodeRect();let i=1;if($e.Util._inRange(e.width,-this.padding()*2-i,i)){this.update();return}if($e.Util._inRange(e.height,-this.padding()*2-i,i)){this.update();return}var o=new $e.Transform;if(o.rotate(An.Konva.getAngle(this.rotation())),this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("left")>=0){let d=o.point({x:-this.padding()*2,y:0});e.x+=d.x,e.y+=d.y,e.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=d.x,this._anchorDragOffset.y-=d.y}else if(this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("right")>=0){let d=o.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=d.x,this._anchorDragOffset.y-=d.y,e.width+=this.padding()*2}if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("top")>=0){let d=o.point({x:0,y:-this.padding()*2});e.x+=d.x,e.y+=d.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=d.x,this._anchorDragOffset.y-=d.y,e.height+=this.padding()*2}else if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("bottom")>=0){let d=o.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=d.x,this._anchorDragOffset.y-=d.y,e.height+=this.padding()*2}if(this.boundBoxFunc()){let d=this.boundBoxFunc()(r,e);d?e=d:$e.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}let s=1e7,a=new $e.Transform;a.translate(r.x,r.y),a.rotate(r.rotation),a.scale(r.width/s,r.height/s);let c=new $e.Transform,l=e.width/s,u=e.height/s;this.flipEnabled()===!1?(c.translate(e.x,e.y),c.rotate(e.rotation),c.translate(e.width<0?e.width:0,e.height<0?e.height:0),c.scale(Math.abs(l),Math.abs(u))):(c.translate(e.x,e.y),c.rotate(e.rotation),c.scale(l,u));let f=c.multiply(a.invert());this._nodes.forEach(d=>{var h;let g=d.getParent().getAbsoluteTransform(),v=d.getTransform().copy();v.translate(d.offsetX(),d.offsetY());let b=new $e.Transform;b.multiply(g.copy().invert()).multiply(f).multiply(g).multiply(v);let D=b.decompose();d.setAttrs(D),this._fire("transform",{evt:n,target:d}),d._fire("transform",{evt:n,target:d}),(h=d.getLayer())===null||h===void 0||h.batchDraw()}),this.rotation($e.Util._getRotation(e.rotation)),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(e,n){this.findOne(e).setAttrs(n)}update(){var e,n=this._getNodeRect();this.rotation($e.Util._getRotation(n.rotation));var r=n.width,i=n.height,o=this.enabledAnchors(),s=this.resizeEnabled(),a=this.padding(),c=this.anchorSize();let l=this.find("._anchor");l.forEach(f=>{f.setAttrs({width:c,height:c,offsetX:c/2,offsetY:c/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:c/2+a,offsetY:c/2+a,visible:s&&o.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:r/2,y:0,offsetY:c/2+a,visible:s&&o.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:r,y:0,offsetX:c/2-a,offsetY:c/2+a,visible:s&&o.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:i/2,offsetX:c/2+a,visible:s&&o.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:r,y:i/2,offsetX:c/2-a,visible:s&&o.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:i,offsetX:c/2+a,offsetY:c/2-a,visible:s&&o.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:r/2,y:i,offsetY:c/2-a,visible:s&&o.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:r,y:i,offsetX:c/2-a,offsetY:c/2-a,visible:s&&o.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:r/2,y:-this.rotateAnchorOffset()*$e.Util._sign(i)-a,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:r,height:i,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});let u=this.anchorStyleFunc();u&&l.forEach(f=>{u(f)}),(e=this.getLayer())===null||e===void 0||e.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();var e=this.findOne("."+this._movingAnchorName);e&&e.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),r3.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return n3.Node.prototype.toObject.call(this)}clone(e){var n=n3.Node.prototype.clone.call(this,e);return n}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}};su.Transformer=Ie;function YI(t){return t instanceof Array||$e.Util.warn("enabledAnchors value should be an array"),t instanceof Array&&t.forEach(function(e){ou.indexOf(e)===-1&&$e.Util.warn("Unknown anchor name: "+e+". Available names are: "+ou.join(", "))}),t||[]}Ie.prototype.className="Transformer";(0,jI._registerNode)(Ie);Re.Factory.addGetterSetter(Ie,"enabledAnchors",ou,YI);Re.Factory.addGetterSetter(Ie,"flipEnabled",!0,(0,Yr.getBooleanValidator)());Re.Factory.addGetterSetter(Ie,"resizeEnabled",!0);Re.Factory.addGetterSetter(Ie,"anchorSize",10,(0,Yr.getNumberValidator)());Re.Factory.addGetterSetter(Ie,"rotateEnabled",!0);Re.Factory.addGetterSetter(Ie,"rotateLineVisible",!0);Re.Factory.addGetterSetter(Ie,"rotationSnaps",[]);Re.Factory.addGetterSetter(Ie,"rotateAnchorOffset",50,(0,Yr.getNumberValidator)());Re.Factory.addGetterSetter(Ie,"rotateAnchorCursor","crosshair");Re.Factory.addGetterSetter(Ie,"rotationSnapTolerance",5,(0,Yr.getNumberValidator)());Re.Factory.addGetterSetter(Ie,"borderEnabled",!0);Re.Factory.addGetterSetter(Ie,"anchorStroke","rgb(0, 161, 255)");Re.Factory.addGetterSetter(Ie,"anchorStrokeWidth",1,(0,Yr.getNumberValidator)());Re.Factory.addGetterSetter(Ie,"anchorFill","white");Re.Factory.addGetterSetter(Ie,"anchorCornerRadius",0,(0,Yr.getNumberValidator)());Re.Factory.addGetterSetter(Ie,"borderStroke","rgb(0, 161, 255)");Re.Factory.addGetterSetter(Ie,"borderStrokeWidth",1,(0,Yr.getNumberValidator)());Re.Factory.addGetterSetter(Ie,"borderDash");Re.Factory.addGetterSetter(Ie,"keepRatio",!0);Re.Factory.addGetterSetter(Ie,"shiftBehavior","default");Re.Factory.addGetterSetter(Ie,"centeredScaling",!1);Re.Factory.addGetterSetter(Ie,"ignoreStroke",!1);Re.Factory.addGetterSetter(Ie,"padding",0,(0,Yr.getNumberValidator)());Re.Factory.addGetterSetter(Ie,"node");Re.Factory.addGetterSetter(Ie,"nodes");Re.Factory.addGetterSetter(Ie,"boundBoxFunc");Re.Factory.addGetterSetter(Ie,"anchorDragBoundFunc");Re.Factory.addGetterSetter(Ie,"anchorStyleFunc");Re.Factory.addGetterSetter(Ie,"shouldOverdrawWholeArea",!1);Re.Factory.addGetterSetter(Ie,"useSingleNodeRotation",!0);Re.Factory.backCompat(Ie,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"})});var u3=Y(cu=>{"use strict";Object.defineProperty(cu,"__esModule",{value:!0});cu.Wedge=void 0;var au=me(),KI=Et(),XI=_e(),l3=be(),ZI=_e(),On=class extends KI.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.radius(),0,XI.Konva.getAngle(this.angle()),this.clockwise()),e.lineTo(0,0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}};cu.Wedge=On;On.prototype.className="Wedge";On.prototype._centroid=!0;On.prototype._attrsAffectingSize=["radius"];(0,ZI._registerNode)(On);au.Factory.addGetterSetter(On,"radius",0,(0,l3.getNumberValidator)());au.Factory.addGetterSetter(On,"angle",0,(0,l3.getNumberValidator)());au.Factory.addGetterSetter(On,"clockwise",!1);au.Factory.backCompat(On,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"})});var h3=Y(lu=>{"use strict";Object.defineProperty(lu,"__esModule",{value:!0});lu.Blur=void 0;var d3=me(),QI=lt(),JI=be();function f3(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var eM=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],tM=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function nM(t,e){var n=t.data,r=t.width,i=t.height,o,s,a,c,l,u,f,d,h,g,v,b,D,I,E,O,U,S,k,R,j,B,$,ve,we=e+e+1,je=r-1,xt=i-1,Ue=e+1,ut=Ue*(Ue+1)/2,dt=new f3,Ii=null,Ae=dt,Ke=null,Xe=null,gn=eM[e],Pn=tM[e];for(a=1;a<we;a++)Ae=Ae.next=new f3,a===Ue&&(Ii=Ae);for(Ae.next=dt,f=u=0,s=0;s<i;s++){for(O=U=S=k=d=h=g=v=0,b=Ue*(R=n[u]),D=Ue*(j=n[u+1]),I=Ue*(B=n[u+2]),E=Ue*($=n[u+3]),d+=ut*R,h+=ut*j,g+=ut*B,v+=ut*$,Ae=dt,a=0;a<Ue;a++)Ae.r=R,Ae.g=j,Ae.b=B,Ae.a=$,Ae=Ae.next;for(a=1;a<Ue;a++)c=u+((je<a?je:a)<<2),d+=(Ae.r=R=n[c])*(ve=Ue-a),h+=(Ae.g=j=n[c+1])*ve,g+=(Ae.b=B=n[c+2])*ve,v+=(Ae.a=$=n[c+3])*ve,O+=R,U+=j,S+=B,k+=$,Ae=Ae.next;for(Ke=dt,Xe=Ii,o=0;o<r;o++)n[u+3]=$=v*gn>>Pn,$!==0?($=255/$,n[u]=(d*gn>>Pn)*$,n[u+1]=(h*gn>>Pn)*$,n[u+2]=(g*gn>>Pn)*$):n[u]=n[u+1]=n[u+2]=0,d-=b,h-=D,g-=I,v-=E,b-=Ke.r,D-=Ke.g,I-=Ke.b,E-=Ke.a,c=f+((c=o+e+1)<je?c:je)<<2,O+=Ke.r=n[c],U+=Ke.g=n[c+1],S+=Ke.b=n[c+2],k+=Ke.a=n[c+3],d+=O,h+=U,g+=S,v+=k,Ke=Ke.next,b+=R=Xe.r,D+=j=Xe.g,I+=B=Xe.b,E+=$=Xe.a,O-=R,U-=j,S-=B,k-=$,Xe=Xe.next,u+=4;f+=r}for(o=0;o<r;o++){for(U=S=k=O=h=g=v=d=0,u=o<<2,b=Ue*(R=n[u]),D=Ue*(j=n[u+1]),I=Ue*(B=n[u+2]),E=Ue*($=n[u+3]),d+=ut*R,h+=ut*j,g+=ut*B,v+=ut*$,Ae=dt,a=0;a<Ue;a++)Ae.r=R,Ae.g=j,Ae.b=B,Ae.a=$,Ae=Ae.next;for(l=r,a=1;a<=e;a++)u=l+o<<2,d+=(Ae.r=R=n[u])*(ve=Ue-a),h+=(Ae.g=j=n[u+1])*ve,g+=(Ae.b=B=n[u+2])*ve,v+=(Ae.a=$=n[u+3])*ve,O+=R,U+=j,S+=B,k+=$,Ae=Ae.next,a<xt&&(l+=r);for(u=o,Ke=dt,Xe=Ii,s=0;s<i;s++)c=u<<2,n[c+3]=$=v*gn>>Pn,$>0?($=255/$,n[c]=(d*gn>>Pn)*$,n[c+1]=(h*gn>>Pn)*$,n[c+2]=(g*gn>>Pn)*$):n[c]=n[c+1]=n[c+2]=0,d-=b,h-=D,g-=I,v-=E,b-=Ke.r,D-=Ke.g,I-=Ke.b,E-=Ke.a,c=o+((c=s+Ue)<xt?c:xt)*r<<2,d+=O+=Ke.r=n[c],h+=U+=Ke.g=n[c+1],g+=S+=Ke.b=n[c+2],v+=k+=Ke.a=n[c+3],Ke=Ke.next,b+=R=Xe.r,D+=j=Xe.g,I+=B=Xe.b,E+=$=Xe.a,O-=R,U-=j,S-=B,k-=$,Xe=Xe.next,u+=r}}var rM=function(e){var n=Math.round(this.blurRadius());n>0&&nM(e,n)};lu.Blur=rM;d3.Factory.addGetterSetter(QI.Node,"blurRadius",0,(0,JI.getNumberValidator)(),d3.Factory.afterSetFilter)});var g3=Y(uu=>{"use strict";Object.defineProperty(uu,"__esModule",{value:!0});uu.Brighten=void 0;var p3=me(),iM=lt(),oM=be(),sM=function(t){var e=this.brightness()*255,n=t.data,r=n.length,i;for(i=0;i<r;i+=4)n[i]+=e,n[i+1]+=e,n[i+2]+=e};uu.Brighten=sM;p3.Factory.addGetterSetter(iM.Node,"brightness",0,(0,oM.getNumberValidator)(),p3.Factory.afterSetFilter)});var v3=Y(du=>{"use strict";Object.defineProperty(du,"__esModule",{value:!0});du.Contrast=void 0;var m3=me(),aM=lt(),cM=be(),lM=function(t){var e=Math.pow((this.contrast()+100)/100,2),n=t.data,r=n.length,i=150,o=150,s=150,a;for(a=0;a<r;a+=4)i=n[a],o=n[a+1],s=n[a+2],i/=255,i-=.5,i*=e,i+=.5,i*=255,o/=255,o-=.5,o*=e,o+=.5,o*=255,s/=255,s-=.5,s*=e,s+=.5,s*=255,i=i<0?0:i>255?255:i,o=o<0?0:o>255?255:o,s=s<0?0:s>255?255:s,n[a]=i,n[a+1]=o,n[a+2]=s};du.Contrast=lM;m3.Factory.addGetterSetter(aM.Node,"contrast",0,(0,cM.getNumberValidator)(),m3.Factory.afterSetFilter)});var C3=Y(hu=>{"use strict";Object.defineProperty(hu,"__esModule",{value:!0});hu.Emboss=void 0;var Kr=me(),fu=lt(),uM=st(),y3=be(),dM=function(t){var e=this.embossStrength()*10,n=this.embossWhiteLevel()*255,r=this.embossDirection(),i=this.embossBlend(),o=0,s=0,a=t.data,c=t.width,l=t.height,u=c*4,f=l;switch(r){case"top-left":o=-1,s=-1;break;case"top":o=-1,s=0;break;case"top-right":o=-1,s=1;break;case"right":o=0,s=1;break;case"bottom-right":o=1,s=1;break;case"bottom":o=1,s=0;break;case"bottom-left":o=1,s=-1;break;case"left":o=0,s=-1;break;default:uM.Util.error("Unknown emboss direction: "+r)}do{var d=(f-1)*u,h=o;f+h<1&&(h=0),f+h>l&&(h=0);var g=(f-1+h)*c*4,v=c;do{var b=d+(v-1)*4,D=s;v+D<1&&(D=0),v+D>c&&(D=0);var I=g+(v-1+D)*4,E=a[b]-a[I],O=a[b+1]-a[I+1],U=a[b+2]-a[I+2],S=E,k=S>0?S:-S,R=O>0?O:-O,j=U>0?U:-U;if(R>k&&(S=O),j>k&&(S=U),S*=e,i){var B=a[b]+S,$=a[b+1]+S,ve=a[b+2]+S;a[b]=B>255?255:B<0?0:B,a[b+1]=$>255?255:$<0?0:$,a[b+2]=ve>255?255:ve<0?0:ve}else{var we=n-S;we<0?we=0:we>255&&(we=255),a[b]=a[b+1]=a[b+2]=we}}while(--v)}while(--f)};hu.Emboss=dM;Kr.Factory.addGetterSetter(fu.Node,"embossStrength",.5,(0,y3.getNumberValidator)(),Kr.Factory.afterSetFilter);Kr.Factory.addGetterSetter(fu.Node,"embossWhiteLevel",.5,(0,y3.getNumberValidator)(),Kr.Factory.afterSetFilter);Kr.Factory.addGetterSetter(fu.Node,"embossDirection","top-left",null,Kr.Factory.afterSetFilter);Kr.Factory.addGetterSetter(fu.Node,"embossBlend",!1,null,Kr.Factory.afterSetFilter)});var b3=Y(pu=>{"use strict";Object.defineProperty(pu,"__esModule",{value:!0});pu.Enhance=void 0;var _3=me(),fM=lt(),hM=be();function I1(t,e,n,r,i){var o=n-e,s=i-r,a;return o===0?r+s/2:s===0?r:(a=(t-e)/o,a=s*a+r,a)}var pM=function(t){var e=t.data,n=e.length,r=e[0],i=r,o,s=e[1],a=s,c,l=e[2],u=l,f,d,h=this.enhance();if(h!==0){for(d=0;d<n;d+=4)o=e[d+0],o<r?r=o:o>i&&(i=o),c=e[d+1],c<s?s=c:c>a&&(a=c),f=e[d+2],f<l?l=f:f>u&&(u=f);i===r&&(i=255,r=0),a===s&&(a=255,s=0),u===l&&(u=255,l=0);var g,v,b,D,I,E,O,U,S;for(h>0?(v=i+h*(255-i),b=r-h*(r-0),I=a+h*(255-a),E=s-h*(s-0),U=u+h*(255-u),S=l-h*(l-0)):(g=(i+r)*.5,v=i+h*(i-g),b=r+h*(r-g),D=(a+s)*.5,I=a+h*(a-D),E=s+h*(s-D),O=(u+l)*.5,U=u+h*(u-O),S=l+h*(l-O)),d=0;d<n;d+=4)e[d+0]=I1(e[d+0],r,i,b,v),e[d+1]=I1(e[d+1],s,a,E,I),e[d+2]=I1(e[d+2],l,u,S,U)}};pu.Enhance=pM;_3.Factory.addGetterSetter(fM.Node,"enhance",0,(0,hM.getNumberValidator)(),_3.Factory.afterSetFilter)});var w3=Y(gu=>{"use strict";Object.defineProperty(gu,"__esModule",{value:!0});gu.Grayscale=void 0;var gM=function(t){var e=t.data,n=e.length,r,i;for(r=0;r<n;r+=4)i=.34*e[r]+.5*e[r+1]+.16*e[r+2],e[r]=i,e[r+1]=i,e[r+2]=i};gu.Grayscale=gM});var S3=Y(mu=>{"use strict";Object.defineProperty(mu,"__esModule",{value:!0});mu.HSL=void 0;var Ho=me(),M1=lt(),T1=be();Ho.Factory.addGetterSetter(M1.Node,"hue",0,(0,T1.getNumberValidator)(),Ho.Factory.afterSetFilter);Ho.Factory.addGetterSetter(M1.Node,"saturation",0,(0,T1.getNumberValidator)(),Ho.Factory.afterSetFilter);Ho.Factory.addGetterSetter(M1.Node,"luminance",0,(0,T1.getNumberValidator)(),Ho.Factory.afterSetFilter);var mM=function(t){var e=t.data,n=e.length,r=1,i=Math.pow(2,this.saturation()),o=Math.abs(this.hue()+360)%360,s=this.luminance()*127,a,c=r*i*Math.cos(o*Math.PI/180),l=r*i*Math.sin(o*Math.PI/180),u=.299*r+.701*c+.167*l,f=.587*r-.587*c+.33*l,d=.114*r-.114*c-.497*l,h=.299*r-.299*c-.328*l,g=.587*r+.413*c+.035*l,v=.114*r-.114*c+.293*l,b=.299*r-.3*c+1.25*l,D=.587*r-.586*c-1.05*l,I=.114*r+.886*c-.2*l,E,O,U,S;for(a=0;a<n;a+=4)E=e[a+0],O=e[a+1],U=e[a+2],S=e[a+3],e[a+0]=u*E+f*O+d*U+s,e[a+1]=h*E+g*O+v*U+s,e[a+2]=b*E+D*O+I*U+s,e[a+3]=S};mu.HSL=mM});var D3=Y(vu=>{"use strict";Object.defineProperty(vu,"__esModule",{value:!0});vu.HSV=void 0;var Go=me(),A1=lt(),O1=be(),vM=function(t){var e=t.data,n=e.length,r=Math.pow(2,this.value()),i=Math.pow(2,this.saturation()),o=Math.abs(this.hue()+360)%360,s,a=r*i*Math.cos(o*Math.PI/180),c=r*i*Math.sin(o*Math.PI/180),l=.299*r+.701*a+.167*c,u=.587*r-.587*a+.33*c,f=.114*r-.114*a-.497*c,d=.299*r-.299*a-.328*c,h=.587*r+.413*a+.035*c,g=.114*r-.114*a+.293*c,v=.299*r-.3*a+1.25*c,b=.587*r-.586*a-1.05*c,D=.114*r+.886*a-.2*c,I,E,O,U;for(s=0;s<n;s+=4)I=e[s+0],E=e[s+1],O=e[s+2],U=e[s+3],e[s+0]=l*I+u*E+f*O,e[s+1]=d*I+h*E+g*O,e[s+2]=v*I+b*E+D*O,e[s+3]=U};vu.HSV=vM;Go.Factory.addGetterSetter(A1.Node,"hue",0,(0,O1.getNumberValidator)(),Go.Factory.afterSetFilter);Go.Factory.addGetterSetter(A1.Node,"saturation",0,(0,O1.getNumberValidator)(),Go.Factory.afterSetFilter);Go.Factory.addGetterSetter(A1.Node,"value",0,(0,O1.getNumberValidator)(),Go.Factory.afterSetFilter)});var E3=Y(yu=>{"use strict";Object.defineProperty(yu,"__esModule",{value:!0});yu.Invert=void 0;var yM=function(t){var e=t.data,n=e.length,r;for(r=0;r<n;r+=4)e[r]=255-e[r],e[r+1]=255-e[r+1],e[r+2]=255-e[r+2]};yu.Invert=yM});var T3=Y(_u=>{"use strict";Object.defineProperty(_u,"__esModule",{value:!0});_u.Kaleidoscope=void 0;var Cu=me(),I3=lt(),x3=st(),M3=be(),CM=function(t,e,n){var r=t.data,i=e.data,o=t.width,s=t.height,a=n.polarCenterX||o/2,c=n.polarCenterY||s/2,l,u,f,d=0,h=0,g=0,v=0,b,D=Math.sqrt(a*a+c*c);u=o-a,f=s-c,b=Math.sqrt(u*u+f*f),D=b>D?b:D;var I=s,E=o,O,U,S=360/E*Math.PI/180,k,R;for(U=0;U<E;U+=1)for(k=Math.sin(U*S),R=Math.cos(U*S),O=0;O<I;O+=1)u=Math.floor(a+D*O/I*R),f=Math.floor(c+D*O/I*k),l=(f*o+u)*4,d=r[l+0],h=r[l+1],g=r[l+2],v=r[l+3],l=(U+O*o)*4,i[l+0]=d,i[l+1]=h,i[l+2]=g,i[l+3]=v},_M=function(t,e,n){var r=t.data,i=e.data,o=t.width,s=t.height,a=n.polarCenterX||o/2,c=n.polarCenterY||s/2,l,u,f,d,h,g=0,v=0,b=0,D=0,I,E=Math.sqrt(a*a+c*c);u=o-a,f=s-c,I=Math.sqrt(u*u+f*f),E=I>E?I:E;var O=s,U=o,S,k,R=n.polarRotation||0,j,B;for(u=0;u<o;u+=1)for(f=0;f<s;f+=1)d=u-a,h=f-c,S=Math.sqrt(d*d+h*h)*O/E,k=(Math.atan2(h,d)*180/Math.PI+360+R)%360,k=k*U/360,j=Math.floor(k),B=Math.floor(S),l=(B*o+j)*4,g=r[l+0],v=r[l+1],b=r[l+2],D=r[l+3],l=(f*o+u)*4,i[l+0]=g,i[l+1]=v,i[l+2]=b,i[l+3]=D},bM=function(t){var e=t.width,n=t.height,r,i,o,s,a,c,l,u,f,d,h=Math.round(this.kaleidoscopePower()),g=Math.round(this.kaleidoscopeAngle()),v=Math.floor(e*(g%360)/360);if(!(h<1)){var b=x3.Util.createCanvasElement();b.width=e,b.height=n;var D=b.getContext("2d").getImageData(0,0,e,n);x3.Util.releaseCanvas(b),CM(t,D,{polarCenterX:e/2,polarCenterY:n/2});for(var I=e/Math.pow(2,h);I<=8;)I=I*2,h-=1;I=Math.ceil(I);var E=I,O=0,U=E,S=1;for(v+I>e&&(O=E,U=0,S=-1),i=0;i<n;i+=1)for(r=O;r!==U;r+=S)o=Math.round(r+v)%e,f=(e*i+o)*4,a=D.data[f+0],c=D.data[f+1],l=D.data[f+2],u=D.data[f+3],d=(e*i+r)*4,D.data[d+0]=a,D.data[d+1]=c,D.data[d+2]=l,D.data[d+3]=u;for(i=0;i<n;i+=1)for(E=Math.floor(I),s=0;s<h;s+=1){for(r=0;r<E+1;r+=1)f=(e*i+r)*4,a=D.data[f+0],c=D.data[f+1],l=D.data[f+2],u=D.data[f+3],d=(e*i+E*2-r-1)*4,D.data[d+0]=a,D.data[d+1]=c,D.data[d+2]=l,D.data[d+3]=u;E*=2}_M(D,t,{polarRotation:0})}};_u.Kaleidoscope=bM;Cu.Factory.addGetterSetter(I3.Node,"kaleidoscopePower",2,(0,M3.getNumberValidator)(),Cu.Factory.afterSetFilter);Cu.Factory.addGetterSetter(I3.Node,"kaleidoscopeAngle",0,(0,M3.getNumberValidator)(),Cu.Factory.afterSetFilter)});var O3=Y(wu=>{"use strict";Object.defineProperty(wu,"__esModule",{value:!0});wu.Mask=void 0;var A3=me(),wM=lt(),SM=be();function bu(t,e,n){var r=(n*t.width+e)*4,i=[];return i.push(t.data[r++],t.data[r++],t.data[r++],t.data[r++]),i}function pa(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)+Math.pow(t[2]-e[2],2))}function DM(t){for(var e=[0,0,0],n=0;n<t.length;n++)e[0]+=t[n][0],e[1]+=t[n][1],e[2]+=t[n][2];return e[0]/=t.length,e[1]/=t.length,e[2]/=t.length,e}function EM(t,e){var n=bu(t,0,0),r=bu(t,t.width-1,0),i=bu(t,0,t.height-1),o=bu(t,t.width-1,t.height-1),s=e||10;if(pa(n,r)<s&&pa(r,o)<s&&pa(o,i)<s&&pa(i,n)<s){for(var a=DM([r,n,o,i]),c=[],l=0;l<t.width*t.height;l++){var u=pa(a,[t.data[l*4],t.data[l*4+1],t.data[l*4+2]]);c[l]=u<s?0:255}return c}}function xM(t,e){for(var n=0;n<t.width*t.height;n++)t.data[4*n+3]=e[n]}function IM(t,e,n){for(var r=[1,1,1,1,0,1,1,1,1],i=Math.round(Math.sqrt(r.length)),o=Math.floor(i/2),s=[],a=0;a<n;a++)for(var c=0;c<e;c++){for(var l=a*e+c,u=0,f=0;f<i;f++)for(var d=0;d<i;d++){var h=a+f-o,g=c+d-o;if(h>=0&&h<n&&g>=0&&g<e){var v=h*e+g,b=r[f*i+d];u+=t[v]*b}}s[l]=u===255*8?255:0}return s}function MM(t,e,n){for(var r=[1,1,1,1,1,1,1,1,1],i=Math.round(Math.sqrt(r.length)),o=Math.floor(i/2),s=[],a=0;a<n;a++)for(var c=0;c<e;c++){for(var l=a*e+c,u=0,f=0;f<i;f++)for(var d=0;d<i;d++){var h=a+f-o,g=c+d-o;if(h>=0&&h<n&&g>=0&&g<e){var v=h*e+g,b=r[f*i+d];u+=t[v]*b}}s[l]=u>=255*4?255:0}return s}function TM(t,e,n){for(var r=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],i=Math.round(Math.sqrt(r.length)),o=Math.floor(i/2),s=[],a=0;a<n;a++)for(var c=0;c<e;c++){for(var l=a*e+c,u=0,f=0;f<i;f++)for(var d=0;d<i;d++){var h=a+f-o,g=c+d-o;if(h>=0&&h<n&&g>=0&&g<e){var v=h*e+g,b=r[f*i+d];u+=t[v]*b}}s[l]=u}return s}var AM=function(t){var e=this.threshold(),n=EM(t,e);return n&&(n=IM(n,t.width,t.height),n=MM(n,t.width,t.height),n=TM(n,t.width,t.height),xM(t,n)),t};wu.Mask=AM;A3.Factory.addGetterSetter(wM.Node,"threshold",0,(0,SM.getNumberValidator)(),A3.Factory.afterSetFilter)});var P3=Y(Su=>{"use strict";Object.defineProperty(Su,"__esModule",{value:!0});Su.Noise=void 0;var R3=me(),OM=lt(),RM=be(),PM=function(t){var e=this.noise()*255,n=t.data,r=n.length,i=e/2,o;for(o=0;o<r;o+=4)n[o+0]+=i-2*i*Math.random(),n[o+1]+=i-2*i*Math.random(),n[o+2]+=i-2*i*Math.random()};Su.Noise=PM;R3.Factory.addGetterSetter(OM.Node,"noise",.2,(0,RM.getNumberValidator)(),R3.Factory.afterSetFilter)});var F3=Y(Du=>{"use strict";Object.defineProperty(Du,"__esModule",{value:!0});Du.Pixelate=void 0;var N3=me(),NM=st(),FM=lt(),kM=be(),LM=function(t){var e=Math.ceil(this.pixelSize()),n=t.width,r=t.height,i,o,s,a,c,l,u,f=Math.ceil(n/e),d=Math.ceil(r/e),h,g,v,b,D,I,E,O=t.data;if(e<=0){NM.Util.error("pixelSize value can not be <= 0");return}for(D=0;D<f;D+=1)for(I=0;I<d;I+=1){for(a=0,c=0,l=0,u=0,h=D*e,g=h+e,v=I*e,b=v+e,E=0,i=h;i<g;i+=1)if(!(i>=n))for(o=v;o<b;o+=1)o>=r||(s=(n*o+i)*4,a+=O[s+0],c+=O[s+1],l+=O[s+2],u+=O[s+3],E+=1);for(a=a/E,c=c/E,l=l/E,u=u/E,i=h;i<g;i+=1)if(!(i>=n))for(o=v;o<b;o+=1)o>=r||(s=(n*o+i)*4,O[s+0]=a,O[s+1]=c,O[s+2]=l,O[s+3]=u)}};Du.Pixelate=LM;N3.Factory.addGetterSetter(FM.Node,"pixelSize",8,(0,kM.getNumberValidator)(),N3.Factory.afterSetFilter)});var L3=Y(Eu=>{"use strict";Object.defineProperty(Eu,"__esModule",{value:!0});Eu.Posterize=void 0;var k3=me(),VM=lt(),jM=be(),UM=function(t){var e=Math.round(this.levels()*254)+1,n=t.data,r=n.length,i=255/e,o;for(o=0;o<r;o+=1)n[o]=Math.floor(n[o]/i)*i};Eu.Posterize=UM;k3.Factory.addGetterSetter(VM.Node,"levels",.5,(0,jM.getNumberValidator)(),k3.Factory.afterSetFilter)});var V3=Y(Iu=>{"use strict";Object.defineProperty(Iu,"__esModule",{value:!0});Iu.RGB=void 0;var xu=me(),R1=lt(),BM=be(),$M=function(t){var e=t.data,n=e.length,r=this.red(),i=this.green(),o=this.blue(),s,a;for(s=0;s<n;s+=4)a=(.34*e[s]+.5*e[s+1]+.16*e[s+2])/255,e[s]=a*r,e[s+1]=a*i,e[s+2]=a*o,e[s+3]=e[s+3]};Iu.RGB=$M;xu.Factory.addGetterSetter(R1.Node,"red",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)});xu.Factory.addGetterSetter(R1.Node,"green",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)});xu.Factory.addGetterSetter(R1.Node,"blue",0,BM.RGBComponent,xu.Factory.afterSetFilter)});var j3=Y(Tu=>{"use strict";Object.defineProperty(Tu,"__esModule",{value:!0});Tu.RGBA=void 0;var ga=me(),Mu=lt(),HM=be(),GM=function(t){var e=t.data,n=e.length,r=this.red(),i=this.green(),o=this.blue(),s=this.alpha(),a,c;for(a=0;a<n;a+=4)c=1-s,e[a]=r*s+e[a]*c,e[a+1]=i*s+e[a+1]*c,e[a+2]=o*s+e[a+2]*c};Tu.RGBA=GM;ga.Factory.addGetterSetter(Mu.Node,"red",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)});ga.Factory.addGetterSetter(Mu.Node,"green",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)});ga.Factory.addGetterSetter(Mu.Node,"blue",0,HM.RGBComponent,ga.Factory.afterSetFilter);ga.Factory.addGetterSetter(Mu.Node,"alpha",1,function(t){return this._filterUpToDate=!1,t>1?1:t<0?0:t})});var U3=Y(Au=>{"use strict";Object.defineProperty(Au,"__esModule",{value:!0});Au.Sepia=void 0;var zM=function(t){var e=t.data,n=e.length,r,i,o,s;for(r=0;r<n;r+=4)i=e[r+0],o=e[r+1],s=e[r+2],e[r+0]=Math.min(255,i*.393+o*.769+s*.189),e[r+1]=Math.min(255,i*.349+o*.686+s*.168),e[r+2]=Math.min(255,i*.272+o*.534+s*.131)};Au.Sepia=zM});var B3=Y(Ou=>{"use strict";Object.defineProperty(Ou,"__esModule",{value:!0});Ou.Solarize=void 0;var qM=function(t){var e=t.data,n=t.width,r=t.height,i=n*4,o=r;do{var s=(o-1)*i,a=n;do{var c=s+(a-1)*4,l=e[c],u=e[c+1],f=e[c+2];l>127&&(l=255-l),u>127&&(u=255-u),f>127&&(f=255-f),e[c]=l,e[c+1]=u,e[c+2]=f}while(--a)}while(--o)};Ou.Solarize=qM});var H3=Y(Ru=>{"use strict";Object.defineProperty(Ru,"__esModule",{value:!0});Ru.Threshold=void 0;var $3=me(),WM=lt(),YM=be(),KM=function(t){var e=this.threshold()*255,n=t.data,r=n.length,i;for(i=0;i<r;i+=1)n[i]=n[i]<e?0:255};Ru.Threshold=KM;$3.Factory.addGetterSetter(WM.Node,"threshold",.5,(0,YM.getNumberValidator)(),$3.Factory.afterSetFilter)});var q3=Y(Pu=>{"use strict";Object.defineProperty(Pu,"__esModule",{value:!0});Pu.Konva=void 0;var G3=m5(),XM=y5(),ZM=D5(),QM=E5(),JM=I5(),eT=M5(),z3=O5(),tT=l1(),nT=Gl(),rT=y1(),iT=N5(),oT=V5(),sT=U5(),aT=B5(),cT=D1(),lT=t3(),uT=c3(),dT=u3(),fT=h3(),hT=g3(),pT=v3(),gT=C3(),mT=b3(),vT=w3(),yT=S3(),CT=D3(),_T=E3(),bT=T3(),wT=O3(),ST=P3(),DT=F3(),ET=L3(),xT=V3(),IT=j3(),MT=U3(),TT=B3(),AT=H3();Pu.Konva=G3.Konva.Util._assign(G3.Konva,{Arc:XM.Arc,Arrow:ZM.Arrow,Circle:QM.Circle,Ellipse:JM.Ellipse,Image:eT.Image,Label:z3.Label,Tag:z3.Tag,Line:tT.Line,Path:nT.Path,Rect:rT.Rect,RegularPolygon:iT.RegularPolygon,Ring:oT.Ring,Sprite:sT.Sprite,Star:aT.Star,Text:cT.Text,TextPath:lT.TextPath,Transformer:uT.Transformer,Wedge:dT.Wedge,Filters:{Blur:fT.Blur,Brighten:hT.Brighten,Contrast:pT.Contrast,Emboss:gT.Emboss,Enhance:mT.Enhance,Grayscale:vT.Grayscale,HSL:yT.HSL,HSV:CT.HSV,Invert:_T.Invert,Kaleidoscope:bT.Kaleidoscope,Mask:wT.Mask,Noise:ST.Noise,Pixelate:DT.Pixelate,Posterize:ET.Posterize,RGB:xT.RGB,RGBA:IT.RGBA,Sepia:MT.Sepia,Solarize:TT.Solarize,Threshold:AT.Threshold}})});var P1=Y((W3,Y3)=>{"use strict";Object.defineProperty(W3,"__esModule",{value:!0});var OT=q3();Y3.exports=OT.Konva});var z6=Y((G6,a0)=>{"use strict";(function(t){if(typeof G6=="object"&&typeof a0<"u")a0.exports=t();else if(typeof define=="function"&&define.amd)define([],t);else{var e;typeof window<"u"?e=window:typeof global<"u"?e=global:typeof self<"u"?e=self:e=this,e.localforage=t()}})(function(){var t,e,n;return function r(i,o,s){function a(u,f){if(!o[u]){if(!i[u]){var d=typeof es=="function"&&es;if(!f&&d)return d(u,!0);if(c)return c(u,!0);var h=new Error("Cannot find module '"+u+"'");throw h.code="MODULE_NOT_FOUND",h}var g=o[u]={exports:{}};i[u][0].call(g.exports,function(v){var b=i[u][1][v];return a(b||v)},g,g.exports,r,i,o,s)}return o[u].exports}for(var c=typeof es=="function"&&es,l=0;l<s.length;l++)a(s[l]);return a}({1:[function(r,i,o){(function(s){"use strict";var a=s.MutationObserver||s.WebKitMutationObserver,c;if(a){var l=0,u=new a(v),f=s.document.createTextNode("");u.observe(f,{characterData:!0}),c=function(){f.data=l=++l%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var d=new s.MessageChannel;d.port1.onmessage=v,c=function(){d.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?c=function(){var D=s.document.createElement("script");D.onreadystatechange=function(){v(),D.onreadystatechange=null,D.parentNode.removeChild(D),D=null},s.document.documentElement.appendChild(D)}:c=function(){setTimeout(v,0)};var h,g=[];function v(){h=!0;for(var D,I,E=g.length;E;){for(I=g,g=[],D=-1;++D<E;)I[D]();E=g.length}h=!1}i.exports=b;function b(D){g.push(D)===1&&!h&&c()}}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(r,i,o){"use strict";var s=r(1);function a(){}var c={},l=["REJECTED"],u=["FULFILLED"],f=["PENDING"];i.exports=d;function d(S){if(typeof S!="function")throw new TypeError("resolver must be a function");this.state=f,this.queue=[],this.outcome=void 0,S!==a&&b(this,S)}d.prototype.catch=function(S){return this.then(null,S)},d.prototype.then=function(S,k){if(typeof S!="function"&&this.state===u||typeof k!="function"&&this.state===l)return this;var R=new this.constructor(a);if(this.state!==f){var j=this.state===u?S:k;g(R,j,this.outcome)}else this.queue.push(new h(R,S,k));return R};function h(S,k,R){this.promise=S,typeof k=="function"&&(this.onFulfilled=k,this.callFulfilled=this.otherCallFulfilled),typeof R=="function"&&(this.onRejected=R,this.callRejected=this.otherCallRejected)}h.prototype.callFulfilled=function(S){c.resolve(this.promise,S)},h.prototype.otherCallFulfilled=function(S){g(this.promise,this.onFulfilled,S)},h.prototype.callRejected=function(S){c.reject(this.promise,S)},h.prototype.otherCallRejected=function(S){g(this.promise,this.onRejected,S)};function g(S,k,R){s(function(){var j;try{j=k(R)}catch(B){return c.reject(S,B)}j===S?c.reject(S,new TypeError("Cannot resolve promise with itself")):c.resolve(S,j)})}c.resolve=function(S,k){var R=D(v,k);if(R.status==="error")return c.reject(S,R.value);var j=R.value;if(j)b(S,j);else{S.state=u,S.outcome=k;for(var B=-1,$=S.queue.length;++B<$;)S.queue[B].callFulfilled(k)}return S},c.reject=function(S,k){S.state=l,S.outcome=k;for(var R=-1,j=S.queue.length;++R<j;)S.queue[R].callRejected(k);return S};function v(S){var k=S&&S.then;if(S&&(typeof S=="object"||typeof S=="function")&&typeof k=="function")return function(){k.apply(S,arguments)}}function b(S,k){var R=!1;function j(we){R||(R=!0,c.reject(S,we))}function B(we){R||(R=!0,c.resolve(S,we))}function $(){k(B,j)}var ve=D($);ve.status==="error"&&j(ve.value)}function D(S,k){var R={};try{R.value=S(k),R.status="success"}catch(j){R.status="error",R.value=j}return R}d.resolve=I;function I(S){return S instanceof this?S:c.resolve(new this(a),S)}d.reject=E;function E(S){var k=new this(a);return c.reject(k,S)}d.all=O;function O(S){var k=this;if(Object.prototype.toString.call(S)!=="[object Array]")return this.reject(new TypeError("must be an array"));var R=S.length,j=!1;if(!R)return this.resolve([]);for(var B=new Array(R),$=0,ve=-1,we=new this(a);++ve<R;)je(S[ve],ve);return we;function je(xt,Ue){k.resolve(xt).then(ut,function(dt){j||(j=!0,c.reject(we,dt))});function ut(dt){B[Ue]=dt,++$===R&&!j&&(j=!0,c.resolve(we,B))}}}d.race=U;function U(S){var k=this;if(Object.prototype.toString.call(S)!=="[object Array]")return this.reject(new TypeError("must be an array"));var R=S.length,j=!1;if(!R)return this.resolve([]);for(var B=-1,$=new this(a);++B<R;)ve(S[B]);return $;function ve(we){k.resolve(we).then(function(je){j||(j=!0,c.resolve($,je))},function(je){j||(j=!0,c.reject($,je))})}}},{1:1}],3:[function(r,i,o){(function(s){"use strict";typeof s.Promise!="function"&&(s.Promise=r(2))}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(r,i,o){"use strict";var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p};function a(p,y){if(!(p instanceof y))throw new TypeError("Cannot call a class as a function")}function c(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var l=c();function u(){try{if(!l||!l.open)return!1;var p=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),y=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!p||y)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function f(p,y){p=p||[],y=y||{};try{return new Blob(p,y)}catch(C){if(C.name!=="TypeError")throw C;for(var m=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,_=new m,w=0;w<p.length;w+=1)_.append(p[w]);return _.getBlob(y.type)}}typeof Promise>"u"&&r(3);var d=Promise;function h(p,y){y&&p.then(function(m){y(null,m)},function(m){y(m)})}function g(p,y,m){typeof y=="function"&&p.then(y),typeof m=="function"&&p.catch(m)}function v(p){return typeof p!="string"&&(console.warn(p+" used as a key, but it is not a string."),p=String(p)),p}function b(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var D="local-forage-detect-blob-support",I=void 0,E={},O=Object.prototype.toString,U="readonly",S="readwrite";function k(p){for(var y=p.length,m=new ArrayBuffer(y),_=new Uint8Array(m),w=0;w<y;w++)_[w]=p.charCodeAt(w);return m}function R(p){return new d(function(y){var m=p.transaction(D,S),_=f([""]);m.objectStore(D).put(_,"key"),m.onabort=function(w){w.preventDefault(),w.stopPropagation(),y(!1)},m.oncomplete=function(){var w=navigator.userAgent.match(/Chrome\/(\d+)/),C=navigator.userAgent.match(/Edge\//);y(C||!w||parseInt(w[1],10)>=43)}}).catch(function(){return!1})}function j(p){return typeof I=="boolean"?d.resolve(I):R(p).then(function(y){return I=y,I})}function B(p){var y=E[p.name],m={};m.promise=new d(function(_,w){m.resolve=_,m.reject=w}),y.deferredOperations.push(m),y.dbReady?y.dbReady=y.dbReady.then(function(){return m.promise}):y.dbReady=m.promise}function $(p){var y=E[p.name],m=y.deferredOperations.pop();if(m)return m.resolve(),m.promise}function ve(p,y){var m=E[p.name],_=m.deferredOperations.pop();if(_)return _.reject(y),_.promise}function we(p,y){return new d(function(m,_){if(E[p.name]=E[p.name]||gn(),p.db)if(y)B(p),p.db.close();else return m(p.db);var w=[p.name];y&&w.push(p.version);var C=l.open.apply(l,w);y&&(C.onupgradeneeded=function(M){var P=C.result;try{P.createObjectStore(p.storeName),M.oldVersion<=1&&P.createObjectStore(D)}catch(N){if(N.name==="ConstraintError")console.warn('The database "'+p.name+'" has been upgraded from version '+M.oldVersion+" to version "+M.newVersion+', but the storage "'+p.storeName+'" already exists.');else throw N}}),C.onerror=function(M){M.preventDefault(),_(C.error)},C.onsuccess=function(){var M=C.result;M.onversionchange=function(P){P.target.close()},m(M),$(p)}})}function je(p){return we(p,!1)}function xt(p){return we(p,!0)}function Ue(p,y){if(!p.db)return!0;var m=!p.db.objectStoreNames.contains(p.storeName),_=p.version<p.db.version,w=p.version>p.db.version;if(_&&(p.version!==y&&console.warn('The database "'+p.name+`" can't be downgraded from version `+p.db.version+" to version "+p.version+"."),p.version=p.db.version),w||m){if(m){var C=p.db.version+1;C>p.version&&(p.version=C)}return!0}return!1}function ut(p){return new d(function(y,m){var _=new FileReader;_.onerror=m,_.onloadend=function(w){var C=btoa(w.target.result||"");y({__local_forage_encoded_blob:!0,data:C,type:p.type})},_.readAsBinaryString(p)})}function dt(p){var y=k(atob(p.data));return f([y],{type:p.type})}function Ii(p){return p&&p.__local_forage_encoded_blob}function Ae(p){var y=this,m=y._initReady().then(function(){var _=E[y._dbInfo.name];if(_&&_.dbReady)return _.dbReady});return g(m,p,p),m}function Ke(p){B(p);for(var y=E[p.name],m=y.forages,_=0;_<m.length;_++){var w=m[_];w._dbInfo.db&&(w._dbInfo.db.close(),w._dbInfo.db=null)}return p.db=null,je(p).then(function(C){return p.db=C,Ue(p)?xt(p):C}).then(function(C){p.db=y.db=C;for(var M=0;M<m.length;M++)m[M]._dbInfo.db=C}).catch(function(C){throw ve(p,C),C})}function Xe(p,y,m,_){_===void 0&&(_=1);try{var w=p.db.transaction(p.storeName,y);m(null,w)}catch(C){if(_>0&&(!p.db||C.name==="InvalidStateError"||C.name==="NotFoundError"))return d.resolve().then(function(){if(!p.db||C.name==="NotFoundError"&&!p.db.objectStoreNames.contains(p.storeName)&&p.version<=p.db.version)return p.db&&(p.version=p.db.version+1),xt(p)}).then(function(){return Ke(p).then(function(){Xe(p,y,m,_-1)})}).catch(m);m(C)}}function gn(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function Pn(p){var y=this,m={db:null};if(p)for(var _ in p)m[_]=p[_];var w=E[m.name];w||(w=gn(),E[m.name]=w),w.forages.push(y),y._initReady||(y._initReady=y.ready,y.ready=Ae);var C=[];function M(){return d.resolve()}for(var P=0;P<w.forages.length;P++){var N=w.forages[P];N!==y&&C.push(N._initReady().catch(M))}var F=w.forages.slice(0);return d.all(C).then(function(){return m.db=w.db,je(m)}).then(function(L){return m.db=L,Ue(m,y._defaultConfig.version)?xt(m):L}).then(function(L){m.db=w.db=L,y._dbInfo=m;for(var W=0;W<F.length;W++){var ye=F[W];ye!==y&&(ye._dbInfo.db=m.db,ye._dbInfo.version=m.version)}})}function p8(p,y){var m=this;p=v(p);var _=new d(function(w,C){m.ready().then(function(){Xe(m._dbInfo,U,function(M,P){if(M)return C(M);try{var N=P.objectStore(m._dbInfo.storeName),F=N.get(p);F.onsuccess=function(){var L=F.result;L===void 0&&(L=null),Ii(L)&&(L=dt(L)),w(L)},F.onerror=function(){C(F.error)}}catch(L){C(L)}})}).catch(C)});return h(_,y),_}function g8(p,y){var m=this,_=new d(function(w,C){m.ready().then(function(){Xe(m._dbInfo,U,function(M,P){if(M)return C(M);try{var N=P.objectStore(m._dbInfo.storeName),F=N.openCursor(),L=1;F.onsuccess=function(){var W=F.result;if(W){var ye=W.value;Ii(ye)&&(ye=dt(ye));var Pe=p(ye,W.key,L++);Pe!==void 0?w(Pe):W.continue()}else w()},F.onerror=function(){C(F.error)}}catch(W){C(W)}})}).catch(C)});return h(_,y),_}function m8(p,y,m){var _=this;p=v(p);var w=new d(function(C,M){var P;_.ready().then(function(){return P=_._dbInfo,O.call(y)==="[object Blob]"?j(P.db).then(function(N){return N?y:ut(y)}):y}).then(function(N){Xe(_._dbInfo,S,function(F,L){if(F)return M(F);try{var W=L.objectStore(_._dbInfo.storeName);N===null&&(N=void 0);var ye=W.put(N,p);L.oncomplete=function(){N===void 0&&(N=null),C(N)},L.onabort=L.onerror=function(){var Pe=ye.error?ye.error:ye.transaction.error;M(Pe)}}catch(Pe){M(Pe)}})}).catch(M)});return h(w,m),w}function v8(p,y){var m=this;p=v(p);var _=new d(function(w,C){m.ready().then(function(){Xe(m._dbInfo,S,function(M,P){if(M)return C(M);try{var N=P.objectStore(m._dbInfo.storeName),F=N.delete(p);P.oncomplete=function(){w()},P.onerror=function(){C(F.error)},P.onabort=function(){var L=F.error?F.error:F.transaction.error;C(L)}}catch(L){C(L)}})}).catch(C)});return h(_,y),_}function y8(p){var y=this,m=new d(function(_,w){y.ready().then(function(){Xe(y._dbInfo,S,function(C,M){if(C)return w(C);try{var P=M.objectStore(y._dbInfo.storeName),N=P.clear();M.oncomplete=function(){_()},M.onabort=M.onerror=function(){var F=N.error?N.error:N.transaction.error;w(F)}}catch(F){w(F)}})}).catch(w)});return h(m,p),m}function C8(p){var y=this,m=new d(function(_,w){y.ready().then(function(){Xe(y._dbInfo,U,function(C,M){if(C)return w(C);try{var P=M.objectStore(y._dbInfo.storeName),N=P.count();N.onsuccess=function(){_(N.result)},N.onerror=function(){w(N.error)}}catch(F){w(F)}})}).catch(w)});return h(m,p),m}function _8(p,y){var m=this,_=new d(function(w,C){if(p<0){w(null);return}m.ready().then(function(){Xe(m._dbInfo,U,function(M,P){if(M)return C(M);try{var N=P.objectStore(m._dbInfo.storeName),F=!1,L=N.openKeyCursor();L.onsuccess=function(){var W=L.result;if(!W){w(null);return}p===0||F?w(W.key):(F=!0,W.advance(p))},L.onerror=function(){C(L.error)}}catch(W){C(W)}})}).catch(C)});return h(_,y),_}function b8(p){var y=this,m=new d(function(_,w){y.ready().then(function(){Xe(y._dbInfo,U,function(C,M){if(C)return w(C);try{var P=M.objectStore(y._dbInfo.storeName),N=P.openKeyCursor(),F=[];N.onsuccess=function(){var L=N.result;if(!L){_(F);return}F.push(L.key),L.continue()},N.onerror=function(){w(N.error)}}catch(L){w(L)}})}).catch(w)});return h(m,p),m}function w8(p,y){y=b.apply(this,arguments);var m=this.config();p=typeof p!="function"&&p||{},p.name||(p.name=p.name||m.name,p.storeName=p.storeName||m.storeName);var _=this,w;if(!p.name)w=d.reject("Invalid arguments");else{var C=p.name===m.name&&_._dbInfo.db,M=C?d.resolve(_._dbInfo.db):je(p).then(function(P){var N=E[p.name],F=N.forages;N.db=P;for(var L=0;L<F.length;L++)F[L]._dbInfo.db=P;return P});p.storeName?w=M.then(function(P){if(P.objectStoreNames.contains(p.storeName)){var N=P.version+1;B(p);var F=E[p.name],L=F.forages;P.close();for(var W=0;W<L.length;W++){var ye=L[W];ye._dbInfo.db=null,ye._dbInfo.version=N}var Pe=new d(function(Le,gt){var ft=l.open(p.name,N);ft.onerror=function(tn){var Jo=ft.result;Jo.close(),gt(tn)},ft.onupgradeneeded=function(){var tn=ft.result;tn.deleteObjectStore(p.storeName)},ft.onsuccess=function(){var tn=ft.result;tn.close(),Le(tn)}});return Pe.then(function(Le){F.db=Le;for(var gt=0;gt<L.length;gt++){var ft=L[gt];ft._dbInfo.db=Le,$(ft._dbInfo)}}).catch(function(Le){throw(ve(p,Le)||d.resolve()).catch(function(){}),Le})}}):w=M.then(function(P){B(p);var N=E[p.name],F=N.forages;P.close();for(var L=0;L<F.length;L++){var W=F[L];W._dbInfo.db=null}var ye=new d(function(Pe,Le){var gt=l.deleteDatabase(p.name);gt.onerror=function(){var ft=gt.result;ft&&ft.close(),Le(gt.error)},gt.onblocked=function(){console.warn('dropInstance blocked for database "'+p.name+'" until all open connections are closed')},gt.onsuccess=function(){var ft=gt.result;ft&&ft.close(),Pe(ft)}});return ye.then(function(Pe){N.db=Pe;for(var Le=0;Le<F.length;Le++){var gt=F[Le];$(gt._dbInfo)}}).catch(function(Pe){throw(ve(p,Pe)||d.resolve()).catch(function(){}),Pe})})}return h(w,y),w}var S8={_driver:"asyncStorage",_initStorage:Pn,_support:u(),iterate:g8,getItem:p8,setItem:m8,removeItem:v8,clear:y8,length:C8,key:_8,keys:b8,dropInstance:w8};function D8(){return typeof openDatabase=="function"}var xr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",E8="~~local_forage_type~",l0=/^~~local_forage_type~([^~]+)~/,ya="__lfsc__:",Zu=ya.length,Qu="arbf",Ju="blob",u0="si08",d0="ui08",f0="uic8",h0="si16",p0="si32",g0="ur16",m0="ui32",v0="fl32",y0="fl64",C0=Zu+Qu.length,_0=Object.prototype.toString;function b0(p){var y=p.length*.75,m=p.length,_,w=0,C,M,P,N;p[p.length-1]==="="&&(y--,p[p.length-2]==="="&&y--);var F=new ArrayBuffer(y),L=new Uint8Array(F);for(_=0;_<m;_+=4)C=xr.indexOf(p[_]),M=xr.indexOf(p[_+1]),P=xr.indexOf(p[_+2]),N=xr.indexOf(p[_+3]),L[w++]=C<<2|M>>4,L[w++]=(M&15)<<4|P>>2,L[w++]=(P&3)<<6|N&63;return F}function ed(p){var y=new Uint8Array(p),m="",_;for(_=0;_<y.length;_+=3)m+=xr[y[_]>>2],m+=xr[(y[_]&3)<<4|y[_+1]>>4],m+=xr[(y[_+1]&15)<<2|y[_+2]>>6],m+=xr[y[_+2]&63];return y.length%3===2?m=m.substring(0,m.length-1)+"=":y.length%3===1&&(m=m.substring(0,m.length-2)+"=="),m}function x8(p,y){var m="";if(p&&(m=_0.call(p)),p&&(m==="[object ArrayBuffer]"||p.buffer&&_0.call(p.buffer)==="[object ArrayBuffer]")){var _,w=ya;p instanceof ArrayBuffer?(_=p,w+=Qu):(_=p.buffer,m==="[object Int8Array]"?w+=u0:m==="[object Uint8Array]"?w+=d0:m==="[object Uint8ClampedArray]"?w+=f0:m==="[object Int16Array]"?w+=h0:m==="[object Uint16Array]"?w+=g0:m==="[object Int32Array]"?w+=p0:m==="[object Uint32Array]"?w+=m0:m==="[object Float32Array]"?w+=v0:m==="[object Float64Array]"?w+=y0:y(new Error("Failed to get type for BinaryArray"))),y(w+ed(_))}else if(m==="[object Blob]"){var C=new FileReader;C.onload=function(){var M=E8+p.type+"~"+ed(this.result);y(ya+Ju+M)},C.readAsArrayBuffer(p)}else try{y(JSON.stringify(p))}catch(M){console.error("Couldn't convert value into a JSON string: ",p),y(null,M)}}function I8(p){if(p.substring(0,Zu)!==ya)return JSON.parse(p);var y=p.substring(C0),m=p.substring(Zu,C0),_;if(m===Ju&&l0.test(y)){var w=y.match(l0);_=w[1],y=y.substring(w[0].length)}var C=b0(y);switch(m){case Qu:return C;case Ju:return f([C],{type:_});case u0:return new Int8Array(C);case d0:return new Uint8Array(C);case f0:return new Uint8ClampedArray(C);case h0:return new Int16Array(C);case g0:return new Uint16Array(C);case p0:return new Int32Array(C);case m0:return new Uint32Array(C);case v0:return new Float32Array(C);case y0:return new Float64Array(C);default:throw new Error("Unkown type: "+m)}}var td={serialize:x8,deserialize:I8,stringToBuffer:b0,bufferToString:ed};function w0(p,y,m,_){p.executeSql("CREATE TABLE IF NOT EXISTS "+y.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],m,_)}function M8(p){var y=this,m={db:null};if(p)for(var _ in p)m[_]=typeof p[_]!="string"?p[_].toString():p[_];var w=new d(function(C,M){try{m.db=openDatabase(m.name,String(m.version),m.description,m.size)}catch(P){return M(P)}m.db.transaction(function(P){w0(P,m,function(){y._dbInfo=m,C()},function(N,F){M(F)})},M)});return m.serializer=td,w}function Ir(p,y,m,_,w,C){p.executeSql(m,_,w,function(M,P){P.code===P.SYNTAX_ERR?M.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[y.storeName],function(N,F){F.rows.length?C(N,P):w0(N,y,function(){N.executeSql(m,_,w,C)},C)},C):C(M,P)},C)}function T8(p,y){var m=this;p=v(p);var _=new d(function(w,C){m.ready().then(function(){var M=m._dbInfo;M.db.transaction(function(P){Ir(P,M,"SELECT * FROM "+M.storeName+" WHERE key = ? LIMIT 1",[p],function(N,F){var L=F.rows.length?F.rows.item(0).value:null;L&&(L=M.serializer.deserialize(L)),w(L)},function(N,F){C(F)})})}).catch(C)});return h(_,y),_}function A8(p,y){var m=this,_=new d(function(w,C){m.ready().then(function(){var M=m._dbInfo;M.db.transaction(function(P){Ir(P,M,"SELECT * FROM "+M.storeName,[],function(N,F){for(var L=F.rows,W=L.length,ye=0;ye<W;ye++){var Pe=L.item(ye),Le=Pe.value;if(Le&&(Le=M.serializer.deserialize(Le)),Le=p(Le,Pe.key,ye+1),Le!==void 0){w(Le);return}}w()},function(N,F){C(F)})})}).catch(C)});return h(_,y),_}function S0(p,y,m,_){var w=this;p=v(p);var C=new d(function(M,P){w.ready().then(function(){y===void 0&&(y=null);var N=y,F=w._dbInfo;F.serializer.serialize(y,function(L,W){W?P(W):F.db.transaction(function(ye){Ir(ye,F,"INSERT OR REPLACE INTO "+F.storeName+" (key, value) VALUES (?, ?)",[p,L],function(){M(N)},function(Pe,Le){P(Le)})},function(ye){if(ye.code===ye.QUOTA_ERR){if(_>0){M(S0.apply(w,[p,N,m,_-1]));return}P(ye)}})})}).catch(P)});return h(C,m),C}function O8(p,y,m){return S0.apply(this,[p,y,m,1])}function R8(p,y){var m=this;p=v(p);var _=new d(function(w,C){m.ready().then(function(){var M=m._dbInfo;M.db.transaction(function(P){Ir(P,M,"DELETE FROM "+M.storeName+" WHERE key = ?",[p],function(){w()},function(N,F){C(F)})})}).catch(C)});return h(_,y),_}function P8(p){var y=this,m=new d(function(_,w){y.ready().then(function(){var C=y._dbInfo;C.db.transaction(function(M){Ir(M,C,"DELETE FROM "+C.storeName,[],function(){_()},function(P,N){w(N)})})}).catch(w)});return h(m,p),m}function N8(p){var y=this,m=new d(function(_,w){y.ready().then(function(){var C=y._dbInfo;C.db.transaction(function(M){Ir(M,C,"SELECT COUNT(key) as c FROM "+C.storeName,[],function(P,N){var F=N.rows.item(0).c;_(F)},function(P,N){w(N)})})}).catch(w)});return h(m,p),m}function F8(p,y){var m=this,_=new d(function(w,C){m.ready().then(function(){var M=m._dbInfo;M.db.transaction(function(P){Ir(P,M,"SELECT key FROM "+M.storeName+" WHERE id = ? LIMIT 1",[p+1],function(N,F){var L=F.rows.length?F.rows.item(0).key:null;w(L)},function(N,F){C(F)})})}).catch(C)});return h(_,y),_}function k8(p){var y=this,m=new d(function(_,w){y.ready().then(function(){var C=y._dbInfo;C.db.transaction(function(M){Ir(M,C,"SELECT key FROM "+C.storeName,[],function(P,N){for(var F=[],L=0;L<N.rows.length;L++)F.push(N.rows.item(L).key);_(F)},function(P,N){w(N)})})}).catch(w)});return h(m,p),m}function L8(p){return new d(function(y,m){p.transaction(function(_){_.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(w,C){for(var M=[],P=0;P<C.rows.length;P++)M.push(C.rows.item(P).name);y({db:p,storeNames:M})},function(w,C){m(C)})},function(_){m(_)})})}function V8(p,y){y=b.apply(this,arguments);var m=this.config();p=typeof p!="function"&&p||{},p.name||(p.name=p.name||m.name,p.storeName=p.storeName||m.storeName);var _=this,w;return p.name?w=new d(function(C){var M;p.name===m.name?M=_._dbInfo.db:M=openDatabase(p.name,"","",0),p.storeName?C({db:M,storeNames:[p.storeName]}):C(L8(M))}).then(function(C){return new d(function(M,P){C.db.transaction(function(N){function F(Pe){return new d(function(Le,gt){N.executeSql("DROP TABLE IF EXISTS "+Pe,[],function(){Le()},function(ft,tn){gt(tn)})})}for(var L=[],W=0,ye=C.storeNames.length;W<ye;W++)L.push(F(C.storeNames[W]));d.all(L).then(function(){M()}).catch(function(Pe){P(Pe)})},function(N){P(N)})})}):w=d.reject("Invalid arguments"),h(w,y),w}var j8={_driver:"webSQLStorage",_initStorage:M8,_support:D8(),iterate:A8,getItem:T8,setItem:O8,removeItem:R8,clear:P8,length:N8,key:F8,keys:k8,dropInstance:V8};function U8(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function D0(p,y){var m=p.name+"/";return p.storeName!==y.storeName&&(m+=p.storeName+"/"),m}function B8(){var p="_localforage_support_test";try{return localStorage.setItem(p,!0),localStorage.removeItem(p),!1}catch{return!0}}function $8(){return!B8()||localStorage.length>0}function H8(p){var y=this,m={};if(p)for(var _ in p)m[_]=p[_];return m.keyPrefix=D0(p,y._defaultConfig),$8()?(y._dbInfo=m,m.serializer=td,d.resolve()):d.reject()}function G8(p){var y=this,m=y.ready().then(function(){for(var _=y._dbInfo.keyPrefix,w=localStorage.length-1;w>=0;w--){var C=localStorage.key(w);C.indexOf(_)===0&&localStorage.removeItem(C)}});return h(m,p),m}function z8(p,y){var m=this;p=v(p);var _=m.ready().then(function(){var w=m._dbInfo,C=localStorage.getItem(w.keyPrefix+p);return C&&(C=w.serializer.deserialize(C)),C});return h(_,y),_}function q8(p,y){var m=this,_=m.ready().then(function(){for(var w=m._dbInfo,C=w.keyPrefix,M=C.length,P=localStorage.length,N=1,F=0;F<P;F++){var L=localStorage.key(F);if(L.indexOf(C)===0){var W=localStorage.getItem(L);if(W&&(W=w.serializer.deserialize(W)),W=p(W,L.substring(M),N++),W!==void 0)return W}}});return h(_,y),_}function W8(p,y){var m=this,_=m.ready().then(function(){var w=m._dbInfo,C;try{C=localStorage.key(p)}catch{C=null}return C&&(C=C.substring(w.keyPrefix.length)),C});return h(_,y),_}function Y8(p){var y=this,m=y.ready().then(function(){for(var _=y._dbInfo,w=localStorage.length,C=[],M=0;M<w;M++){var P=localStorage.key(M);P.indexOf(_.keyPrefix)===0&&C.push(P.substring(_.keyPrefix.length))}return C});return h(m,p),m}function K8(p){var y=this,m=y.keys().then(function(_){return _.length});return h(m,p),m}function X8(p,y){var m=this;p=v(p);var _=m.ready().then(function(){var w=m._dbInfo;localStorage.removeItem(w.keyPrefix+p)});return h(_,y),_}function Z8(p,y,m){var _=this;p=v(p);var w=_.ready().then(function(){y===void 0&&(y=null);var C=y;return new d(function(M,P){var N=_._dbInfo;N.serializer.serialize(y,function(F,L){if(L)P(L);else try{localStorage.setItem(N.keyPrefix+p,F),M(C)}catch(W){(W.name==="QuotaExceededError"||W.name==="NS_ERROR_DOM_QUOTA_REACHED")&&P(W),P(W)}})})});return h(w,m),w}function Q8(p,y){if(y=b.apply(this,arguments),p=typeof p!="function"&&p||{},!p.name){var m=this.config();p.name=p.name||m.name,p.storeName=p.storeName||m.storeName}var _=this,w;return p.name?w=new d(function(C){p.storeName?C(D0(p,_._defaultConfig)):C(p.name+"/")}).then(function(C){for(var M=localStorage.length-1;M>=0;M--){var P=localStorage.key(M);P.indexOf(C)===0&&localStorage.removeItem(P)}}):w=d.reject("Invalid arguments"),h(w,y),w}var J8={_driver:"localStorageWrapper",_initStorage:H8,_support:U8(),iterate:q8,getItem:z8,setItem:Z8,removeItem:X8,clear:G8,length:K8,key:W8,keys:Y8,dropInstance:Q8},ey=function(y,m){return y===m||typeof y=="number"&&typeof m=="number"&&isNaN(y)&&isNaN(m)},ty=function(y,m){for(var _=y.length,w=0;w<_;){if(ey(y[w],m))return!0;w++}return!1},E0=Array.isArray||function(p){return Object.prototype.toString.call(p)==="[object Array]"},Qo={},x0={},Mi={INDEXEDDB:S8,WEBSQL:j8,LOCALSTORAGE:J8},ny=[Mi.INDEXEDDB._driver,Mi.WEBSQL._driver,Mi.LOCALSTORAGE._driver],Ca=["dropInstance"],nd=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Ca),ry={description:"",driver:ny.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function iy(p,y){p[y]=function(){var m=arguments;return p.ready().then(function(){return p[y].apply(p,m)})}}function rd(){for(var p=1;p<arguments.length;p++){var y=arguments[p];if(y)for(var m in y)y.hasOwnProperty(m)&&(E0(y[m])?arguments[0][m]=y[m].slice():arguments[0][m]=y[m])}return arguments[0]}var oy=function(){function p(y){a(this,p);for(var m in Mi)if(Mi.hasOwnProperty(m)){var _=Mi[m],w=_._driver;this[m]=w,Qo[w]||this.defineDriver(_)}this._defaultConfig=rd({},ry),this._config=rd({},this._defaultConfig,y),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return p.prototype.config=function(m){if((typeof m>"u"?"undefined":s(m))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var _ in m){if(_==="storeName"&&(m[_]=m[_].replace(/\W/g,"_")),_==="version"&&typeof m[_]!="number")return new Error("Database version must be a number.");this._config[_]=m[_]}return"driver"in m&&m.driver?this.setDriver(this._config.driver):!0}else return typeof m=="string"?this._config[m]:this._config},p.prototype.defineDriver=function(m,_,w){var C=new d(function(M,P){try{var N=m._driver,F=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!m._driver){P(F);return}for(var L=nd.concat("_initStorage"),W=0,ye=L.length;W<ye;W++){var Pe=L[W],Le=!ty(Ca,Pe);if((Le||m[Pe])&&typeof m[Pe]!="function"){P(F);return}}var gt=function(){for(var Jo=function(cy){return function(){var ly=new Error("Method "+cy+" is not implemented by the current driver"),I0=d.reject(ly);return h(I0,arguments[arguments.length-1]),I0}},id=0,ay=Ca.length;id<ay;id++){var od=Ca[id];m[od]||(m[od]=Jo(od))}};gt();var ft=function(Jo){Qo[N]&&console.info("Redefining LocalForage driver: "+N),Qo[N]=m,x0[N]=Jo,M()};"_support"in m?m._support&&typeof m._support=="function"?m._support().then(ft,P):ft(!!m._support):ft(!0)}catch(tn){P(tn)}});return g(C,_,w),C},p.prototype.driver=function(){return this._driver||null},p.prototype.getDriver=function(m,_,w){var C=Qo[m]?d.resolve(Qo[m]):d.reject(new Error("Driver not found."));return g(C,_,w),C},p.prototype.getSerializer=function(m){var _=d.resolve(td);return g(_,m),_},p.prototype.ready=function(m){var _=this,w=_._driverSet.then(function(){return _._ready===null&&(_._ready=_._initDriver()),_._ready});return g(w,m,m),w},p.prototype.setDriver=function(m,_,w){var C=this;E0(m)||(m=[m]);var M=this._getSupportedDrivers(m);function P(){C._config.driver=C.driver()}function N(W){return C._extend(W),P(),C._ready=C._initStorage(C._config),C._ready}function F(W){return function(){var ye=0;function Pe(){for(;ye<W.length;){var Le=W[ye];return ye++,C._dbInfo=null,C._ready=null,C.getDriver(Le).then(N).catch(Pe)}P();var gt=new Error("No available storage method found.");return C._driverSet=d.reject(gt),C._driverSet}return Pe()}}var L=this._driverSet!==null?this._driverSet.catch(function(){return d.resolve()}):d.resolve();return this._driverSet=L.then(function(){var W=M[0];return C._dbInfo=null,C._ready=null,C.getDriver(W).then(function(ye){C._driver=ye._driver,P(),C._wrapLibraryMethodsWithReady(),C._initDriver=F(M)})}).catch(function(){P();var W=new Error("No available storage method found.");return C._driverSet=d.reject(W),C._driverSet}),g(this._driverSet,_,w),this._driverSet},p.prototype.supports=function(m){return!!x0[m]},p.prototype._extend=function(m){rd(this,m)},p.prototype._getSupportedDrivers=function(m){for(var _=[],w=0,C=m.length;w<C;w++){var M=m[w];this.supports(M)&&_.push(M)}return _},p.prototype._wrapLibraryMethodsWithReady=function(){for(var m=0,_=nd.length;m<_;m++)iy(this,nd[m])},p.prototype.createInstance=function(m){return new p(m)},p}(),sy=new oy;i.exports=sy},{3:3}]},{},[4])(4)})});var A0=null;var ud=1;function $t(t){let e=A0;return A0=t,e}var O0={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function vy(t){if(!(hd(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===ud)){if(!t.producerMustRecompute(t)&&!dd(t)){t.dirty=!1,t.lastCleanEpoch=ud;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=ud}}function R0(t){return t&&(t.nextProducerIndex=0),$t(t)}function P0(t,e){if($t(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(hd(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)fd(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function dd(t){ba(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(vy(n),r!==n.version))return!0}return!1}function N0(t){if(ba(t),hd(t))for(let e=0;e<t.producerNode.length;e++)fd(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function fd(t,e){if(yy(t),ba(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)fd(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];ba(i),i.producerIndexOfThis[r]=e}}function hd(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function ba(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function yy(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function Cy(){throw new Error}var _y=Cy;function F0(t){_y=t}function le(t){return typeof t=="function"}function Ti(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var wa=Ti(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Zr(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var mt=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(le(r))try{r()}catch(o){e=o instanceof wa?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{k0(o)}catch(s){e=e??[],s instanceof wa?e=[...e,...s.errors]:e.push(s)}}if(e)throw new wa(e)}}add(e){var n;if(e&&e!==this)if(this.closed)k0(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Zr(n,e)}remove(e){let{_finalizers:n}=this;n&&Zr(n,e),e instanceof t&&e._removeParent(this)}};mt.EMPTY=(()=>{let t=new mt;return t.closed=!0,t})();var pd=mt.EMPTY;function Sa(t){return t instanceof mt||t&&"closed"in t&&le(t.remove)&&le(t.add)&&le(t.unsubscribe)}function k0(t){le(t)?t():t.unsubscribe()}var mn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ai={setTimeout(t,e,...n){let{delegate:r}=Ai;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Ai;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Da(t){Ai.setTimeout(()=>{let{onUnhandledError:e}=mn;if(e)e(t);else throw t})}function ts(){}var L0=(()=>gd("C",void 0,void 0))();function V0(t){return gd("E",void 0,t)}function j0(t){return gd("N",t,void 0)}function gd(t,e,n){return{kind:t,value:e,error:n}}var Qr=null;function Oi(t){if(mn.useDeprecatedSynchronousErrorHandling){let e=!Qr;if(e&&(Qr={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Qr;if(Qr=null,n)throw r}}else t()}function U0(t){mn.useDeprecatedSynchronousErrorHandling&&Qr&&(Qr.errorThrown=!0,Qr.error=t)}var Jr=class extends mt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Sa(e)&&e.add(this)):this.destination=Sy}static create(e,n,r){return new rr(e,n,r)}next(e){this.isStopped?vd(j0(e),this):this._next(e)}error(e){this.isStopped?vd(V0(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?vd(L0,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},by=Function.prototype.bind;function md(t,e){return by.call(t,e)}var yd=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Ea(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Ea(r)}else Ea(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Ea(n)}}},rr=class extends Jr{constructor(e,n,r){super();let i;if(le(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&mn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&md(e.next,o),error:e.error&&md(e.error,o),complete:e.complete&&md(e.complete,o)}):i=e}this.destination=new yd(i)}};function Ea(t){mn.useDeprecatedSynchronousErrorHandling?U0(t):Da(t)}function wy(t){throw t}function vd(t,e){let{onStoppedNotification:n}=mn;n&&Ai.setTimeout(()=>n(t,e))}var Sy={closed:!0,next:ts,error:wy,complete:ts};var Ri=(()=>typeof Symbol=="function"&&Symbol.observable||"@@observable")();function Ht(t){return t}function ns(...t){return Cd(t)}function Cd(t){return t.length===0?Ht:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var De=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=Ey(n)?n:new rr(n,r,i);return Oi(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=B0(r),new r((i,o)=>{let s=new rr({next:a=>{try{n(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Ri](){return this}pipe(...n){return Cd(n)(this)}toPromise(n){return n=B0(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function B0(t){var e;return(e=t??mn.Promise)!==null&&e!==void 0?e:Promise}function Dy(t){return t&&le(t.next)&&le(t.error)&&le(t.complete)}function Ey(t){return t&&t instanceof Jr||Dy(t)&&Sa(t)}function _d(t){return le(t?.lift)}function ue(t){return e=>{if(_d(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function fe(t,e,n,r,i){return new bd(t,e,n,r,i)}var bd=class extends Jr{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Pi(){return ue((t,e)=>{let n=null;t._refCount++;let r=fe(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var Ni=class extends De{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,_d(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new mt;let n=this.getSubject();e.add(this.source.subscribe(fe(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=mt.EMPTY)}return e}refCount(){return Pi()(this)}};var $0=Ti(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Oe=(()=>{class t extends De{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new xa(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new $0}next(n){Oi(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Oi(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Oi(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?pd:(this.currentObservers=null,o.push(n),new mt(()=>{this.currentObservers=null,Zr(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new De;return n.source=this,n}}return t.create=(e,n)=>new xa(e,n),t})(),xa=class extends Oe{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:pd}};var qe=class extends Oe{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var rs={now(){return(rs.delegate||Date).now()},delegate:void 0};var Ia=class extends Oe{constructor(e=1/0,n=1/0,r=rs){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){let{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;n||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){let{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=n.now(),a=0;for(let c=1;c<r.length&&r[c]<=s;c+=2)a=c;a&&r.splice(0,a+1)}}};var Ma=class extends mt{constructor(e,n){super()}schedule(e,n=0){return this}};var is={setInterval(t,e,...n){let{delegate:r}=is;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=is;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var Ta=class extends Ma{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return is.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&is.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Zr(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var Fi=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};Fi.now=rs.now;var Aa=class extends Fi{constructor(e,n=Fi.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var os=new Aa(Ta),H0=os;var qt=new De(t=>t.complete());function Oa(t){return t&&le(t.schedule)}function wd(t){return t[t.length-1]}function G0(t){return le(wd(t))?t.pop():void 0}function Nn(t){return Oa(wd(t))?t.pop():void 0}function z0(t,e){return typeof wd(t)=="number"?t.pop():e}function W0(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{l(r.next(u))}catch(f){s(f)}}function c(u){try{l(r.throw(u))}catch(f){s(f)}}function l(u){u.done?o(u.value):i(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function q0(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ei(t){return this instanceof ei?(this.v=t,this):new ei(t)}function Y0(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(d){r[d]&&(i[d]=function(h){return new Promise(function(g,v){o.push([d,h,g,v])>1||a(d,h)})})}function a(d,h){try{c(r[d](h))}catch(g){f(o[0][3],g)}}function c(d){d.value instanceof ei?Promise.resolve(d.value.v).then(l,u):f(o[0][2],d)}function l(d){a("next",d)}function u(d){a("throw",d)}function f(d,h){d(h),o.shift(),o.length&&a(o[0][0],o[0][1])}}function K0(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof q0=="function"?q0(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,c){s=t[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(l){o({value:l,done:a})},s)}}var Ra=t=>t&&typeof t.length=="number"&&typeof t!="function";function Pa(t){return le(t?.then)}function Na(t){return le(t[Ri])}function Fa(t){return Symbol.asyncIterator&&le(t?.[Symbol.asyncIterator])}function ka(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function xy(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var La=xy();function Va(t){return le(t?.[La])}function ja(t){return Y0(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield ei(n.read());if(i)return yield ei(void 0);yield yield ei(r)}}finally{n.releaseLock()}})}function Ua(t){return le(t?.getReader)}function We(t){if(t instanceof De)return t;if(t!=null){if(Na(t))return Iy(t);if(Ra(t))return My(t);if(Pa(t))return Ty(t);if(Fa(t))return X0(t);if(Va(t))return Ay(t);if(Ua(t))return Oy(t)}throw ka(t)}function Iy(t){return new De(e=>{let n=t[Ri]();if(le(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function My(t){return new De(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function Ty(t){return new De(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Da)})}function Ay(t){return new De(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function X0(t){return new De(e=>{Ry(t,e).catch(n=>e.error(n))})}function Oy(t){return X0(ja(t))}function Ry(t,e){var n,r,i,o;return W0(this,void 0,void 0,function*(){try{for(n=K0(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function Wt(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function Ba(t,e=0){return ue((n,r)=>{n.subscribe(fe(r,i=>Wt(r,t,()=>r.next(i),e),()=>Wt(r,t,()=>r.complete(),e),i=>Wt(r,t,()=>r.error(i),e)))})}function $a(t,e=0){return ue((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function Z0(t,e){return We(t).pipe($a(e),Ba(e))}function Q0(t,e){return We(t).pipe($a(e),Ba(e))}function J0(t,e){return new De(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function eg(t,e){return new De(n=>{let r;return Wt(n,e,()=>{r=t[La](),Wt(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>le(r?.return)&&r.return()})}function Ha(t,e){if(!t)throw new Error("Iterable cannot be null");return new De(n=>{Wt(n,e,()=>{let r=t[Symbol.asyncIterator]();Wt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function tg(t,e){return Ha(ja(t),e)}function ng(t,e){if(t!=null){if(Na(t))return Z0(t,e);if(Ra(t))return J0(t,e);if(Pa(t))return Q0(t,e);if(Fa(t))return Ha(t,e);if(Va(t))return eg(t,e);if(Ua(t))return tg(t,e)}throw ka(t)}function it(t,e){return e?ng(t,e):We(t)}function re(...t){let e=Nn(t);return it(t,e)}function ki(t,e){let n=le(t)?t:()=>t,r=i=>i.error(n());return new De(e?i=>e.schedule(r,0,i):r)}function Ga(t){return!!t&&(t instanceof De||le(t.lift)&&le(t.subscribe))}var ir=Ti(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function rg(t){return t instanceof Date&&!isNaN(t)}function ee(t,e){return ue((n,r)=>{let i=0;n.subscribe(fe(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:Py}=Array;function Ny(t,e){return Py(e)?t(...e):t(e)}function ig(t){return ee(e=>Ny(t,e))}var{isArray:Fy}=Array,{getPrototypeOf:ky,prototype:Ly,keys:Vy}=Object;function og(t){if(t.length===1){let e=t[0];if(Fy(e))return{args:e,keys:null};if(jy(e)){let n=Vy(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function jy(t){return t&&typeof t=="object"&&ky(t)===Ly}function sg(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function za(...t){let e=Nn(t),n=G0(t),{args:r,keys:i}=og(t);if(r.length===0)return it([],e);let o=new De(Uy(r,e,i?s=>sg(i,s):Ht));return n?o.pipe(ig(n)):o}function Uy(t,e,n=Ht){return r=>{ag(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)ag(e,()=>{let l=it(t[c],e),u=!1;l.subscribe(fe(r,f=>{o[c]=f,u||(u=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function ag(t,e,n){t?Wt(n,t,e):e()}function cg(t,e,n,r,i,o,s,a){let c=[],l=0,u=0,f=!1,d=()=>{f&&!c.length&&!l&&e.complete()},h=v=>l<r?g(v):c.push(v),g=v=>{o&&e.next(v),l++;let b=!1;We(n(v,u++)).subscribe(fe(e,D=>{i?.(D),o?h(D):e.next(D)},()=>{b=!0},void 0,()=>{if(b)try{for(l--;c.length&&l<r;){let D=c.shift();s?Wt(e,s,()=>g(D)):g(D)}d()}catch(D){e.error(D)}}))};return t.subscribe(fe(e,h,()=>{f=!0,d()})),()=>{a?.()}}function St(t,e,n=1/0){return le(e)?St((r,i)=>ee((o,s)=>e(r,o,i,s))(We(t(r,i))),n):(typeof e=="number"&&(n=e),ue((r,i)=>cg(r,i,t,n)))}function ss(t=1/0){return St(Ht,t)}function lg(){return ss(1)}function Li(...t){return lg()(it(t,Nn(t)))}function qa(t){return new De(e=>{We(t()).subscribe(e)})}function ug(t=0,e,n=H0){let r=-1;return e!=null&&(Oa(e)?n=e:r=e),new De(i=>{let o=rg(t)?+t-n.now():t;o<0&&(o=0);let s=0;return n.schedule(function(){i.closed||(i.next(s++),0<=r?this.schedule(void 0,r):i.complete())},o)})}function Sd(...t){let e=Nn(t),n=z0(t,1/0),r=t;return r.length?r.length===1?We(r[0]):ss(n)(it(r,e)):qt}function kt(t,e){return ue((n,r)=>{let i=0;n.subscribe(fe(r,o=>t.call(e,o,i++)&&r.next(o)))})}function Mr(t){return ue((e,n)=>{let r=null,i=!1,o;r=e.subscribe(fe(n,void 0,void 0,s=>{o=We(t(s,Mr(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function dg(t,e,n,r,i){return(o,s)=>{let a=n,c=e,l=0;o.subscribe(fe(s,u=>{let f=l++;c=a?t(c,u,f):(a=!0,u),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function Vi(t,e){return le(e)?St(t,e,1):St(t,1)}function Fn(t,e=os){return ue((n,r)=>{let i=null,o=null,s=null,a=()=>{if(i){i.unsubscribe(),i=null;let l=o;o=null,r.next(l)}};function c(){let l=s+t,u=e.now();if(u<l){i=this.schedule(void 0,l-u),r.add(i);return}a()}n.subscribe(fe(r,l=>{o=l,s=e.now(),i||(i=e.schedule(c,t),r.add(i))},()=>{a(),r.complete()},void 0,()=>{o=i=null}))})}function Tr(t){return ue((e,n)=>{let r=!1;e.subscribe(fe(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function vn(t){return t<=0?()=>qt:ue((e,n)=>{let r=0;e.subscribe(fe(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Dd(t){return ee(()=>t)}function Gt(t,e=Ht){return t=t??By,ue((n,r)=>{let i,o=!0;n.subscribe(fe(r,s=>{let a=e(s);(o||!t(i,a))&&(o=!1,i=a,r.next(s))}))})}function By(t,e){return t===e}function Wa(t=$y){return ue((e,n)=>{let r=!1;e.subscribe(fe(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function $y(){return new ir}function as(t){return ue((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function kn(t,e){let n=arguments.length>=2;return r=>r.pipe(t?kt((i,o)=>t(i,o,r)):Ht,vn(1),n?Tr(e):Wa(()=>new ir))}function ji(t){return t<=0?()=>qt:ue((e,n)=>{let r=[];e.subscribe(fe(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Ed(t,e){let n=arguments.length>=2;return r=>r.pipe(t?kt((i,o)=>t(i,o,r)):Ht,ji(1),n?Tr(e):Wa(()=>new ir))}function xd(t,e){return ue(dg(t,e,arguments.length>=2,!0))}function Ui(t={}){let{connector:e=()=>new Oe,resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return o=>{let s,a,c,l=0,u=!1,f=!1,d=()=>{a?.unsubscribe(),a=void 0},h=()=>{d(),s=c=void 0,u=f=!1},g=()=>{let v=s;h(),v?.unsubscribe()};return ue((v,b)=>{l++,!f&&!u&&d();let D=c=c??e();b.add(()=>{l--,l===0&&!f&&!u&&(a=Id(g,i))}),D.subscribe(b),!s&&l>0&&(s=new rr({next:I=>D.next(I),error:I=>{f=!0,d(),a=Id(h,n,I),D.error(I)},complete:()=>{u=!0,d(),a=Id(h,r),D.complete()}}),We(v).subscribe(s))})(o)}}function Id(t,e,...n){if(e===!0){t();return}if(e===!1)return;let r=new rr({next:()=>{r.unsubscribe(),t()}});return We(e(...n)).subscribe(r)}function Bi(t,e,n){let r,i=!1;return t&&typeof t=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:n}=t:r=t??1/0,Ui({connector:()=>new Ia(r,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function Md(t){return kt((e,n)=>t<=n)}function Td(...t){let e=Nn(t);return ue((n,r)=>{(e?Li(t,n,e):Li(t,n)).subscribe(r)})}function It(t,e){return ue((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(fe(r,c=>{i?.unsubscribe();let l=0,u=o++;We(t(c,u)).subscribe(i=fe(r,f=>r.next(e?e(c,f,u,l++):f),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function vt(t){return ue((e,n)=>{We(t).subscribe(fe(n,()=>n.complete(),ts)),!n.closed&&e.subscribe(n)})}function Mt(t,e,n){let r=le(t)||e||n?{next:t,error:e,complete:n}:t;return r?ue((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(fe(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Ht}function fg(t,e){return ue((n,r)=>{let{leading:i=!0,trailing:o=!1}=e??{},s=!1,a=null,c=null,l=!1,u=()=>{c?.unsubscribe(),c=null,o&&(h(),l&&r.complete())},f=()=>{c=null,l&&r.complete()},d=g=>c=We(t(g)).subscribe(fe(r,u,f)),h=()=>{if(s){s=!1;let g=a;a=null,r.next(g),!l&&d(g)}};n.subscribe(fe(r,g=>{s=!0,a=g,!(c&&!c.closed)&&(i?h():d(g))},()=>{l=!0,!(o&&s&&c&&!c.closed)&&r.complete()}))})}function Ad(t,e=os,n){let r=ug(t,e);return fg(()=>r,n)}function He(t){for(let e in t)if(t[e]===He)return e;throw Error("Could not find renamed property on target object.")}function Lt(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(Lt).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function hg(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var Hy=He({__forward_ref__:He});function Zg(t){return t.__forward_ref__=Zg,t.toString=function(){return Lt(this())},t}function rn(t){return Qg(t)?t():t}function Qg(t){return typeof t=="function"&&t.hasOwnProperty(Hy)&&t.__forward_ref__===Zg}function Jg(t){return t&&!!t.\u0275providers}var Gy="https://g.co/ng/security#xss",Q=class extends Error{constructor(e,n){super(Ff(e,n)),this.code=e}};function Ff(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}var zy=He({\u0275cmp:He}),qy=He({\u0275dir:He}),Wy=He({\u0275pipe:He}),Yy=He({\u0275mod:He}),nc=He({\u0275fac:He}),cs=He({__NG_ELEMENT_ID__:He}),pg=He({__NG_ENV_ID__:He});function em(t){return typeof t=="string"?t:t==null?"":String(t)}function Ky(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():em(t)}function Xy(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new Q(-200,`Circular dependency in DI detected for ${t}${n}`)}function kf(t,e){let n=e?` in ${e}`:"";throw new Q(-201,!1)}function Zy(t,e){t==null&&Qy(e,t,null,"!=")}function Qy(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(r==null?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}function ne(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Pr(t){return{providers:t.providers||[],imports:t.imports||[]}}function bc(t){return gg(t,nm)||gg(t,rm)}function tm(t){return bc(t)!==null}function gg(t,e){return t.hasOwnProperty(e)?t[e]:null}function Jy(t){let e=t&&(t[nm]||t[rm]);return e||null}function mg(t){return t&&(t.hasOwnProperty(vg)||t.hasOwnProperty(e9))?t[vg]:null}var nm=He({\u0275prov:He}),vg=He({\u0275inj:He}),rm=He({ngInjectableDef:He}),e9=He({ngInjectorDef:He}),Ce=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(Ce||{}),zd;function t9(){return zd}function nn(t){let e=zd;return zd=t,e}function im(t,e,n){let r=bc(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&Ce.Optional)return null;if(e!==void 0)return e;kf(Lt(t),"Injector")}var or=globalThis;var Me=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=ne({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};var n9={},ds=n9,qd="__NG_DI_FLAG__",rc="ngTempTokenPath",r9="ngTokenPath",i9=/\n/gm,o9="\u0275",yg="__source",ls;function $i(t){let e=ls;return ls=t,e}function s9(t,e=Ce.Default){if(ls===void 0)throw new Q(-203,!1);return ls===null?im(t,void 0,e):ls.get(t,e&Ce.Optional?null:void 0,e)}function Ee(t,e=Ce.Default){return(t9()||s9)(rn(t),e)}function K(t,e=Ce.Default){return Ee(t,wc(e))}function wc(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Wd(t){let e=[];for(let n=0;n<t.length;n++){let r=rn(t[n]);if(Array.isArray(r)){if(r.length===0)throw new Q(900,!1);let i,o=Ce.Default;for(let s=0;s<r.length;s++){let a=r[s],c=a9(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(Ee(i,o))}else e.push(Ee(r))}return e}function om(t,e){return t[qd]=e,t.prototype[qd]=e,t}function a9(t){return t[qd]}function c9(t,e,n,r){let i=t[rc];throw e[yg]&&i.unshift(e[yg]),t.message=l9(`
`+t.message,i,n,r),t[r9]=i,t[rc]=null,t}function l9(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==o9?t.slice(2):t;let i=Lt(e);if(Array.isArray(e))i=e.map(Lt).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Lt(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(i9,`
  `)}`}function bs(t){return{toString:t}.toString()}var sm=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(sm||{}),Un=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Un||{}),fs={},Cn=[];function am(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}function Yd(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];d9(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function u9(t){return t===3||t===4||t===6}function d9(t){return t.charCodeAt(0)===64}function Lf(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?Cg(t,n,i,null,e[++r]):Cg(t,n,i,null,null))}}return t}function Cg(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[o+1]=i);return}else if(r===t[o+1]){t[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),r!==null&&t.splice(o++,0,r),i!==null&&t.splice(o++,0,i)}var cm="ng-template";function f9(t,e,n){let r=0,i=!0;for(;r<t.length;){let o=t[r++];if(typeof o=="string"&&i){let s=t[r++];if(n&&o==="class"&&am(s.toLowerCase(),e,0)!==-1)return!0}else if(o===1){for(;r<t.length&&typeof(o=t[r++])=="string";)if(o.toLowerCase()===e)return!0;return!1}else typeof o=="number"&&(i=!1)}return!1}function lm(t){return t.type===4&&t.value!==cm}function h9(t,e,n){let r=t.type===4&&!n?cm:t.value;return e===r}function p9(t,e,n){let r=4,i=t.attrs||[],o=v9(i),s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!yn(r)&&!yn(c))return!1;if(s&&yn(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!h9(t,c,n)||c===""&&e.length===1){if(yn(r))return!1;s=!0}}else{let l=r&8?c:e[++a];if(r&8&&t.attrs!==null){if(!f9(t.attrs,l,n)){if(yn(r))return!1;s=!0}continue}let u=r&8?"class":c,f=g9(u,i,lm(t),n);if(f===-1){if(yn(r))return!1;s=!0;continue}if(l!==""){let d;f>o?d="":d=i[f+1].toLowerCase();let h=r&8?d:null;if(h&&am(h,l,0)!==-1||r&2&&l!==d){if(yn(r))return!1;s=!0}}}}return yn(r)||s}function yn(t){return(t&1)===0}function g9(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return y9(e,t)}function um(t,e,n=!1){for(let r=0;r<e.length;r++)if(p9(t,e[r],n))return!0;return!1}function m9(t){let e=t.attrs;if(e!=null){let n=e.indexOf(5);if(!(n&1))return e[n+1]}return null}function v9(t){for(let e=0;e<t.length;e++){let n=t[e];if(u9(n))return e}return t.length}function y9(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function C9(t,e){e:for(let n=0;n<e.length;n++){let r=e[n];if(t.length===r.length){for(let i=0;i<t.length;i++)if(t[i]!==r[i])continue e;return!0}}return!1}function _g(t,e){return t?":not("+e.trim()+")":e}function _9(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!yn(s)&&(e+=_g(o,i),i=""),r=s,o=o||!yn(r);n++}return i!==""&&(e+=_g(o,i)),e}function b9(t){return t.map(_9).join(",")}function w9(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!yn(i))break;i=o}r++}return{attrs:e,classes:n}}function ae(t){return bs(()=>{let e=gm(t),n=Se(T({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===sm.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Un.Emulated,styles:t.styles||Cn,_:null,schemas:t.schemas||null,tView:null,id:""});mm(n);let r=t.dependencies;return n.directiveDefs=wg(r,!1),n.pipeDefs=wg(r,!0),n.id=E9(n),n})}function S9(t){return ri(t)||dm(t)}function D9(t){return t!==null}function Nr(t){return bs(()=>({type:t.type,bootstrap:t.bootstrap||Cn,declarations:t.declarations||Cn,imports:t.imports||Cn,exports:t.exports||Cn,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function bg(t,e){if(t==null)return fs;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}function cr(t){return bs(()=>{let e=gm(t);return mm(e),e})}function di(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone===!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function ri(t){return t[zy]||null}function dm(t){return t[qy]||null}function fm(t){return t[Wy]||null}function hm(t){let e=ri(t)||dm(t)||fm(t);return e!==null?e.standalone:!1}function pm(t,e){let n=t[Yy]||null;if(!n&&e===!0)throw new Error(`Type ${Lt(t)} does not have '\u0275mod' property.`);return n}function gm(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||fs,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||Cn,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:bg(t.inputs,e),outputs:bg(t.outputs),debugInfo:null}}function mm(t){t.features?.forEach(e=>e(t))}function wg(t,e){if(!t)return null;let n=e?fm:S9;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(D9)}function E9(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483647+1,"c"+e}var lr=0,ge=1,te=2,Ct=3,_n=4,Zt=5,ic=6,hs=7,sn=8,Wi=9,ps=10,Dt=11,gs=12,Sg=13,eo=14,bn=15,ws=16,Hi=17,jn=18,Sc=19,vm=20,us=21,Od=22,ii=23,Xt=25,ym=1;var oi=7,oc=8,Yi=9,Kt=10,Ki=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t[t.HasChildViewsToRefresh=4]="HasChildViewsToRefresh",t}(Ki||{});function Ar(t){return Array.isArray(t)&&typeof t[ym]=="object"}function wn(t){return Array.isArray(t)&&t[ym]===!0}function Vf(t){return(t.flags&4)!==0}function Dc(t){return t.componentOffset>-1}function Ec(t){return(t.flags&1)===1}function Ss(t){return!!t.template}function x9(t){return(t[te]&512)!==0}function si(t,e){let n=t.hasOwnProperty(nc);return n?t[nc]:null}var Kd=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function Sn(){return Cm}function Cm(t){return t.type.prototype.ngOnChanges&&(t.setInput=M9),I9}Sn.ngInherit=!0;function I9(){let t=bm(this),e=t?.current;if(e){let n=t.previous;if(n===fs)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function M9(t,e,n,r){let i=this.declaredInputs[n],o=bm(t)||T9(t,{previous:fs,current:null}),s=o.current||(o.current={}),a=o.previous,c=a[i];s[i]=new Kd(c&&c.currentValue,e,a===fs),t[r]=e}var _m="__ngSimpleChanges__";function bm(t){return t[_m]||null}function T9(t,e){return t[_m]=e}var Dg=null;var Ln=function(t,e,n){Dg?.(t,e,n)},wm="svg",A9="math";function Bn(t){for(;Array.isArray(t);)t=t[lr];return t}function Sm(t,e){return Bn(e[t])}function Dn(t,e){return Bn(e[t.index])}function Dm(t,e){return t.data[e]}function Em(t,e){return t[e]}function Fr(t,e){let n=e[t];return Ar(n)?n:n[lr]}function O9(t){return(t[te]&4)===4}function jf(t){return(t[te]&128)===128}function R9(t){return wn(t[Ct])}function Xi(t,e){return e==null?null:t[e]}function xm(t){t[Hi]=0}function P9(t){t[te]&1024||(t[te]|=1024,jf(t)&&xc(t))}function N9(t,e){for(;t>0;)e=e[eo],t--;return e}function Im(t){t[te]&9216&&xc(t)}function xc(t){let e=t[Ct];for(;e!==null&&!(wn(e)&&e[te]&Ki.HasChildViewsToRefresh||Ar(e)&&e[te]&8192);){if(wn(e))e[te]|=Ki.HasChildViewsToRefresh;else if(e[te]|=8192,!jf(e))break;e=e[Ct]}}function F9(t,e){if((t[te]&256)===256)throw new Q(911,!1);t[us]===null&&(t[us]=[]),t[us].push(e)}var he={lFrame:km(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function k9(){return he.lFrame.elementDepthCount}function L9(){he.lFrame.elementDepthCount++}function V9(){he.lFrame.elementDepthCount--}function Mm(){return he.bindingsEnabled}function Tm(){return he.skipHydrationRootTNode!==null}function j9(t){return he.skipHydrationRootTNode===t}function U9(){he.skipHydrationRootTNode=null}function Be(){return he.lFrame.lView}function Yt(){return he.lFrame.tView}function Ne(t){return he.lFrame.contextLView=t,t[sn]}function Fe(t){return he.lFrame.contextLView=null,t}function cn(){let t=Am();for(;t!==null&&t.type===64;)t=t.parent;return t}function Am(){return he.lFrame.currentTNode}function B9(){let t=he.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function fi(t,e){let n=he.lFrame;n.currentTNode=t,n.isParent=e}function Uf(){return he.lFrame.isParent}function Bf(){he.lFrame.isParent=!1}function $9(){return he.lFrame.contextLView}function Om(){let t=he.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function H9(t){return he.lFrame.bindingIndex=t}function Rm(){return he.lFrame.bindingIndex++}function G9(t){let e=he.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function z9(){return he.lFrame.inI18n}function q9(t,e){let n=he.lFrame;n.bindingIndex=n.bindingRootIndex=t,Xd(e)}function W9(){return he.lFrame.currentDirectiveIndex}function Xd(t){he.lFrame.currentDirectiveIndex=t}function Y9(t){let e=he.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function Pm(){return he.lFrame.currentQueryIndex}function $f(t){he.lFrame.currentQueryIndex=t}function K9(t){let e=t[ge];return e.type===2?e.declTNode:e.type===1?t[Zt]:null}function Nm(t,e,n){if(n&Ce.SkipSelf){let i=e,o=t;for(;i=i.parent,i===null&&!(n&Ce.Host);)if(i=K9(o),i===null||(o=o[eo],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=he.lFrame=Fm();return r.currentTNode=e,r.lView=t,!0}function Hf(t){let e=Fm(),n=t[ge];he.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function Fm(){let t=he.lFrame,e=t===null?null:t.child;return e===null?km(t):e}function km(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function Lm(){let t=he.lFrame;return he.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var Vm=Lm;function Gf(){let t=Lm();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function X9(t){return(he.lFrame.contextLView=N9(t,he.lFrame.contextLView))[sn]}function to(){return he.lFrame.selectedIndex}function ai(t){he.lFrame.selectedIndex=t}function Z9(){let t=he.lFrame;return Dm(t.tView,t.selectedIndex)}function _t(){he.lFrame.currentNamespace=wm}function jm(){Q9()}function Q9(){he.lFrame.currentNamespace=null}function J9(){return he.lFrame.currentNamespace}var Um=!0;function Ic(){return Um}function Mc(t){Um=t}function e7(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=Cm(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function Tc(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),u!=null&&(t.destroyHooks??=[]).push(n,u)}}function Xa(t,e,n){Bm(t,e,3,n)}function Za(t,e,n,r){(t[te]&3)===n&&Bm(t,e,n,r)}function Rd(t,e){let n=t[te];(n&3)===e&&(n&=16383,n+=1,t[te]=n)}function Bm(t,e,n,r){let i=r!==void 0?t[Hi]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[Hi]+=65536),(a<o||o==-1)&&(t7(t,n,e,c),t[Hi]=(t[Hi]&4294901760)+c+2),c++}function Eg(t,e){Ln(4,t,e);let n=$t(null);try{e.call(t)}finally{$t(n),Ln(5,t,e)}}function t7(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[te]>>14<t[Hi]>>16&&(t[te]&3)===e&&(t[te]+=16384,Eg(a,o)):Eg(a,o)}var qi=-1,ms=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function n7(t){return t instanceof ms}function r7(t){return(t.flags&8)!==0}function i7(t){return(t.flags&16)!==0}function $m(t){return t!==qi}function sc(t){let e=t&32767;return t&32767}function o7(t){return t>>16}function ac(t,e){let n=o7(t),r=e;for(;n>0;)r=r[eo],n--;return r}var Zd=!0;function cc(t){let e=Zd;return Zd=t,e}var s7=256,Hm=s7-1,Gm=5,a7=0,Vn={};function c7(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(cs)&&(r=n[cs]),r==null&&(r=n[cs]=a7++);let i=r&Hm,o=1<<i;e.data[t+(i>>Gm)]|=o}function zm(t,e){let n=qm(t,e);if(n!==-1)return n;let r=e[ge];r.firstCreatePass&&(t.injectorIndex=e.length,Pd(r.data,t),Pd(e,null),Pd(r.blueprint,null));let i=zf(t,e),o=t.injectorIndex;if($m(i)){let s=sc(i),a=ac(i,e),c=a[ge].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=i,o}function Pd(t,e){t.push(0,0,0,0,0,0,0,0,e)}function qm(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function zf(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=Zm(i),r===null)return qi;if(n++,i=i[eo],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return qi}function l7(t,e,n){c7(t,e,n)}function Wm(t,e,n){if(n&Ce.Optional||t!==void 0)return t;kf(e,"NodeInjector")}function Ym(t,e,n,r){if(n&Ce.Optional&&r===void 0&&(r=null),!(n&(Ce.Self|Ce.Host))){let i=t[Wi],o=nn(void 0);try{return i?i.get(e,r,n&Ce.Optional):im(e,r,n&Ce.Optional)}finally{nn(o)}}return Wm(r,e,n)}function Km(t,e,n,r=Ce.Default,i){if(t!==null){if(e[te]&2048&&!(r&Ce.Self)){let s=h7(t,e,n,r,Vn);if(s!==Vn)return s}let o=Xm(t,e,n,r,Vn);if(o!==Vn)return o}return Ym(e,n,r,i)}function Xm(t,e,n,r,i){let o=d7(n);if(typeof o=="function"){if(!Nm(e,t,r))return r&Ce.Host?Wm(i,n,r):Ym(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&Ce.Optional))kf(n);else return s}finally{Vm()}}else if(typeof o=="number"){let s=null,a=qm(t,e),c=qi,l=r&Ce.Host?e[bn][Zt]:null;for((a===-1||r&Ce.SkipSelf)&&(c=a===-1?zf(t,e):e[a+8],c===qi||!Ig(r,!1)?a=-1:(s=e[ge],a=sc(c),e=ac(c,e)));a!==-1;){let u=e[ge];if(xg(o,a,u.data)){let f=u7(a,e,n,s,r,l);if(f!==Vn)return f}c=e[a+8],c!==qi&&Ig(r,e[ge].data[a+8]===l)&&xg(o,a,e)?(s=u,a=sc(c),e=ac(c,e)):a=-1}}return i}function u7(t,e,n,r,i,o){let s=e[ge],a=s.data[t+8],c=r==null?Dc(a)&&Zd:r!=s&&(a.type&3)!==0,l=i&Ce.Host&&o===a,u=Qa(a,s,n,c,l);return u!==null?Zi(e,s,u,a):Vn}function Qa(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,c=t.directiveStart,l=t.directiveEnd,u=o>>20,f=r?a:a+u,d=i?a+u:l;for(let h=f;h<d;h++){let g=s[h];if(h<c&&n===g||h>=c&&g.type===n)return h}if(i){let h=s[c];if(h&&Ss(h)&&h.type===n)return c}return null}function Zi(t,e,n,r){let i=t[n],o=e.data;if(n7(i)){let s=i;s.resolving&&Xy(Ky(o[n]));let a=cc(s.canSeeViewProviders);s.resolving=!0;let c,l=s.injectImpl?nn(s.injectImpl):null,u=Nm(t,r,Ce.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&e7(n,o[n],e)}finally{l!==null&&nn(l),cc(a),s.resolving=!1,Vm()}}return i}function d7(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(cs)?t[cs]:void 0;return typeof e=="number"?e>=0?e&Hm:f7:e}function xg(t,e,n){let r=1<<t;return!!(n[e+(t>>Gm)]&r)}function Ig(t,e){return!(t&Ce.Self)&&!(t&Ce.Host&&e)}var ni=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return Km(this._tNode,this._lView,e,wc(r),n)}};function f7(){return new ni(cn(),Be())}function qf(t){return bs(()=>{let e=t.prototype.constructor,n=e[nc]||Qd(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[nc]||Qd(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Qd(t){return Qg(t)?()=>{let e=Qd(rn(t));return e&&e()}:si(t)}function h7(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[te]&2048&&!(s[te]&512);){let a=Xm(o,s,n,r|Ce.Self,Vn);if(a!==Vn)return a;let c=o.parent;if(!c){let l=s[vm];if(l){let u=l.get(n,Vn,r);if(u!==Vn)return u}c=Zm(s),s=s[eo]}o=c}return i}function Zm(t){let e=t[ge],n=e.type;return n===2?e.declTNode:n===1?t[Zt]:null}var Ya="__parameters__";function p7(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function Qm(t,e,n){return bs(()=>{let r=p7(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,l,u){let f=c.hasOwnProperty(Ya)?c[Ya]:Object.defineProperty(c,Ya,{value:[]})[Ya];for(;f.length<=u;)f.push(null);return(f[u]=f[u]||[]).push(s),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}function g7(t){return typeof t=="function"}function m7(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}function v7(t){return t.flat(Number.POSITIVE_INFINITY)}function Wf(t,e){t.forEach(n=>Array.isArray(n)?Wf(n,e):e(n))}function Jm(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function lc(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function e2(t,e){let n=[];for(let r=0;r<t;r++)n.push(e);return n}function y7(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function C7(t,e,n){let r=Ds(t,e);return r>=0?t[r|1]=n:(r=~r,y7(t,r,e,n)),r}function Nd(t,e){let n=Ds(t,e);if(n>=0)return t[n|1]}function Ds(t,e){return _7(t,e,1)}function _7(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var Ac=om(Qm("Optional"),8);var Yf=om(Qm("SkipSelf"),4);var Es=new Me("ENVIRONMENT_INITIALIZER"),t2=new Me("INJECTOR",-1),n2=new Me("INJECTOR_DEF_TYPES"),uc=class{get(e,n=ds){if(n===ds){let r=new Error(`NullInjectorError: No provider for ${Lt(e)}!`);throw r.name="NullInjectorError",r}return n}};function Oc(t){return{\u0275providers:t}}function b7(...t){return{\u0275providers:r2(!0,t),\u0275fromNgModule:!0}}function r2(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return Wf(e,s=>{let a=s;Jd(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&i2(i,o),n}function i2(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Kf(i,o=>{e(o,r)})}}function Jd(t,e,n,r){if(t=rn(t),!t)return!1;let i=null,o=mg(t),s=!o&&ri(t);if(!o&&!s){let c=t.ngModule;if(o=mg(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)Jd(l,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Wf(o.imports,u=>{Jd(u,e,n,r)&&(l||=[],l.push(u))})}finally{}l!==void 0&&i2(l,e)}if(!a){let l=si(i)||(()=>new i);e({provide:i,useFactory:l,deps:Cn},i),e({provide:n2,useValue:i,multi:!0},i),e({provide:Es,useValue:()=>Ee(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=t;Kf(c,u=>{e(u,l)})}}else return!1;return i!==t&&t.providers!==void 0}function Kf(t,e){for(let n of t)Jg(n)&&(n=n.\u0275providers),Array.isArray(n)?Kf(n,e):e(n)}var w7=He({provide:String,useValue:He});function o2(t){return t!==null&&typeof t=="object"&&w7 in t}function S7(t){return!!(t&&t.useExisting)}function D7(t){return!!(t&&t.useFactory)}function ef(t){return typeof t=="function"}var Rc=new Me("Set Injector scope."),Ja={},E7={},Fd;function Xf(){return Fd===void 0&&(Fd=new uc),Fd}var an=class{},dc=class extends an{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,nf(e,s=>this.processProvider(s)),this.records.set(t2,Gi(void 0,this)),i.has("environment")&&this.records.set(an,Gi(void 0,this));let o=this.records.get(Rc);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(n2,Cn,Ce.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(let n of this._ngOnDestroyHooks)n.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let n of e)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=$i(this),r=nn(void 0),i;try{return e()}finally{$i(n),nn(r)}}get(e,n=ds,r=Ce.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(pg))return e[pg](this);r=wc(r);let i,o=$i(this),s=nn(void 0);try{if(!(r&Ce.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=O7(e)&&bc(e);l&&this.injectableDefInScope(l)?c=Gi(tf(e),Ja):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&Ce.Self?Xf():this.parent;return n=r&Ce.Optional&&n===ds?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[rc]=a[rc]||[]).unshift(Lt(e)),o)throw a;return c9(a,e,"R3InjectorError",this.source)}else throw a}finally{nn(s),$i(o)}}resolveInjectorInitializers(){let e=$i(this),n=nn(void 0),r;try{let i=this.get(Es,Cn,Ce.Self);for(let o of i)o()}finally{$i(e),nn(n)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(Lt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Q(205,!1)}processProvider(e){e=rn(e);let n=ef(e)?e:rn(e&&e.provide),r=I7(e);if(!ef(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Gi(void 0,Ja,!0),i.factory=()=>Wd(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}else{let i=this.records.get(n)}this.records.set(n,r)}hydrate(e,n){return n.value===Ja&&(n.value=E7,n.value=n.factory()),typeof n.value=="object"&&n.value&&A7(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;let n=rn(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function tf(t){let e=bc(t),n=e!==null?e.factory:si(t);if(n!==null)return n;if(t instanceof Me)throw new Q(204,!1);if(t instanceof Function)return x7(t);throw new Q(204,!1)}function x7(t){let e=t.length;if(e>0){let r=e2(e,"?");throw new Q(204,!1)}let n=Jy(t);return n!==null?()=>n.factory(t):()=>new t}function I7(t){if(o2(t))return Gi(void 0,t.useValue);{let e=M7(t);return Gi(e,Ja)}}function M7(t,e,n){let r;if(ef(t)){let i=rn(t);return si(i)||tf(i)}else if(o2(t))r=()=>rn(t.useValue);else if(D7(t))r=()=>t.useFactory(...Wd(t.deps||[]));else if(S7(t))r=()=>Ee(rn(t.useExisting));else{let i=rn(t&&(t.useClass||t.provide));if(T7(t))r=()=>new i(...Wd(t.deps));else return si(i)||tf(i)}return r}function Gi(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function T7(t){return!!t.deps}function A7(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function O7(t){return typeof t=="function"||typeof t=="object"&&t instanceof Me}function nf(t,e){for(let n of t)Array.isArray(n)?nf(n,e):n&&Jg(n)?nf(n.\u0275providers,e):e(n)}function Mg(t,e=null,n=null,r){let i=s2(t,e,n,r);return i.resolveInjectorInitializers(),i}function s2(t,e=null,n=null,r,i=new Set){let o=[n||Cn,b7(t)];return r=r||(typeof t=="object"?void 0:Lt(t)),new dc(o,e||Xf(),r||null,i)}var kr=(()=>{let e=class e{static create(r,i){if(Array.isArray(r))return Mg({name:""},i,r,"");{let o=r.name??"";return Mg({name:o},r.parent,r.providers,o)}}};e.THROW_IF_NOT_FOUND=ds,e.NULL=new uc,e.\u0275prov=ne({token:e,providedIn:"any",factory:()=>Ee(t2)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var rf;function a2(t){rf=t}function R7(){if(rf!==void 0)return rf;if(typeof document<"u")return document;throw new Q(210,!1)}var Zf=new Me("AppId",{providedIn:"root",factory:()=>P7}),P7="ng",Qf=new Me("Platform Initializer"),no=new Me("Platform ID",{providedIn:"platform",factory:()=>"unknown"});var Jf=new Me("CSP nonce",{providedIn:"root",factory:()=>R7().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function Pc(t){return t.ownerDocument.defaultView}function c2(t){return t instanceof Function?t():t}function l2(t){return(t.flags&128)===128}var sr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(sr||{}),N7=/^>|^->|<!--|-->|--!>|<!-$/g,F7=/(<|>)/g,k7="\u200B$1\u200B";function L7(t){return t.replace(N7,e=>e.replace(F7,k7))}var u2=new Map,V7=0;function j7(){return V7++}function U7(t){u2.set(t[Sc],t)}function B7(t){u2.delete(t[Sc])}var Tg="__ngContext__";function Or(t,e){Ar(e)?(t[Tg]=e[Sc],U7(e)):t[Tg]=e}var $7;function eh(t,e){return $7(t,e)}function th(t){let e=t[Ct];return wn(e)?e[Ct]:e}function d2(t){return h2(t[gs])}function f2(t){return h2(t[_n])}function h2(t){for(;t!==null&&!wn(t);)t=t[_n];return t}function zi(t,e,n,r,i){if(r!=null){let o,s=!1;wn(r)?o=r:Ar(r)&&(s=!0,r=r[lr]);let a=Bn(r);t===0&&n!==null?i==null?y2(e,n,a):fc(e,n,a,i||null,!0):t===1&&n!==null?fc(e,n,a,i||null,!0):t===2?oC(e,a,s):t===3&&e.destroyNode(a),o!=null&&aC(e,t,o,n,i)}}function H7(t,e){return t.createText(e)}function G7(t,e,n){t.setValue(e,n)}function z7(t,e){return t.createComment(L7(e))}function p2(t,e,n){return t.createElement(e,n)}function q7(t,e){let n=e[Dt];xs(t,e,n,2,null,null),e[lr]=null,e[Zt]=null}function W7(t,e,n,r,i,o){r[lr]=i,r[Zt]=e,xs(t,r,n,1,i,o)}function Y7(t,e){xs(t,e,e[Dt],2,null,null)}function K7(t){let e=t[gs];if(!e)return kd(t[ge],t);for(;e;){let n=null;if(Ar(e))n=e[gs];else{let r=e[Kt];r&&(n=r)}if(!n){for(;e&&!e[_n]&&e!==t;)Ar(e)&&kd(e[ge],e),e=e[Ct];e===null&&(e=t),Ar(e)&&kd(e[ge],e),n=e&&e[_n]}e=n}}function X7(t,e,n,r){let i=Kt+r,o=n.length;r>0&&(n[i-1][_n]=e),r<o-Kt?(e[_n]=n[i],Jm(n,Kt+r,e)):(n.push(e),e[_n]=null),e[Ct]=n;let s=e[ws];s!==null&&n!==s&&Z7(s,e);let a=e[jn];a!==null&&a.insertView(t),Im(e),e[te]|=128}function Z7(t,e){let n=t[Yi],i=e[Ct][Ct][bn];e[bn]!==i&&(t[te]|=Ki.HasTransplantedViews),n===null?t[Yi]=[e]:n.push(e)}function g2(t,e){let n=t[Yi],r=n.indexOf(e),i=e[Ct];n.splice(r,1)}function of(t,e){if(t.length<=Kt)return;let n=Kt+e,r=t[n];if(r){let i=r[ws];i!==null&&i!==t&&g2(i,r),e>0&&(t[n-1][_n]=r[_n]);let o=lc(t,Kt+e);q7(r[ge],r);let s=o[jn];s!==null&&s.detachView(o[ge]),r[Ct]=null,r[_n]=null,r[te]&=-129}return r}function m2(t,e){if(!(e[te]&256)){let n=e[Dt];e[ii]&&N0(e[ii]),n.destroyNode&&xs(t,e,n,3,null,null),K7(e)}}function kd(t,e){if(!(e[te]&256)){e[te]&=-129,e[te]|=256,J7(t,e),Q7(t,e),e[ge].type===1&&e[Dt].destroy();let n=e[ws];if(n!==null&&wn(e[Ct])){n!==e[Ct]&&g2(n,e);let r=e[jn];r!==null&&r.detachView(t)}B7(e)}}function Q7(t,e){let n=t.cleanup,r=e[hs];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[n[o+1]];n[o].call(s)}r!==null&&(e[hs]=null);let i=e[us];if(i!==null){e[us]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function J7(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof ms)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];Ln(4,a,c);try{c.call(a)}finally{Ln(5,a,c)}}else{Ln(4,i,o);try{o.call(i)}finally{Ln(5,i,o)}}}}}function v2(t,e,n){return eC(t,e.parent,n)}function eC(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[lr];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=t.data[r.directiveStart+i];if(o===Un.None||o===Un.Emulated)return null}return Dn(r,n)}}function fc(t,e,n,r,i){t.insertBefore(e,n,r,i)}function y2(t,e,n){t.appendChild(e,n)}function Ag(t,e,n,r,i){r!==null?fc(t,e,n,r,i):y2(t,e,n)}function tC(t,e,n,r){t.removeChild(e,n,r)}function nh(t,e){return t.parentNode(e)}function nC(t,e){return t.nextSibling(e)}function C2(t,e,n){return iC(t,e,n)}function rC(t,e,n){return t.type&40?Dn(t,n):null}var iC=rC,Og;function Nc(t,e,n,r){let i=v2(t,r,e),o=e[Dt],s=r.parent||e[Zt],a=C2(s,r,e);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)Ag(o,i,n[c],a,!1);else Ag(o,i,n,a,!1);Og!==void 0&&Og(o,r,e,n,i)}function ec(t,e){if(e!==null){let n=e.type;if(n&3)return Dn(e,t);if(n&4)return sf(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return ec(t,r);{let i=t[e.index];return wn(i)?sf(-1,i):Bn(i)}}else{if(n&32)return eh(e,t)()||Bn(t[e.index]);{let r=_2(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=th(t[bn]);return ec(i,r)}else return ec(t,e.next)}}}return null}function _2(t,e){if(e!==null){let r=t[bn][Zt],i=e.projection;return r.projection[i]}return null}function sf(t,e){let n=Kt+t+1;if(n<e.length){let r=e[n],i=r[ge].firstChild;if(i!==null)return ec(r,i)}return e[oi]}function oC(t,e,n){let r=nh(t,e);r&&tC(t,r,e,n)}function rh(t,e,n,r,i,o,s){for(;n!=null;){let a=r[n.index],c=n.type;if(s&&e===0&&(a&&Or(Bn(a),r),n.flags|=2),(n.flags&32)!==32)if(c&8)rh(t,e,n.child,r,i,o,!1),zi(e,t,i,a,o);else if(c&32){let l=eh(n,r),u;for(;u=l();)zi(e,t,i,u,o);zi(e,t,i,a,o)}else c&16?b2(t,e,r,n,i,o):zi(e,t,i,a,o);n=s?n.projectionNext:n.next}}function xs(t,e,n,r,i,o){rh(n,r,t.firstChild,e,i,o,!1)}function sC(t,e,n){let r=e[Dt],i=v2(t,n,e),o=n.parent||e[Zt],s=C2(o,n,e);b2(r,0,e,n,i,s)}function b2(t,e,n,r,i,o){let s=n[bn],c=s[Zt].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];zi(e,t,i,u,o)}else{let l=c,u=s[Ct];l2(r)&&(l.flags|=128),rh(t,e,l,u,i,o,!0)}}function aC(t,e,n,r,i){let o=n[oi],s=Bn(n);o!==s&&zi(e,t,r,o,i);for(let a=Kt;a<n.length;a++){let c=n[a];xs(c[ge],c,t,e,r,o)}}function cC(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:sr.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=sr.Important),t.setStyle(n,r,i,o))}}function lC(t,e,n){t.setAttribute(e,"style",n)}function w2(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function S2(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&Yd(t,e,r),i!==null&&w2(t,e,i),o!==null&&lC(t,e,o)}var af=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Gy})`}};function ih(t){return t instanceof af?t.changingThisBreaksApplicationSecurity:t}var uC="h",dC="b";var fC=(t,e,n)=>null;function oh(t,e,n=!1){return fC(t,e,n)}var cf=class{},hc=class{};function hC(t){let e=Error(`No component factory found for ${Lt(t)}.`);return e[pC]=t,e}var pC="ngComponent";var lf=class{resolveComponentFactory(e){throw hC(e)}},ro=(()=>{let e=class e{};e.NULL=new lf;let t=e;return t})();function gC(){return io(cn(),Be())}function io(t,e){return new $n(Dn(t,e))}var $n=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=gC;let t=e;return t})();function mC(t){return t instanceof $n?t.nativeElement:t}var vs=class{},Fc=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>vC();let t=e;return t})();function vC(){let t=Be(),e=cn(),n=Fr(e.index,t);return(Ar(n)?n:t)[Dt]}var yC=(()=>{let e=class e{};e.\u0275prov=ne({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),Qi=class{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}},CC=new Qi("17.0.4"),Ld={};function sh(t){let e=$t(null);try{return t()}finally{$t(e)}}function D2(t){return ah(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function _C(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function ah(t){return t!==null&&(typeof t=="function"||typeof t=="object")}var uf=class{constructor(){}supports(e){return D2(e)}create(e){return new df(e)}},bC=(t,e)=>e,df=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||bC}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){let s=!r||n&&n.currentIndex<Rg(r,i,o)?n:r,a=Rg(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,u=c-i;if(l!=u){for(let d=0;d<l;d++){let h=d<o.length?o[d]:o[d]=0,g=h+d;u<=g&&g<l&&(o[d]=h+1)}let f=s.previousIndex;o[f]=u-l}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!D2(e))throw new Q(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,o,s,a),r=!0):(r&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else i=0,_C(e,a=>{s=this._trackByFn(i,a),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,a,s,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,s,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,i)):e=this._addAfter(new ff(n,r),o,i)),e}_verifyReinsertion(e,n,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new pc),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new pc),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},ff=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},hf=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},pc=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new hf,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function Rg(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}var pf=class{constructor(){}supports(e){return e instanceof Map||ah(e)}create(){return new gf}},gf=class{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(e){let n;for(n=this._mapHead;n!==null;n=n._next)e(n)}forEachPreviousItem(e){let n;for(n=this._previousMapHead;n!==null;n=n._nextPrevious)e(n)}forEachChangedItem(e){let n;for(n=this._changesHead;n!==null;n=n._nextChanged)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}diff(e){if(!e)e=new Map;else if(!(e instanceof Map||ah(e)))throw new Q(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(n&&n.key===i)this._maybeAddToChanges(n,r),this._appendAfter=n,n=n._next;else{let o=this._getOrCreateRecordForKey(i,r);n=this._insertBeforeOrAppend(n,o)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let r=n;r!==null;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,n){if(e){let r=e._prev;return n._next=e,n._prev=r,e._prev=n,r&&(r._next=n),e===this._mapHead&&(this._mapHead=n),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(e,n){if(this._records.has(e)){let i=this._records.get(e);this._maybeAddToChanges(i,n);let o=i._prev,s=i._next;return o&&(o._next=s),s&&(s._prev=o),i._next=null,i._prev=null,i}let r=new mf(e);return this._records.set(e,r),r.currentValue=n,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;e!==null;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;e!=null;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,n){Object.is(n,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=n,this._addToChanges(e))}_addToAdditions(e){this._additionsHead===null?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){this._changesHead===null?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,n){e instanceof Map?e.forEach(n):Object.keys(e).forEach(r=>n(e[r],r))}},mf=class{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}};function Pg(){return new kc([new uf])}var kc=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i!=null){let o=i.factories.slice();r=r.concat(o)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||Pg()),deps:[[e,new Yf,new Ac]]}}find(r){let i=this.factories.find(o=>o.supports(r));if(i!=null)return i;throw new Q(901,!1)}};e.\u0275prov=ne({token:e,providedIn:"root",factory:Pg});let t=e;return t})();function Ng(){return new ch([new pf])}var ch=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i){let o=i.factories.slice();r=r.concat(o)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||Ng()),deps:[[e,new Yf,new Ac]]}}find(r){let i=this.factories.find(o=>o.supports(r));if(i)return i;throw new Q(901,!1)}};e.\u0275prov=ne({token:e,providedIn:"root",factory:Ng});let t=e;return t})();function gc(t,e,n,r,i=!1){for(;n!==null;){let o=e[n.index];o!==null&&r.push(Bn(o)),wn(o)&&wC(o,r);let s=n.type;if(s&8)gc(t,e,n.child,r);else if(s&32){let a=eh(n,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=_2(e,n);if(Array.isArray(a))r.push(...a);else{let c=th(e[bn]);gc(c[ge],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function wC(t,e){for(let n=Kt;n<t.length;n++){let r=t[n],i=r[ge].firstChild;i!==null&&gc(r[ge],r,i,e)}t[oi]!==t[lr]&&e.push(t[oi])}var E2=[];function SC(t){return t[ii]??DC(t)}function DC(t){let e=E2.pop()??Object.create(xC);return e.lView=t,e}function EC(t){t.lView[ii]!==t&&(t.lView=null,E2.push(t))}var xC=Se(T({},O0),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{xc(t.lView)},consumerOnSignalRead(){this.lView[ii]=this}}),IC="ngOriginalError";function Vd(t){return t[IC]}var ar=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Vd(e);for(;n&&Vd(n);)n=Vd(n);return n||null}};var x2=!1,MC=new Me("",{providedIn:"root",factory:()=>x2});var hi={};function z(t){I2(Yt(),Be(),to()+t,!1)}function I2(t,e,n,r){if(!r)if((e[te]&3)===3){let o=t.preOrderCheckHooks;o!==null&&Xa(e,o,n)}else{let o=t.preOrderHooks;o!==null&&Za(e,o,0,n)}ai(n)}function X(t,e=Ce.Default){let n=Be();if(n===null)return Ee(t,e);let r=cn();return Km(r,n,rn(t),e)}function TC(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)ai(~i);else{let o=i,s=n[++r],a=n[++r];q9(s,o);let c=e[o];a(2,c)}}}finally{ai(-1)}}function Lc(t,e,n,r,i,o,s,a,c,l,u){let f=e.blueprint.slice();return f[lr]=i,f[te]=r|4|128|8,(l!==null||t&&t[te]&2048)&&(f[te]|=2048),xm(f),f[Ct]=f[eo]=t,f[sn]=n,f[ps]=s||t&&t[ps],f[Dt]=a||t&&t[Dt],f[Wi]=c||t&&t[Wi]||null,f[Zt]=o,f[Sc]=j7(),f[ic]=u,f[vm]=l,f[bn]=e.type==2?t[bn]:f,f}function oo(t,e,n,r,i){let o=t.data[e];if(o===null)o=AC(t,e,n,r,i),z9()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=B9();o.injectorIndex=s===null?-1:s.injectorIndex}return fi(o,!0),o}function AC(t,e,n,r,i){let o=Am(),s=Uf(),a=s?o:o&&o.parent,c=t.data[e]=kC(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=c),o!==null&&(s?o.child==null&&c.parent!==null&&(o.child=c):o.next===null&&(o.next=c,c.prev=o)),c}function M2(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function T2(t,e,n,r,i){let o=to(),s=r&2;try{ai(-1),s&&e.length>Xt&&I2(t,e,Xt,!1),Ln(s?2:0,i),n(r,i)}finally{ai(o),Ln(s?3:1,i)}}function lh(t,e,n){if(Vf(e)){let r=$t(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];a.contentQueries&&a.contentQueries(1,n[s],s)}}finally{$t(r)}}}function uh(t,e,n){Mm()&&(HC(t,e,n,Dn(n,e)),(n.flags&64)===64&&R2(t,e,n))}function dh(t,e,n=Dn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function A2(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=fh(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function fh(t,e,n,r,i,o,s,a,c,l,u){let f=Xt+r,d=f+i,h=OC(f,d),g=typeof l=="function"?l():l;return h[ge]={type:t,blueprint:h,template:n,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:g,incompleteFirstPass:!1,ssrId:u}}function OC(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:hi);return n}function RC(t,e,n,r){let o=r.get(MC,x2)||n===Un.ShadowDom,s=t.selectRootElement(e,o);return PC(s),s}function PC(t){NC(t)}var NC=t=>null;function FC(t,e,n,r){let i=k2(e);i.push(n),t.firstCreatePass&&L2(t).push(r,i.length-1)}function kC(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return Tm()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function Fg(t,e,n,r){for(let i in t)if(t.hasOwnProperty(i)){n=n===null?{}:n;let o=t[i];r===null?kg(n,e,i,o):r.hasOwnProperty(i)&&kg(n,e,r[i],o)}return n}function kg(t,e,n,r){t.hasOwnProperty(n)?t[n].push(e,r):t[n]=[e,r]}function LC(t,e,n){let r=e.directiveStart,i=e.directiveEnd,o=t.data,s=e.attrs,a=[],c=null,l=null;for(let u=r;u<i;u++){let f=o[u],d=n?n.get(f):null,h=d?d.inputs:null,g=d?d.outputs:null;c=Fg(f.inputs,u,c,h),l=Fg(f.outputs,u,l,g);let v=c!==null&&s!==null&&!lm(e)?QC(c,u,s):null;a.push(v)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function VC(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function jC(t,e,n,r,i,o,s,a){let c=Dn(e,n),l=e.inputs,u;!a&&l!=null&&(u=l[r])?(ph(t,n,u,r,i),Dc(e)&&UC(n,e.index)):e.type&3?(r=VC(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(c,r,i)):e.type&12}function UC(t,e){let n=Fr(e,t);n[te]&16||(n[te]|=64)}function hh(t,e,n,r){if(Mm()){let i=r===null?null:{"":-1},o=zC(t,n),s,a;o===null?s=a=null:[s,a]=o,s!==null&&O2(t,e,n,s,i,a),i&&qC(n,r,i)}n.mergedAttrs=Lf(n.mergedAttrs,n.attrs)}function O2(t,e,n,r,i,o){for(let l=0;l<r.length;l++)l7(zm(n,e),t,r[l].type);YC(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let u=r[l];u.providersResolver&&u.providersResolver(u)}let s=!1,a=!1,c=M2(t,e,r.length,null);for(let l=0;l<r.length;l++){let u=r[l];n.mergedAttrs=Lf(n.mergedAttrs,u.hostAttrs),KC(t,n,e,c,u),WC(c,u,i),u.contentQueries!==null&&(n.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(n.flags|=64);let f=u.type.prototype;!s&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!a&&(f.ngOnChanges||f.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}LC(t,n,o)}function BC(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;$C(s)!=a&&s.push(a),s.push(n,r,o)}}function $C(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function HC(t,e,n,r){let i=n.directiveStart,o=n.directiveEnd;Dc(n)&&XC(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||zm(n,e),Or(r,e);let s=n.initialInputs;for(let a=i;a<o;a++){let c=t.data[a],l=Zi(e,t,a,n);if(Or(l,e),s!==null&&ZC(e,a-i,l,c,n,s),Ss(c)){let u=Fr(n.index,e);u[sn]=Zi(e,t,a,n)}}}function R2(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=W9();try{ai(o);for(let a=r;a<i;a++){let c=t.data[a],l=e[a];Xd(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&GC(c,l)}}finally{ai(-1),Xd(s)}}function GC(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function zC(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let o=0;o<n.length;o++){let s=n[o];if(um(e,s.selectors,!1))if(r||(r=[]),Ss(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let c=a.length;vf(t,e,c)}else r.unshift(s),vf(t,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function vf(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function qC(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new Q(-301,!1);r.push(e[i],o)}}}function WC(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Ss(e)&&(n[""]=t)}}function YC(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function KC(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=si(i.type,!0)),s=new ms(o,Ss(i),X);t.blueprint[r]=s,n[r]=s,BC(t,e,r,M2(t,n,i.hostVars,hi),i)}function XC(t,e,n){let r=Dn(e,t),i=A2(n),o=t[ps].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let a=Vc(t,Lc(t,i,null,s,r,e,null,o.createRenderer(r,n),null,null,null));t[e.index]=a}function ZC(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],l=s[a++],u=s[a++];P2(r,n,c,l,u)}}function P2(t,e,n,r,i){let o=$t(null);try{let s=t.inputTransforms;s!==null&&s.hasOwnProperty(r)&&(i=s[r].call(e,i)),t.setInput!==null?t.setInput(e,i,n,r):e[r]=i}finally{$t(o)}}function QC(t,e,n){let r=null,i=0;for(;i<n.length;){let o=n[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(t.hasOwnProperty(o)){r===null&&(r=[]);let s=t[o];for(let a=0;a<s.length;a+=2)if(s[a]===e){r.push(o,s[a+1],n[i+1]);break}}i+=2}return r}function N2(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function F2(t,e){let n=t.contentQueries;if(n!==null){let r=$t(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];$f(o),a.contentQueries(2,e[s],s)}}}finally{$t(r)}}}function Vc(t,e){return t[gs]?t[Sg][_n]=e:t[gs]=e,t[Sg]=e,e}function yf(t,e,n){$f(0);let r=$t(null);try{e(t,n)}finally{$t(r)}}function k2(t){return t[hs]||(t[hs]=[])}function L2(t){return t.cleanup||(t.cleanup=[])}function V2(t,e){let n=t[Wi],r=n?n.get(ar,null):null;r&&r.handleError(e)}function ph(t,e,n,r,i){for(let o=0;o<n.length;){let s=n[o++],a=n[o++],c=e[s],l=t.data[s];P2(l,c,r,a,i)}}function JC(t,e,n){let r=Sm(e,t);G7(t[Dt],r,n)}var e_=100;function t_(t,e=!0){let n=t[ps],r=n.rendererFactory,i=n.afterRenderEventManager,o=!1;o||(r.begin?.(),i?.begin());try{let s=t[ge],a=t[sn];j2(s,t,s.template,a),n_(t)}catch(s){throw e&&V2(t,s),s}finally{o||(r.end?.(),n.inlineEffectRunner?.flush(),i?.end())}}function n_(t){let e=0;for(;t[te]&9216||t[ii]?.dirty;){if(e===e_)throw new Q(103,!1);e++,$2(t,1)}}function j2(t,e,n,r){let i=e[te];if((i&256)===256)return;let o=!1;!o&&e[ps].inlineEffectRunner?.flush(),Hf(e);let s=null,a=null;!o&&r_(t)&&(a=SC(e),s=R0(a));try{xm(e),H9(t.bindingStartIndex),n!==null&&T2(t,e,n,2,r);let c=(i&3)===3;if(!o)if(c){let f=t.preOrderCheckHooks;f!==null&&Xa(e,f,null)}else{let f=t.preOrderHooks;f!==null&&Za(e,f,0,null),Rd(e,0)}if(i_(e),U2(e,0),t.contentQueries!==null&&F2(t,e),!o)if(c){let f=t.contentCheckHooks;f!==null&&Xa(e,f)}else{let f=t.contentHooks;f!==null&&Za(e,f,1),Rd(e,1)}TC(t,e);let l=t.components;l!==null&&H2(e,l,0);let u=t.viewQuery;if(u!==null&&yf(2,u,r),!o)if(c){let f=t.viewCheckHooks;f!==null&&Xa(e,f)}else{let f=t.viewHooks;f!==null&&Za(e,f,2),Rd(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Od]){for(let f of e[Od])f();e[Od]=null}o||(e[te]&=-73)}catch(c){throw xc(e),c}finally{a!==null&&(P0(a,s),EC(a)),Gf()}}function r_(t){return t.type!==2}function U2(t,e){for(let n=d2(t);n!==null;n=f2(n)){n[te]&=~Ki.HasChildViewsToRefresh;for(let r=Kt;r<n.length;r++){let i=n[r];B2(i,e)}}}function i_(t){for(let e=d2(t);e!==null;e=f2(e)){if(!(e[te]&Ki.HasTransplantedViews))continue;let n=e[Yi];for(let r=0;r<n.length;r++){let i=n[r],o=i[Ct];P9(i)}}}function o_(t,e,n){let r=Fr(e,t);B2(r,n)}function B2(t,e){jf(t)&&$2(t,e)}function $2(t,e){let r=t[ge],i=t[te],o=t[ii],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&dd(o)),o&&(o.dirty=!1),t[te]&=-9217,s)j2(r,t,r.template,t[sn]);else if(i&8192){U2(t,1);let a=r.components;a!==null&&H2(t,a,1)}}function H2(t,e,n){for(let r=0;r<e.length;r++)o_(t,e[r],n)}function gh(t){for(;t;){t[te]|=64;let e=th(t);if(x9(t)&&!e)return t;t=e}return null}var ci=class{get rootNodes(){let e=this._lView,n=e[ge];return gc(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[sn]}set context(e){this._lView[sn]=e}get destroyed(){return(this._lView[te]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Ct];if(wn(e)){let n=e[oc],r=n?n.indexOf(this):-1;r>-1&&(of(e,r),lc(n,r))}this._attachedToViewContainer=!1}m2(this._lView[ge],this._lView)}onDestroy(e){F9(this._lView,e)}markForCheck(){gh(this._cdRefInjectingView||this._lView)}detach(){this._lView[te]&=-129}reattach(){Im(this._lView),this._lView[te]|=128}detectChanges(){t_(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Q(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,Y7(this._lView[ge],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Q(902,!1);this._appRef=e}},Is=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=s_;let t=e;return t})();function s_(t){return a_(cn(),Be(),(t&16)===16)}function a_(t,e,n){if(Dc(t)&&!n){let r=Fr(t.index,e);return new ci(r,r)}else if(t.type&47){let r=e[bn];return new ci(r,e)}return null}var Lg=new Set;function G2(t){Lg.has(t)||(Lg.add(t),performance?.mark?.("mark_use_counter",{detail:{feature:t}}))}var Cf=class extends Oe{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=jd(o),i&&(i=jd(i)),s&&(s=jd(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof mt&&e.add(a),a}};function jd(t){return e=>{setTimeout(t,void 0,e)}}var on=Cf;function Vg(...t){}function c_(){let t=typeof or.requestAnimationFrame=="function",e=or[t?"requestAnimationFrame":"setTimeout"],n=or[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var yt=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new on(!1),this.onMicrotaskEmpty=new on(!1),this.onStable=new on(!1),this.onError=new on(!1),typeof Zone>"u")throw new Q(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=c_().nativeRequestAnimationFrame,d_(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new Q(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new Q(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,l_,Vg,Vg);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},l_={};function mh(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function u_(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(or,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,_f(t),t.isCheckStableRunning=!0,mh(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),_f(t))}function d_(t){let e=()=>{u_(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{if(f_(a))return n.invokeTask(i,o,s,a);try{return jg(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),Ug(t)}},onInvoke:(n,r,i,o,s,a,c)=>{try{return jg(t),n.invoke(i,o,s,a,c)}finally{t.shouldCoalesceRunChangeDetection&&e(),Ug(t)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,_f(t),mh(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function _f(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function jg(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Ug(t){t._nesting--,mh(t)}var z2=new Me("",{providedIn:"root",factory:q2});function q2(){let t=K(yt),e=!0,n=new De(i=>{e=t.isStable&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks,t.runOutsideAngular(()=>{i.next(e),i.complete()})}),r=new De(i=>{let o;t.runOutsideAngular(()=>{o=t.onStable.subscribe(()=>{yt.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks&&(e=!0,i.next(!0))})})});let s=t.onUnstable.subscribe(()=>{yt.assertInAngularZone(),e&&(e=!1,t.runOutsideAngular(()=>{i.next(!1)}))});return()=>{o.unsubscribe(),s.unsubscribe()}});return Sd(n,r.pipe(Ui()))}function f_(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}var h_=(()=>{let e=class e{constructor(){this.renderDepth=0,this.handler=null,this.internalCallbacks=[]}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){if(this.renderDepth--,this.renderDepth===0){for(let r of this.internalCallbacks)r();this.internalCallbacks.length=0,this.handler?.execute()}}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=ne({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function p_(t,e){let n=Fr(e,t),r=n[ge];g_(r,n);let i=n[lr];i!==null&&n[ic]===null&&(n[ic]=oh(i,n[Wi])),vh(r,n,n[sn])}function g_(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function vh(t,e,n){Hf(e);try{let r=t.viewQuery;r!==null&&yf(1,r,n);let i=t.template;i!==null&&T2(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&F2(t,e),t.staticViewQueries&&yf(2,t.viewQuery,n);let o=t.components;o!==null&&m_(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[te]&=-5,Gf()}}function m_(t,e){for(let n=0;n<e.length;n++)p_(t,e[n])}function mc(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=hg(i,a);else if(o==2){let c=a,l=e[++s];r=hg(r,c+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var vc=class extends ro{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=ri(e);return new ys(n,this.ngModule)}};function Bg(t){let e=[];for(let n in t)if(t.hasOwnProperty(n)){let r=t[n];e.push({propName:r,templateName:n})}return e}function v_(t){let e=t.toLowerCase();return e==="svg"?wm:e==="math"?A9:null}var bf=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=wc(r);let i=this.injector.get(e,Ld,r);return i!==Ld||n===Ld?i:this.parentInjector.get(e,n,r)}},ys=class extends hc{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=Bg(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return Bg(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=b9(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){i=i||this.ngModule;let o=i instanceof an?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let s=o?new bf(e,o):e,a=s.get(vs,null);if(a===null)throw new Q(407,!1);let c=s.get(yC,null),l=s.get(h_,null),u={rendererFactory:a,sanitizer:c,inlineEffectRunner:null,afterRenderEventManager:l},f=a.createRenderer(null,this.componentDef),d=this.componentDef.selectors[0][0]||"div",h=r?RC(f,r,this.componentDef.encapsulation,s):p2(f,d,v_(d)),g=4608,v=this.componentDef.onPush?576:528,b=this.componentDef.signals?g:v,D=null;h!==null&&(D=oh(h,s,!0));let I=fh(0,null,null,1,0,null,null,null,null,null,null),E=Lc(null,I,null,b,null,null,u,f,s,null,D);Hf(E);let O,U;try{let S=this.componentDef,k,R=null;S.findHostDirectiveDefs?(k=[],R=new Map,S.findHostDirectiveDefs(S,k,R),k.push(S)):k=[S];let j=y_(E,h),B=C_(j,h,S,k,E,u,f);U=Dm(I,Xt),h&&w_(f,S,h,r),n!==void 0&&S_(U,this.ngContentSelectors,n),O=b_(B,S,k,R,E,[D_]),vh(I,E,null)}finally{Gf()}return new wf(this.componentType,O,io(U,E),E,U)}},wf=class extends cf{constructor(e,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new ci(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let o=this._rootLView;ph(o[ge],o,i,e,n),this.previousInputValues.set(e,n);let s=Fr(this._tNode.index,o);gh(s)}}get injector(){return new ni(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function y_(t,e){let n=t[ge],r=Xt;return t[r]=e,oo(n,r,2,"#host",null)}function C_(t,e,n,r,i,o,s){let a=i[ge];__(r,t,e,s);let c=null;e!==null&&(c=oh(e,i[Wi]));let l=o.rendererFactory.createRenderer(e,n),u=16;n.signals?u=4096:n.onPush&&(u=64);let f=Lc(i,A2(n),null,u,i[t.index],t,o,l,null,null,c);return a.firstCreatePass&&vf(a,t,r.length-1),Vc(i,f),i[t.index]=f}function __(t,e,n,r){for(let i of t)e.mergedAttrs=Lf(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(mc(e,e.mergedAttrs,!0),n!==null&&S2(r,n,e))}function b_(t,e,n,r,i,o){let s=cn(),a=i[ge],c=Dn(s,i);O2(a,i,s,n,null,r);for(let u=0;u<n.length;u++){let f=s.directiveStart+u,d=Zi(i,a,f,s);Or(d,i)}R2(a,i,s),c&&Or(c,i);let l=Zi(i,a,s.directiveStart+s.componentOffset,s);if(t[sn]=i[sn]=l,o!==null)for(let u of o)u(l,e);return lh(a,s,t),l}function w_(t,e,n,r){if(r)Yd(t,n,["ng-version",CC.full]);else{let{attrs:i,classes:o}=w9(e.selectors[0]);i&&Yd(t,n,i),o&&o.length>0&&w2(t,n,o.join(" "))}}function S_(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null?Array.from(o):null)}}function D_(){let t=cn();Tc(Be()[ge],t)}function E_(t,e,n){return t[e]=n}function jc(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function x_(t,e,n,r){return jc(t,Rm(),n)?e+em(n)+r:hi}function Ka(t,e){return t<<17|e<<2}function li(t){return t>>17&32767}function I_(t){return(t&2)==2}function M_(t,e){return t&131071|e<<17}function Sf(t){return t|2}function Ji(t){return(t&131068)>>2}function Ud(t,e){return t&-131069|e<<2}function T_(t){return(t&1)===1}function Df(t){return t|1}function A_(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=li(s),c=Ji(s);t[r]=n;let l=!1,u;if(Array.isArray(n)){let f=n;u=f[1],(u===null||Ds(f,u)>0)&&(l=!0)}else u=n;if(i)if(c!==0){let d=li(t[a+1]);t[r+1]=Ka(d,a),d!==0&&(t[d+1]=Ud(t[d+1],r)),t[a+1]=M_(t[a+1],r)}else t[r+1]=Ka(a,0),a!==0&&(t[a+1]=Ud(t[a+1],r)),a=r;else t[r+1]=Ka(c,0),a===0?a=r:t[c+1]=Ud(t[c+1],r),c=r;l&&(t[r+1]=Sf(t[r+1])),$g(t,u,r,!0,o),$g(t,u,r,!1,o),O_(e,u,t,r,o),s=Ka(a,c),o?e.classBindings=s:e.styleBindings=s}function O_(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&Ds(o,e)>=0&&(n[r+1]=Df(n[r+1]))}function $g(t,e,n,r,i){let o=t[n+1],s=e===null,a=r?li(o):Ji(o),c=!1;for(;a!==0&&(c===!1||s);){let l=t[a],u=t[a+1];R_(l,e)&&(c=!0,t[a+1]=r?Df(u):Sf(u)),a=r?li(u):Ji(u)}c&&(t[n+1]=r?Sf(o):Df(o))}function R_(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Ds(t,e)>=0:!1}function G(t,e,n){let r=Be(),i=Rm();if(jc(r,i,e)){let o=Yt(),s=Z9();jC(o,s,r,t,e,r[Dt],n,!1)}return G}function Hg(t,e,n,r,i){let o=e.inputs,s=i?"class":"style";ph(t,n,o[s],s,r)}function Uc(t,e,n){return W2(t,e,n,!1),Uc}function Hn(t,e){return W2(t,e,null,!0),Hn}function W2(t,e,n,r){let i=Be(),o=Yt(),s=G9(2);if(o.firstUpdatePass&&N_(o,t,s,r),e!==hi&&jc(i,s,e)){let a=o.data[to()];j_(o,a,i,i[Dt],t,i[s+1]=U_(e,n),r,s)}}function P_(t,e){return e>=t.expandoStartIndex}function N_(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[to()],s=P_(t,n);B_(o,r)&&e===null&&!s&&(e=!1),e=F_(i,o,e,r),A_(i,o,e,n,s,r)}}function F_(t,e,n,r){let i=Y9(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Bd(null,t,e,n,r),n=Cs(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=Bd(i,t,e,n,r),o===null){let c=k_(t,e,r);c!==void 0&&Array.isArray(c)&&(c=Bd(null,t,e,c[1],r),c=Cs(c,e.attrs,r),L_(t,e,r,c))}else o=V_(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function k_(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Ji(r)!==0)return t[li(r)]}function L_(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[li(i)]=r}function V_(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=Cs(r,s,n)}return Cs(r,e.attrs,n)}function Bd(t,e,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],r=Cs(r,o.hostAttrs,i),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function Cs(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),C7(t,s,n?!0:e[++o]))}return t===void 0?null:t}function j_(t,e,n,r,i,o,s,a){if(!(e.type&3))return;let c=t.data,l=c[a+1],u=T_(l)?Gg(c,e,n,i,Ji(l),s):void 0;if(!yc(u)){yc(o)||I_(l)&&(o=Gg(c,null,n,i,a,s));let f=Sm(to(),n);cC(r,s,f,i,o)}}function Gg(t,e,n,r,i,o){let s=e===null,a;for(;i>0;){let c=t[i],l=Array.isArray(c),u=l?c[1]:c,f=u===null,d=n[i+1];d===hi&&(d=f?Cn:void 0);let h=f?Nd(d,r):u===r?d:void 0;if(l&&!yc(h)&&(h=Nd(c,r)),yc(h)&&(a=h,s))return a;let g=t[i+1];i=s?li(g):Ji(g)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=Nd(c,r))}return a}function yc(t){return t!==void 0}function U_(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=Lt(ih(t)))),t}function B_(t,e){return(t.flags&(e?8:16))!==0}var hj=new RegExp(`^(\\d+)*(${dC}|${uC})*(.*)`);var $_=(t,e)=>null;function zg(t,e){return $_(t,e)}function H_(t,e,n,r){let i=e.tView,s=t[te]&4096?4096:16,a=Lc(t,i,n,s,null,e,null,null,null,r?.injector??null,r?.dehydratedView??null),c=t[e.index];a[ws]=c;let l=t[jn];return l!==null&&(a[jn]=l.createEmbeddedView(i)),vh(i,a,n),a}function qg(t,e){return!e||l2(t)}function G_(t,e,n,r=!0){let i=e[ge];if(X7(i,e,t,n),r){let o=sf(n,t),s=e[Dt],a=nh(s,t[oi]);a!==null&&W7(i,t[Zt],s,e,a,o)}}var En=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=z_;let t=e;return t})();function z_(){let t=cn();return K2(t,Be())}var q_=En,Y2=class extends q_{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return io(this._hostTNode,this._hostLView)}get injector(){return new ni(this._hostTNode,this._hostLView)}get parentInjector(){let e=zf(this._hostTNode,this._hostLView);if($m(e)){let n=ac(e,this._hostLView),r=sc(e),i=n[ge].data[r+8];return new ni(i,n)}else return new ni(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=Wg(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Kt}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=zg(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,qg(this._hostTNode,s)),a}createComponent(e,n,r,i,o){let s=e&&!g7(e),a;if(s)a=n;else{let g=n||{};a=g.index,r=g.injector,i=g.projectableNodes,o=g.environmentInjector||g.ngModuleRef}let c=s?e:new ys(ri(e)),l=r||this.parentInjector;if(!o&&c.ngModule==null){let v=(s?l:this.parentInjector).get(an,null);v&&(o=v)}let u=ri(c.componentType??{}),f=zg(this._lContainer,u?.id??null),d=f?.firstChild??null,h=c.create(l,i,d,o);return this.insertImpl(h.hostView,a,qg(this._hostTNode,f)),h}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(R9(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Ct],l=new Y2(c,c[Zt],c[Ct]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return G_(s,i,o,r),e.attachToViewContainerRef(),Jm($d(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=Wg(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=of(this._lContainer,n);r&&(lc($d(this._lContainer),n),m2(r[ge],r))}detach(e){let n=this._adjustIndex(e,-1),r=of(this._lContainer,n);return r&&lc($d(this._lContainer),n)!=null?new ci(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function Wg(t){return t[oc]}function $d(t){return t[oc]||(t[oc]=[])}function K2(t,e){let n,r=e[t.index];return wn(r)?n=r:(n=N2(r,e,null,t),e[t.index]=n,Vc(e,n)),Y_(n,e,t,r),new Y2(n,t,e)}function W_(t,e){let n=t[Dt],r=n.createComment(""),i=Dn(e,t),o=nh(n,i);return fc(n,o,r,nC(n,i),!1),r}var Y_=Z_,K_=(t,e,n)=>!1;function X_(t,e,n){return K_(t,e,n)}function Z_(t,e,n,r){if(t[oi])return;let i;n.type&8?i=Bn(r):i=W_(e,n),t[oi]=i}function Q_(t,e,n,r,i,o,s,a,c){let l=e.consts,u=oo(e,t,4,s||null,Xi(l,a));hh(e,n,u,Xi(l,c)),Tc(e,u);let f=u.tView=fh(2,u,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,u),f.queries=e.queries.embeddedTView(u)),u}function ce(t,e,n,r,i,o,s,a){let c=Be(),l=Yt(),u=t+Xt,f=l.firstCreatePass?Q_(u,l,c,e,n,r,i,o,s):l.data[u];fi(f,!1);let d=J_(l,c,f,t);Ic()&&Nc(l,c,d,f),Or(d,c);let h=N2(d,c,d,f);return c[u]=h,Vc(c,h),X_(h,f,c),Ec(f)&&uh(l,c,f),s!=null&&dh(c,f,a),ce}var J_=eb;function eb(t,e,n,r){return Mc(!0),e[Dt].createComment("")}function tb(t,e,n,r,i,o){let s=e.consts,a=Xi(s,i),c=oo(e,t,2,r,a);return hh(e,n,c,Xi(s,o)),c.attrs!==null&&mc(c,c.attrs,!1),c.mergedAttrs!==null&&mc(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function x(t,e,n,r){let i=Be(),o=Yt(),s=Xt+t,a=i[Dt],c=o.firstCreatePass?tb(s,o,i,e,n,r):o.data[s],l=nb(o,i,c,a,e,t);i[s]=l;let u=Ec(c);return fi(c,!0),S2(a,l,c),(c.flags&32)!==32&&Ic()&&Nc(o,i,l,c),k9()===0&&Or(l,i),L9(),u&&(uh(o,i,c),lh(o,c,i)),r!==null&&dh(i,c),x}function A(){let t=cn();Uf()?Bf():(t=t.parent,fi(t,!1));let e=t;j9(e)&&U9(),V9();let n=Yt();return n.firstCreatePass&&(Tc(n,t),Vf(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&r7(e)&&Hg(n,e,Be(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&i7(e)&&Hg(n,e,Be(),e.stylesWithoutHost,!1),A}function H(t,e,n,r){return x(t,e,n,r),A(),H}var nb=(t,e,n,r,i,o)=>(Mc(!0),p2(r,i,J9()));function rb(t,e,n,r,i){let o=e.consts,s=Xi(o,r),a=oo(e,t,8,"ng-container",s);s!==null&&mc(a,s,!0);let c=Xi(o,i);return hh(e,n,a,c),e.queries!==null&&e.queries.elementStart(e,a),a}function Ze(t,e,n){let r=Be(),i=Yt(),o=t+Xt,s=i.firstCreatePass?rb(o,i,r,e,n):i.data[o];fi(s,!0);let a=ib(i,r,s,t);return r[o]=a,Ic()&&Nc(i,r,a,s),Or(a,r),Ec(s)&&(uh(i,r,s),lh(i,s,r)),n!=null&&dh(r,s),Ze}function Qe(){let t=cn(),e=Yt();return Uf()?Bf():(t=t.parent,fi(t,!1)),e.firstCreatePass&&(Tc(e,t),Vf(t)&&e.queries.elementEnd(t)),Qe}function at(t,e,n){return Ze(t,e,n),Qe(),at}var ib=(t,e,n,r)=>(Mc(!0),z7(e[Dt],""));function Ot(){return Be()}var ti=void 0;function ob(t){let e=t,n=Math.floor(Math.abs(t)),r=t.toString().replace(/^[^.]*\.?/,"").length;return n===1&&r===0?1:5}var sb=["en",[["a","p"],["AM","PM"],ti],[["AM","PM"],ti,ti],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ti,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ti,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ti,"{1} 'at' {0}",ti],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",ob],Hd={};function yh(t){let e=ab(t),n=Yg(e);if(n)return n;let r=e.split("-")[0];if(n=Yg(r),n)return n;if(r==="en")return sb;throw new Q(701,!1)}function Yg(t){return t in Hd||(Hd[t]=or.ng&&or.ng.common&&or.ng.common.locales&&or.ng.common.locales[t]),Hd[t]}var so=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(so||{});function ab(t){return t.toLowerCase().replace(/_/g,"-")}var Cc="en-US";var cb=Cc;function lb(t){Zy(t,"Expected localeId to be defined"),typeof t=="string"&&(cb=t.toLowerCase().replace(/_/g,"-"))}function ao(t){return!!t&&typeof t.then=="function"}function Ch(t){return!!t&&typeof t.subscribe=="function"}function ie(t,e,n,r){let i=Be(),o=Yt(),s=cn();return db(o,i,i[Dt],s,t,e,r),ie}function ub(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[hs],c=i[o+2];return a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function db(t,e,n,r,i,o,s){let a=Ec(r),l=t.firstCreatePass&&L2(t),u=e[sn],f=k2(e),d=!0;if(r.type&3||s){let v=Dn(r,e),b=s?s(v):v,D=f.length,I=s?O=>s(Bn(O[r.index])):r.index,E=null;if(!s&&a&&(E=ub(t,e,i,r.index)),E!==null){let O=E.__ngLastListenerFn__||E;O.__ngNextListenerFn__=o,E.__ngLastListenerFn__=o,d=!1}else{o=Xg(r,e,u,o,!1);let O=n.listen(b,i,o);f.push(o,O),l&&l.push(i,I,D,D+1)}}else o=Xg(r,e,u,o,!1);let h=r.outputs,g;if(d&&h!==null&&(g=h[i])){let v=g.length;if(v)for(let b=0;b<v;b+=2){let D=g[b],I=g[b+1],U=e[D][I].subscribe(o),S=f.length;f.push(o,U),l&&l.push(i,r.index,S,-(S+1))}}}function Kg(t,e,n,r){try{return Ln(6,e,n),n(r)!==!1}catch(i){return V2(t,i),!1}finally{Ln(7,e,n)}}function Xg(t,e,n,r,i){return function o(s){if(s===Function)return r;let a=t.componentOffset>-1?Fr(t.index,e):e;gh(a);let c=Kg(e,n,r,s),l=o.__ngNextListenerFn__;for(;l;)c=Kg(e,n,l,s)&&c,l=l.__ngNextListenerFn__;return i&&c===!1&&s.preventDefault(),c}}function Z(t=1){return X9(t)}function fb(t,e){let n=null,r=m9(t);for(let i=0;i<e.length;i++){let o=e[i];if(o==="*"){n=i;continue}if(r===null?um(t,o,!0):C9(r,o))return i}return n}function X2(t){let e=Be()[bn][Zt];if(!e.projection){let n=t?t.length:1,r=e.projection=e2(n,null),i=r.slice(),o=e.child;for(;o!==null;){let s=t?fb(o,t):0;s!==null&&(i[s]?i[s].projectionNext=o:r[s]=o,i[s]=o),o=o.next}}}function Z2(t,e=0,n){let r=Be(),i=Yt(),o=oo(i,Xt+t,16,null,n||null);o.projection===null&&(o.projection=e),Bf(),(!r[ic]||Tm())&&(o.flags&32)!==32&&sC(i,r,o)}function hb(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function Ye(t){let e=$9();return Em(e,Xt+t)}function J(t,e=""){let n=Be(),r=Yt(),i=t+Xt,o=r.firstCreatePass?oo(r,i,1,e,null):r.data[i],s=pb(r,n,o,e,t);n[i]=s,Ic()&&Nc(r,n,s,o),fi(o,!1)}var pb=(t,e,n,r,i)=>(Mc(!0),H7(e[Dt],r));function co(t){return Lr("",t,""),co}function Lr(t,e,n){let r=Be(),i=x_(r,t,e,n);return i!==hi&&JC(r,to(),i),Lr}var Rr=class{},_s=class{};var Ef=class extends Rr{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new vc(this);let i=pm(e);this._bootstrapComponents=c2(i.bootstrap),this._r3Injector=s2(e,n,[{provide:Rr,useValue:this},{provide:ro,useValue:this.componentFactoryResolver},...r],Lt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},xf=class extends _s{constructor(e){super(),this.moduleType=e}create(e){return new Ef(this.moduleType,e,[])}};var _c=class extends Rr{constructor(e){super(),this.componentFactoryResolver=new vc(this),this.instance=null;let n=new dc([...e.providers,{provide:Rr,useValue:this},{provide:ro,useValue:this.componentFactoryResolver}],e.parent||Xf(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function _h(t,e,n=null){return new _c({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var gb=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=r2(!1,r.type),o=i.length>0?_h([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,o)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=ne({token:e,providedIn:"environment",factory:()=>new e(Ee(an))});let t=e;return t})();function de(t){G2("NgStandalone"),t.getStandaloneInjector=e=>e.get(gb).getOrCreateStandaloneInjector(t)}function Q2(t,e,n,r){return J2(Be(),Om(),t,e,n,r)}function mb(t,e){let n=t[e];return n===hi?void 0:n}function J2(t,e,n,r,i,o){let s=e+n;return jc(t,s,i)?E_(t,s+1,o?r.call(o,i):r(i)):mb(t,s+1)}function Je(t,e){let n=Yt(),r,i=t+Xt;n.firstCreatePass?(r=vb(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let o=r.factory||(r.factory=si(r.type,!0)),s,a=nn(X);try{let c=cc(!1),l=o();return cc(c),hb(n,Be(),i,l),l}finally{nn(a)}}function vb(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function et(t,e,n){let r=t+Xt,i=Be(),o=Em(i,r);return yb(i,r)?J2(i,Om(),e,o.transform,n,o):o.transform(n)}function yb(t,e){return t[ge].data[e].pure}function Cb(){return this._results[Symbol.iterator]()}var If=class t{get changes(){return this._changes||(this._changes=new on)}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;let n=t.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=Cb)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let r=v7(e);(this._changesDetected=!m7(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}},ui=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=wb;let t=e;return t})(),_b=ui,bb=class extends _b{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=H_(this._declarationLView,this._declarationTContainer,e,{injector:n,dehydratedView:r});return new ci(i)}};function wb(){return Bc(cn(),Be())}function Bc(t,e){return t.type&4?new bb(e,t,io(t,e)):null}var Mf=class t{constructor(e){this.queryList=e,this.matches=null}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},Tf=class t{constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let r=e.contentQueries!==null?e.contentQueries[0]:n.length,i=[];for(let o=0;o<r;o++){let s=n.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new t(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)tv(e,n).matches!==null&&this.queries[n].setDirty()}},Af=class{constructor(e,n,r=null){this.predicate=e,this.flags=n,this.read=r}},Of=class t{constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,n!==null?n.push(o):n=[o])}return n!==null?new t(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Rf=class t{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,n,Sb(n,o)),this.matchTNodeWithReadOption(e,n,Qa(n,e,o,!1,!1))}else r===ui?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,Qa(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===$n||i===En||i===ui&&n.type&4)this.addMatch(n.index,-2);else{let o=Qa(n,e,i,!1,!1);o!==null&&this.addMatch(n.index,o)}else this.addMatch(n.index,r)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function Sb(t,e){let n=t.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1]}return null}function Db(t,e){return t.type&11?io(t,e):t.type&4?Bc(t,e):null}function Eb(t,e,n,r){return n===-1?Db(e,t):n===-2?xb(t,e,r):Zi(t,t[ge],n,e)}function xb(t,e,n){if(n===$n)return io(e,t);if(n===ui)return Bc(e,t);if(n===En)return K2(e,t)}function ev(t,e,n,r){let i=e[jn].queries[r];if(i.matches===null){let o=t.data,s=n.matches,a=[];for(let c=0;c<s.length;c+=2){let l=s[c];if(l<0)a.push(null);else{let u=o[l];a.push(Eb(e,u,s[c+1],n.metadata.read))}}i.matches=a}return i.matches}function Pf(t,e,n,r){let i=t.queries.getByIndex(n),o=i.matches;if(o!==null){let s=ev(t,e,i,n);for(let a=0;a<o.length;a+=2){let c=o[a];if(c>0)r.push(s[a/2]);else{let l=o[a+1],u=e[-c];for(let f=Kt;f<u.length;f++){let d=u[f];d[ws]===d[Ct]&&Pf(d[ge],d,l,r)}if(u[Yi]!==null){let f=u[Yi];for(let d=0;d<f.length;d++){let h=f[d];Pf(h[ge],h,l,r)}}}}}return r}function Gn(t){let e=Be(),n=Yt(),r=Pm();$f(r+1);let i=tv(n,r);if(t.dirty&&O9(e)===((i.metadata.flags&2)===2)){if(i.matches===null)t.reset([]);else{let o=i.crossesNgTemplate?Pf(n,e,r,[]):ev(n,e,i,r);t.reset(o,mC),t.notifyOnChanges()}return!0}return!1}function ur(t,e,n){let r=Yt();r.firstCreatePass&&(Tb(r,new Af(t,e,n),-1),(e&2)===2&&(r.staticViewQueries=!0)),Mb(r,Be(),e)}function zn(){return Ib(Be(),Pm())}function Ib(t,e){return t[jn].queries[e].queryList}function Mb(t,e,n){let r=new If((n&4)===4);FC(t,e,r,r.destroy),e[jn]===null&&(e[jn]=new Tf),e[jn].queries.push(new Mf(r))}function Tb(t,e,n){t.queries===null&&(t.queries=new Of),t.queries.track(new Rf(e,n))}function tv(t,e){return t.queries.getByIndex(e)}function ot(t,e){return Bc(t,e)}var $c=new Me("Application Initializer"),nv=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=K($c,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let o of this.appInits){let s=o();if(ao(s))r.push(s);else if(Ch(s)){let a=new Promise((c,l)=>{s.subscribe({complete:c,error:l})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(o=>{this.reject(o)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Hc=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();function Ab(){return typeof $localize<"u"&&$localize.locale||Cc}var Gc=new Me("LocaleId",{providedIn:"root",factory:()=>K(Gc,Ce.Optional|Ce.SkipSelf)||Ab()});var bh=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new qe(!1)}add(){this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Nf=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},wh=(()=>{let e=class e{compileModuleSync(r){return new xf(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),o=pm(r),s=c2(o.declarations).reduce((a,c)=>{let l=ri(c);return l&&a.push(new ys(l)),a},[]);return new Nf(i,s)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var rv=new Me("");var tc=null;var iv=new Me("PlatformDestroyListeners"),Sh=new Me("appBootstrapListener");function Ob(){F0(()=>{throw new Q(600,!1)})}function Rb(t){return t.isBoundToModule}function Pb(t=[]){if(tc)return tc;let e=Fb(t);return tc=e,Ob(),Nb(e),e}function Nb(t){t.get(Qf,null)?.forEach(n=>n())}function ov(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=Pb(r),o=[Bb(),...n||[]],a=new _c({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,c=a.get(yt);return c.run(()=>{a.resolveInjectorInitializers();let l=a.get(ar,null),u;c.runOutsideAngular(()=>{u=c.onError.subscribe({next:h=>{l.handleError(h)}})});let f=()=>a.destroy(),d=i.get(iv);return d.add(f),a.onDestroy(()=>{u.unsubscribe(),d.delete(f)}),Lb(l,c,()=>{let h=a.get(nv);return h.runInitializers(),h.donePromise.then(()=>{let g=a.get(Gc,Cc);lb(g||Cc);let v=a.get(pi);return e!==void 0&&v.bootstrap(e),v})})})}catch(e){return Promise.reject(e)}}function Fb(t=[],e){return kr.create({name:e,providers:[{provide:Rc,useValue:"platform"},{provide:iv,useValue:new Set([()=>tc=null])},...t]})}function kb(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}function Lb(t,e,n){try{let r=n();return ao(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var pi=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=K(sv),this.zoneIsStable=K(z2),this.componentTypes=[],this.components=[],this.isStable=K(bh).hasPendingTasks.pipe(It(r=>r?re(!1):this.zoneIsStable),Gt(),Ui()),this._injector=K(an)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let o=r instanceof hc;if(!this._injector.get(nv).done){let g="Cannot bootstrap as there are still asynchronous initializers running."+(!o&&hm(r)?"":" Bootstrap components in the `ngDoBootstrap` method of the root module.");throw new Q(405,!1)}let a;o?a=r:a=this._injector.get(ro).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let c=Rb(a)?void 0:this._injector.get(Rr),l=i||a.selector,u=a.create(kr.NULL,[],l,c),f=u.location.nativeElement,d=u.injector.get(rv,null);return d?.registerApplication(f),u.onDestroy(()=>{this.detachView(u.hostView),Gd(this.components,u),d?.unregisterApplication(f)}),this._loadComponent(u),u}tick(){if(this._runningTick)throw new Q(101,!1);try{this._runningTick=!0;for(let r of this._views)r.detectChanges()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;Gd(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(Sh,[]);[...this._bootstrapListeners,...i].forEach(o=>o(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>Gd(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new Q(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Gd(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}var sv=new Me("",{providedIn:"root",factory:()=>K(ar).handleError.bind(void 0)});function Vb(){let t=K(yt),e=K(ar);return n=>t.runOutsideAngular(()=>e.handleError(n))}var jb=(()=>{let e=class e{constructor(){this.zone=K(yt),this.applicationRef=K(pi)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Ub(t){return[{provide:yt,useFactory:t},{provide:Es,multi:!0,useFactory:()=>{let e=K(jb,{optional:!0});return()=>e.initialize()}},{provide:sv,useFactory:Vb},{provide:z2,useFactory:q2}]}function Bb(t){let e=Ub(()=>new yt(kb(t)));return Oc([[],e])}var Ih=null;function uo(){return Ih}function hv(t){Ih||(Ih=t)}var zc=class{},Qt=new Me("DocumentToken"),pv=(()=>{let e=class e{historyGo(r){throw new Error("Not implemented")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ne({token:e,factory:()=>(()=>K(zb))(),providedIn:"platform"});let t=e;return t})();var zb=(()=>{let e=class e extends pv{constructor(){super(),this._doc=K(Qt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return uo().getBaseHref(this._doc)}onPopState(r){let i=uo().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=uo().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,o){this._history.pushState(r,i,o)}replaceState(r,i,o){this._history.replaceState(r,i,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ne({token:e,factory:()=>(()=>new e)(),providedIn:"platform"});let t=e;return t})();function gv(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function av(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function gi(t){return t&&t[0]!=="?"?"?"+t:t}var Yc=(()=>{let e=class e{historyGo(r){throw new Error("Not implemented")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ne({token:e,factory:()=>(()=>K(mv))(),providedIn:"root"});let t=e;return t})(),qb=new Me("appBaseHref"),mv=(()=>{let e=class e extends Yc{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??K(Qt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return gv(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+gi(this._platformLocation.search),o=this._platformLocation.hash;return o&&r?`${i}${o}`:i}pushState(r,i,o,s){let a=this.prepareExternalUrl(o+gi(s));this._platformLocation.pushState(r,i,a)}replaceState(r,i,o,s){let a=this.prepareExternalUrl(o+gi(s));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(Ee(pv),Ee(qb,8))},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Ts=(()=>{let e=class e{constructor(r){this._subject=new on,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=Kb(av(cv(i))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+gi(i))}normalize(r){return e.stripTrailingSlash(Yb(this._basePath,cv(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",o=null){this._locationStrategy.pushState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+gi(i)),o)}replaceState(r,i="",o=null){this._locationStrategy.replaceState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+gi(i)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(o=>o(r,i))}subscribe(r,i,o){return this._subject.subscribe({next:r,error:i,complete:o})}};e.normalizeQueryParams=gi,e.joinWithSlash=gv,e.stripTrailingSlash=av,e.\u0275fac=function(i){return new(i||e)(Ee(Yc))},e.\u0275prov=ne({token:e,factory:()=>Wb(),providedIn:"root"});let t=e;return t})();function Wb(){return new Ts(Ee(Yc))}function Yb(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function cv(t){return t.replace(/\/index.html$/,"")}function Kb(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var vv=function(t){return t[t.Decimal=0]="Decimal",t[t.Percent=1]="Percent",t[t.Currency=2]="Currency",t[t.Scientific=3]="Scientific",t}(vv||{});var xn=function(t){return t[t.Decimal=0]="Decimal",t[t.Group=1]="Group",t[t.List=2]="List",t[t.PercentSign=3]="PercentSign",t[t.PlusSign=4]="PlusSign",t[t.MinusSign=5]="MinusSign",t[t.Exponential=6]="Exponential",t[t.SuperscriptingExponent=7]="SuperscriptingExponent",t[t.PerMille=8]="PerMille",t[t.Infinity=9]="Infinity",t[t.NaN=10]="NaN",t[t.TimeSeparator=11]="TimeSeparator",t[t.CurrencyDecimal=12]="CurrencyDecimal",t[t.CurrencyGroup=13]="CurrencyGroup",t}(xn||{});function lo(t,e){let n=yh(t),r=n[so.NumberSymbols][e];if(typeof r>"u"){if(e===xn.CurrencyDecimal)return n[so.NumberSymbols][xn.Decimal];if(e===xn.CurrencyGroup)return n[so.NumberSymbols][xn.Group]}return r}function Xb(t,e){return yh(t)[so.NumberFormats][e]}var Zb=/^(\d+)?\.((\d+)(-(\d+))?)?$/,lv=22,qc=".",Ms="0",Qb=";",Jb=",",Dh="#";var ew="%";function tw(t,e,n,r,i,o,s=!1){let a="",c=!1;if(!isFinite(t))a=lo(n,xn.Infinity);else{let l=ow(t);s&&(l=iw(l));let u=e.minInt,f=e.minFrac,d=e.maxFrac;if(o){let I=o.match(Zb);if(I===null)throw new Error(`${o} is not a valid digit info`);let E=I[1],O=I[3],U=I[5];E!=null&&(u=Eh(E)),O!=null&&(f=Eh(O)),U!=null?d=Eh(U):O!=null&&f>d&&(d=f)}sw(l,f,d);let h=l.digits,g=l.integerLen,v=l.exponent,b=[];for(c=h.every(I=>!I);g<u;g++)h.unshift(0);for(;g<0;g++)h.unshift(0);g>0?b=h.splice(g,h.length):(b=h,h=[0]);let D=[];for(h.length>=e.lgSize&&D.unshift(h.splice(-e.lgSize,h.length).join(""));h.length>e.gSize;)D.unshift(h.splice(-e.gSize,h.length).join(""));h.length&&D.unshift(h.join("")),a=D.join(lo(n,r)),b.length&&(a+=lo(n,i)+b.join("")),v&&(a+=lo(n,xn.Exponential)+"+"+v)}return t<0&&!c?a=e.negPre+a+e.negSuf:a=e.posPre+a+e.posSuf,a}function nw(t,e,n){let r=Xb(e,vv.Percent),i=rw(r,lo(e,xn.MinusSign));return tw(t,i,e,xn.Group,xn.Decimal,n,!0).replace(new RegExp(ew,"g"),lo(e,xn.PercentSign))}function rw(t,e="-"){let n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=t.split(Qb),i=r[0],o=r[1],s=i.indexOf(qc)!==-1?i.split(qc):[i.substring(0,i.lastIndexOf(Ms)+1),i.substring(i.lastIndexOf(Ms)+1)],a=s[0],c=s[1]||"";n.posPre=a.substring(0,a.indexOf(Dh));for(let u=0;u<c.length;u++){let f=c.charAt(u);f===Ms?n.minFrac=n.maxFrac=u+1:f===Dh?n.maxFrac=u+1:n.posSuf+=f}let l=a.split(Jb);if(n.gSize=l[1]?l[1].length:0,n.lgSize=l[2]||l[1]?(l[2]||l[1]).length:0,o){let u=i.length-n.posPre.length-n.posSuf.length,f=o.indexOf(Dh);n.negPre=o.substring(0,f).replace(/'/g,""),n.negSuf=o.slice(f+u).replace(/'/g,"")}else n.negPre=e+n.posPre,n.negSuf=n.posSuf;return n}function iw(t){if(t.digits[0]===0)return t;let e=t.digits.length-t.integerLen;return t.exponent?t.exponent+=2:(e===0?t.digits.push(0,0):e===1&&t.digits.push(0),t.integerLen+=2),t}function ow(t){let e=Math.abs(t)+"",n=0,r,i,o,s,a;for((i=e.indexOf(qc))>-1&&(e=e.replace(qc,"")),(o=e.search(/e/i))>0?(i<0&&(i=o),i+=+e.slice(o+1),e=e.substring(0,o)):i<0&&(i=e.length),o=0;e.charAt(o)===Ms;o++);if(o===(a=e.length))r=[0],i=1;else{for(a--;e.charAt(a)===Ms;)a--;for(i-=o,r=[],s=0;o<=a;o++,s++)r[s]=Number(e.charAt(o))}return i>lv&&(r=r.splice(0,lv-1),n=i-1,i=1),{digits:r,exponent:n,integerLen:i}}function sw(t,e,n){if(e>n)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${n}).`);let r=t.digits,i=r.length-t.integerLen,o=Math.min(Math.max(e,i),n),s=o+t.integerLen,a=r[s];if(s>0){r.splice(Math.max(t.integerLen,s));for(let f=s;f<r.length;f++)r[f]=0}else{i=Math.max(0,i),t.integerLen=1,r.length=Math.max(1,s=o+1),r[0]=0;for(let f=1;f<s;f++)r[f]=0}if(a>=5)if(s-1<0){for(let f=0;f>s;f--)r.unshift(0),t.integerLen++;r.unshift(1),t.integerLen++}else r[s-1]++;for(;i<Math.max(0,o);i++)r.push(0);let c=o!==0,l=e+t.integerLen,u=r.reduceRight(function(f,d,h,g){return d=d+f,g[h]=d<10?d:d-10,c&&(g[h]===0&&h>=l?g.pop():c=!1),d>=10?1:0},0);u&&(r.unshift(u),t.integerLen++)}function Eh(t){let e=parseInt(t);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+t);return e}function yv(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var xh=/\s+/,uv=[],Cv=(()=>{let e=class e{constructor(r,i,o,s){this._iterableDiffers=r,this._keyValueDiffers=i,this._ngEl=o,this._renderer=s,this.initialClasses=uv,this.stateMap=new Map}set klass(r){this.initialClasses=r!=null?r.trim().split(xh):uv}set ngClass(r){this.rawClass=typeof r=="string"?r.trim().split(xh):r}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let r=this.rawClass;if(Array.isArray(r)||r instanceof Set)for(let i of r)this._updateState(i,!0);else if(r!=null)for(let i of Object.keys(r))this._updateState(i,!!r[i]);this._applyStateDiff()}_updateState(r,i){let o=this.stateMap.get(r);o!==void 0?(o.enabled!==i&&(o.changed=!0,o.enabled=i),o.touched=!0):this.stateMap.set(r,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let r of this.stateMap){let i=r[0],o=r[1];o.changed?(this._toggleClass(i,o.enabled),o.changed=!1):o.touched||(o.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),o.touched=!1}}_toggleClass(r,i){r=r.trim(),r.length>0&&r.split(xh).forEach(o=>{i?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}};e.\u0275fac=function(i){return new(i||e)(X(kc),X(ch),X($n),X(Fc))},e.\u0275dir=cr({type:e,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0});let t=e;return t})();var Mh=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Kc=(()=>{let e=class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,o){this._viewContainer=r,this._template=i,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(!1)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let i=this._viewContainer;r.forEachOperation((o,s,a)=>{if(o.previousIndex==null)i.createEmbeddedView(this._template,new Mh(o.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)i.remove(s===null?void 0:s);else if(s!==null){let c=i.get(s);i.move(c,a),dv(c,o)}});for(let o=0,s=i.length;o<s;o++){let c=i.get(o).context;c.index=o,c.count=s,c.ngForOf=this._ngForOf}r.forEachIdentityChange(o=>{let s=i.get(o.currentIndex);dv(s,o)})}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(X(En),X(ui),X(kc))},e.\u0275dir=cr({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let t=e;return t})();function dv(t,e){t.context.$implicit=e.item}var bt=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new Th,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){fv("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){fv("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(X(En),X(ui))},e.\u0275dir=cr({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),Th=class{constructor(){this.$implicit=null,this.ngIf=null}};function fv(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${Lt(e)}'.`)}var qn=(()=>{let e=class e{constructor(r){this._viewContainerRef=r,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(r){if(this._shouldRecreateView(r)){let i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),!this.ngTemplateOutlet){this._viewRef=null;return}let o=this._createContextForwardProxy();this._viewRef=i.createEmbeddedView(this.ngTemplateOutlet,o,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(r){return!!r.ngTemplateOutlet||!!r.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(r,i,o)=>this.ngTemplateOutletContext?Reflect.set(this.ngTemplateOutletContext,i,o):!1,get:(r,i,o)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,i,o)}})}};e.\u0275fac=function(i){return new(i||e)(X(En))},e.\u0275dir=cr({type:e,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[Sn]});let t=e;return t})();function _v(t,e){return new Q(2100,!1)}var Ah=class{createSubscription(e,n){return sh(()=>e.subscribe({next:n,error:r=>{throw r}}))}dispose(e){sh(()=>e.unsubscribe())}},Oh=class{createSubscription(e,n){return e.then(n,r=>{throw r})}dispose(e){}},aw=new Oh,cw=new Ah,Tt=(()=>{let e=class e{constructor(r){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=r}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(r){return this._obj?r!==this._obj?(this._dispose(),this.transform(r)):this._latestValue:(r&&this._subscribe(r),this._latestValue)}_subscribe(r){this._obj=r,this._strategy=this._selectStrategy(r),this._subscription=this._strategy.createSubscription(r,i=>this._updateLatestValue(r,i))}_selectStrategy(r){if(ao(r))return aw;if(Ch(r))return cw;throw _v(e,r)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(r,i){r===this._obj&&(this._latestValue=i,this._ref.markForCheck())}};e.\u0275fac=function(i){return new(i||e)(X(Is,16))},e.\u0275pipe=di({name:"async",type:e,pure:!1,standalone:!0});let t=e;return t})();var bv=(()=>{let e=class e{constructor(r){this._locale=r}transform(r,i,o){if(!lw(r))return null;o=o||this._locale;try{let s=uw(r);return nw(s,o,i)}catch(s){throw _v(e,s.message)}}};e.\u0275fac=function(i){return new(i||e)(X(Gc,16))},e.\u0275pipe=di({name:"percent",type:e,pure:!0,standalone:!0});let t=e;return t})();function lw(t){return!(t==null||t===""||t!==t)}function uw(t){if(typeof t=="string"&&!isNaN(Number(t)-parseFloat(t)))return Number(t);if(typeof t!="number")throw new Error(`${t} is not a number`);return t}var oe=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Nr({type:e}),e.\u0275inj=Pr({});let t=e;return t})(),wv="browser",dw="server";function Rh(t){return t===dw}var Wc=class{};var Fh=class extends zc{constructor(){super(...arguments),this.supportsDOMEvents=!0}},kh=class t extends Fh{static makeCurrent(){hv(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=fw();return n==null?null:hw(n)}resetBaseElement(){As=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return yv(document.cookie,e)}},As=null;function fw(){return As=As||document.querySelector("base"),As?As.getAttribute("href"):null}var Xc;function hw(t){Xc=Xc||document.createElement("a"),Xc.setAttribute("href",t);let e=Xc.pathname;return e.charAt(0)==="/"?e:`/${e}`}var pw=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ne({token:e,factory:e.\u0275fac});let t=e;return t})(),Lh=new Me("EventManagerPlugins"),xv=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(o=>{o.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,o){return this._findPluginFor(i).addEventListener(r,i,o)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(s=>s.supports(r)),!i)throw new Q(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(Ee(Lh),Ee(yt))},e.\u0275prov=ne({token:e,factory:e.\u0275fac});let t=e;return t})(),Zc=class{constructor(e){this._doc=e}},Ph="ng-app-id",Iv=(()=>{let e=class e{constructor(r,i,o,s={}){this.doc=r,this.appId=i,this.nonce=o,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Rh(s),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(o=>o.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${Ph}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(o=>{o.textContent!=null&&i.set(o.textContent,o)}),i}return null}changeUsageCount(r,i){let o=this.styleRef;if(o.has(r)){let s=o.get(r);return s.usage+=i,s.usage}return o.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let o=this.styleNodesInDOM,s=o?.get(i);if(s?.parentNode===r)return o.delete(i),s.removeAttribute(Ph),s;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(Ph,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let o=this.getStyleElement(r,i),s=this.styleRef,a=s.get(i)?.elements;a?a.push(o):s.set(i,{elements:[o],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(Ee(Qt),Ee(Zf),Ee(Jf,8),Ee(no))},e.\u0275prov=ne({token:e,factory:e.\u0275fac});let t=e;return t})(),Nh={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},jh=/%COMP%/g,Mv="%COMP%",gw=`_nghost-${Mv}`,mw=`_ngcontent-${Mv}`,vw=!0,yw=new Me("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>vw});function Cw(t){return mw.replace(jh,t)}function _w(t){return gw.replace(jh,t)}function Tv(t,e){return e.map(n=>n.replace(jh,t))}var Sv=(()=>{let e=class e{constructor(r,i,o,s,a,c,l,u=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=c,this.ngZone=l,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=Rh(c),this.defaultRenderer=new Os(r,a,l,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Un.ShadowDom&&(i=Se(T({},i),{encapsulation:Un.Emulated}));let o=this.getOrCreateRenderer(r,i);return o instanceof Qc?o.applyToHost(r):o instanceof Rs&&o.applyStyles(),o}getOrCreateRenderer(r,i){let o=this.rendererByCompId,s=o.get(i.id);if(!s){let a=this.doc,c=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(i.encapsulation){case Un.Emulated:s=new Qc(l,u,i,this.appId,f,a,c,d);break;case Un.ShadowDom:return new Vh(l,u,r,i,a,c,this.nonce,d);default:s=new Rs(l,u,i,f,a,c,d);break}o.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(Ee(xv),Ee(Iv),Ee(Zf),Ee(yw),Ee(Qt),Ee(no),Ee(yt),Ee(Jf))},e.\u0275prov=ne({token:e,factory:e.\u0275fac});let t=e;return t})(),Os=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(Nh[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(Dv(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(Dv(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new Q(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=Nh[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=Nh[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(sr.DashCase|sr.Important)?e.style.setProperty(n,r,i&sr.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&sr.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=uo().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function Dv(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Vh=class extends Os{constructor(e,n,r,i,o,s,a,c){super(e,o,s,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=Tv(i.id,i.styles);for(let u of l){let f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=u,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Rs=class extends Os{constructor(e,n,r,i,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?Tv(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Qc=class extends Rs{constructor(e,n,r,i,o,s,a,c){let l=i+"-"+r.id;super(e,n,r,o,s,a,c,l),this.contentAttr=Cw(l),this.hostAttr=_w(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},bw=(()=>{let e=class e extends Zc{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,o){return r.addEventListener(i,o,!1),()=>this.removeEventListener(r,i,o)}removeEventListener(r,i,o){return r.removeEventListener(i,o)}};e.\u0275fac=function(i){return new(i||e)(Ee(Qt))},e.\u0275prov=ne({token:e,factory:e.\u0275fac});let t=e;return t})(),Ev=["alt","control","meta","shift"],ww={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Sw={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},Dw=(()=>{let e=class e extends Zc{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,o){let s=e.parseEventName(i),a=e.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>uo().onAndCancel(r,s.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),o=i.shift();if(i.length===0||!(o==="keydown"||o==="keyup"))return null;let s=e._normalizeKey(i.pop()),a="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),a="code."),Ev.forEach(u=>{let f=i.indexOf(u);f>-1&&(i.splice(f,1),a+=u+".")}),a+=s,i.length!=0||s.length===0)return null;let l={};return l.domEventName=o,l.fullKey=a,l}static matchEventFullKeyCode(r,i){let o=ww[r.key]||r.key,s="";return i.indexOf("code.")>-1&&(o=r.code,s="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),Ev.forEach(a=>{if(a!==o){let c=Sw[a];c(r)&&(s+=a+".")}}),s+=o,s===i)}static eventCallback(r,i,o){return s=>{e.matchEventFullKeyCode(s,r)&&o.runGuarded(()=>i(s))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(Ee(Qt))},e.\u0275prov=ne({token:e,factory:e.\u0275fac});let t=e;return t})();function Av(t,e){return ov(T({rootComponent:t},Ew(e)))}function Ew(t){return{appProviders:[...Aw,...t?.providers??[]],platformProviders:Tw}}function xw(){kh.makeCurrent()}function Iw(){return new ar}function Mw(){return a2(document),document}var Tw=[{provide:no,useValue:wv},{provide:Qf,useValue:xw,multi:!0},{provide:Qt,useFactory:Mw,deps:[]}];var Aw=[{provide:Rc,useValue:"root"},{provide:ar,useFactory:Iw,deps:[]},{provide:Lh,useClass:bw,multi:!0,deps:[Qt,yt,no]},{provide:Lh,useClass:Dw,multi:!0,deps:[Qt]},Sv,Iv,xv,{provide:vs,useExisting:Sv},{provide:Wc,useClass:pw,deps:[]},[]];function Ow(){return new Uh(Ee(Qt))}var Uh=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(Ee(Qt))},e.\u0275prov=ne({token:e,factory:function(i){let o=null;return i?o=new i:o=Ow(),o},providedIn:"root"});let t=e;return t})();var pe="primary",Ws=Symbol("RouteTitle"),zh=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function mo(t){return new zh(t)}function Pw(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Nw(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Wn(t[n],e[n]))return!1;return!0}function Wn(t,e){let n=t?qh(t):void 0,r=e?qh(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!Lv(t[i],e[i]))return!1;return!0}function qh(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function Lv(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function Vv(t){return t.length>0?t[t.length-1]:null}function Ur(t){return Ga(t)?t:ao(t)?it(Promise.resolve(t)):re(t)}var Fw={exact:Uv,subset:Bv},jv={exact:kw,subset:Lw,ignored:()=>!0};function Ov(t,e,n){return Fw[n.paths](t.root,e.root,n.matrixParams)&&jv[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function kw(t,e){return Wn(t,e)}function Uv(t,e,n){if(!vi(t.segments,e.segments)||!tl(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!Uv(t.children[r],e.children[r],n))return!1;return!0}function Lw(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>Lv(t[n],e[n]))}function Bv(t,e,n){return $v(t,e,e.segments,n)}function $v(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!vi(i,n)||e.hasChildren()||!tl(i,n,r))}else if(t.segments.length===n.length){if(!vi(t.segments,n)||!tl(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!Bv(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!vi(t.segments,i)||!tl(t.segments,i,r)||!t.children[pe]?!1:$v(t.children[pe],e,o,r)}}function tl(t,e,n){return e.every((r,i)=>jv[n](t[i].parameters,r.parameters))}var Vr=class{constructor(e=new ke([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=mo(this.queryParams)),this._queryParamMap}toString(){return Uw.serialize(this)}},ke=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return nl(this)}},mi=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=mo(this.parameters)),this._parameterMap}toString(){return Gv(this)}};function Vw(t,e){return vi(t,e)&&t.every((n,r)=>Wn(n.parameters,e[r].parameters))}function vi(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function jw(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===pe&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==pe&&(n=n.concat(e(i,r)))}),n}var vp=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ne({token:e,factory:()=>(()=>new il)(),providedIn:"root"});let t=e;return t})(),il=class{parse(e){let n=new Yh(e);return new Vr(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Ps(e.root,!0)}`,r=Hw(e.queryParams),i=typeof e.fragment=="string"?`#${Bw(e.fragment)}`:"";return`${n}${r}${i}`}},Uw=new il;function nl(t){return t.segments.map(e=>Gv(e)).join("/")}function Ps(t,e){if(!t.hasChildren())return nl(t);if(e){let n=t.children[pe]?Ps(t.children[pe],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==pe&&r.push(`${i}:${Ps(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=jw(t,(r,i)=>i===pe?[Ps(t.children[pe],!1)]:[`${i}:${Ps(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[pe]!=null?`${nl(t)}/${n[0]}`:`${nl(t)}/(${n.join("//")})`}}function Hv(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Jc(t){return Hv(t).replace(/%3B/gi,";")}function Bw(t){return encodeURI(t)}function Wh(t){return Hv(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function rl(t){return decodeURIComponent(t)}function Rv(t){return rl(t.replace(/\+/g,"%20"))}function Gv(t){return`${Wh(t.path)}${$w(t.parameters)}`}function $w(t){return Object.keys(t).map(e=>`;${Wh(e)}=${Wh(t[e])}`).join("")}function Hw(t){let e=Object.keys(t).map(n=>{let r=t[n];return Array.isArray(r)?r.map(i=>`${Jc(n)}=${Jc(i)}`).join("&"):`${Jc(n)}=${Jc(r)}`}).filter(n=>!!n);return e.length?`?${e.join("&")}`:""}var Gw=/^[^\/()?;#]+/;function Bh(t){let e=t.match(Gw);return e?e[0]:""}var zw=/^[^\/()?;=#]+/;function qw(t){let e=t.match(zw);return e?e[0]:""}var Ww=/^[^=?&#]+/;function Yw(t){let e=t.match(Ww);return e?e[0]:""}var Kw=/^[^&#]+/;function Xw(t){let e=t.match(Kw);return e?e[0]:""}var Yh=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ke([],{}):new ke([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[pe]=new ke(e,n)),r}parseSegment(){let e=Bh(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Q(4009,!1);return this.capture(e),new mi(rl(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=qw(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Bh(this.remaining);i&&(r=i,this.capture(r))}e[rl(n)]=rl(r)}parseQueryParam(e){let n=Yw(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=Xw(this.remaining);s&&(r=s,this.capture(r))}let i=Rv(n),o=Rv(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Bh(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new Q(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=pe);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[pe]:new ke([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Q(4011,!1)}};function zv(t){return t.segments.length>0?new ke([],{[pe]:t}):t}function qv(t){let e={};for(let r of Object.keys(t.children)){let i=t.children[r],o=qv(i);if(r===pe&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new ke(t.segments,e);return Zw(n)}function Zw(t){if(t.numberOfChildren===1&&t.children[pe]){let e=t.children[pe];return new ke(t.segments.concat(e.segments),e.children)}return t}function vo(t){return t instanceof Vr}function Qw(t,e,n=null,r=null){let i=Wv(t);return Yv(i,e,n,r)}function Wv(t){let e;function n(o){let s={};for(let c of o.children){let l=n(c);s[c.outlet]=l}let a=new ke(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=zv(r);return e??i}function Yv(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return $h(i,i,i,n,r);let o=Jw(e);if(o.toRoot())return $h(i,i,new ke([],{}),n,r);let s=eS(o,i,t),a=s.processChildren?ks(s.segmentGroup,s.index,o.commands):Xv(s.segmentGroup,s.index,o.commands);return $h(i,s.segmentGroup,a,n,r)}function ol(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function js(t){return typeof t=="object"&&t!=null&&t.outlets}function $h(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let s;t===e?s=n:s=Kv(t,e,n);let a=zv(qv(s));return new Vr(a,o,i)}function Kv(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=Kv(o,e,n)}),new ke(t.segments,r)}var sl=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&ol(r[0]))throw new Q(4003,!1);let i=r.find(js);if(i&&i!==Vv(r))throw new Q(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Jw(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new sl(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new sl(n,e,r)}var po=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function eS(t,e,n){if(t.isAbsolute)return new po(e,!0,0);if(!n)return new po(e,!1,NaN);if(n.parent===null)return new po(n,!0,0);let r=ol(t.commands[0])?0:1,i=n.segments.length-1+r;return tS(n,i,t.numberOfDoubleDots)}function tS(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Q(4005,!1);i=r.segments.length}return new po(r,!1,i-o)}function nS(t){return js(t[0])?t[0].outlets:{[pe]:t}}function Xv(t,e,n){if(t||(t=new ke([],{})),t.segments.length===0&&t.hasChildren())return ks(t,e,n);let r=rS(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new ke(t.segments.slice(0,r.pathIndex),{});return o.children[pe]=new ke(t.segments.slice(r.pathIndex),t.children),ks(o,0,i)}else return r.match&&i.length===0?new ke(t.segments,{}):r.match&&!t.hasChildren()?Kh(t,e,n):r.match?ks(t,0,i):Kh(t,e,n)}function ks(t,e,n){if(n.length===0)return new ke(t.segments,{});{let r=nS(n),i={};if(Object.keys(r).some(o=>o!==pe)&&t.children[pe]&&t.numberOfChildren===1&&t.children[pe].segments.length===0){let o=ks(t.children[pe],e,n);return new ke(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=Xv(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new ke(t.segments,i)}}function rS(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(js(a))break;let c=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!Nv(c,l,s))return o;r+=2}else{if(!Nv(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Kh(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(js(o)){let c=iS(o.outlets);return new ke(r,c)}if(i===0&&ol(n[0])){let c=t.segments[e];r.push(new mi(c.path,Pv(n[0]))),i++;continue}let s=js(o)?o.outlets[pe]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&ol(a)?(r.push(new mi(s,Pv(a))),i+=2):(r.push(new mi(s,{})),i++)}return new ke(r,{})}function iS(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Kh(new ke([],{}),0,r))}),e}function Pv(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function Nv(t,e,n){return t==n.path&&Wn(e,n.parameters)}var Ls="imperative",un=class{constructor(e,n){this.id=e,this.url=n}},Us=class extends un{constructor(e,n,r="imperative",i=null){super(e,n),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},yi=class extends un{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},jr=class extends un{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Ci=class extends un{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=16}},Bs=class extends un{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},al=class extends un{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Xh=class extends un{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Zh=class extends un{constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Qh=class extends un{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Jh=class extends un{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ep=class{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},tp=class{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},np=class{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},rp=class{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ip=class{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},op=class{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var $s=class{},Hs=class{constructor(e){this.url=e}};var sp=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new hl,this.attachRef=null}},hl=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let o=this.getOrCreateContext(r);o.outlet=i,this.contexts.set(r,o)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new sp,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),cl=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=ap(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=ap(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=cp(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return cp(e,this._root).map(n=>n.value)}};function ap(t,e){if(t===e.value)return e;for(let n of e.children){let r=ap(t,n);if(r)return r}return null}function cp(t,e){if(t===e.value)return[e];for(let n of e.children){let r=cp(t,n);if(r.length)return r.unshift(e),r}return[]}var Jt=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function ho(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var ll=class extends cl{constructor(e,n){super(e),this.snapshot=n,Cp(this,e)}toString(){return this.snapshot.toString()}};function Zv(t,e){let n=oS(t,e),r=new qe([new mi("",{})]),i=new qe({}),o=new qe({}),s=new qe({}),a=new qe(""),c=new yo(r,i,s,a,o,pe,e,n.root);return c.snapshot=n.root,new ll(new Jt(c,[]),n)}function oS(t,e){let n={},r={},i={},o="",s=new Gs([],n,i,o,r,pe,e,null,{});return new ul("",new Jt(s,[]))}var yo=class{constructor(e,n,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(ee(l=>l[Ws]))??re(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(ee(e=>mo(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(ee(e=>mo(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function yp(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:T(T({},e.params),t.params),data:T(T({},e.data),t.data),resolve:T(T(T(T({},t.data),e.data),i?.data),t._resolvedData)}:r={params:t.params,data:t.data,resolve:T(T({},t.data),t._resolvedData??{})},i&&Jv(i)&&(r.resolve[Ws]=i.title),r}var Gs=class{get title(){return this.data?.[Ws]}constructor(e,n,r,i,o,s,a,c,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=mo(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=mo(this.queryParams)),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},ul=class extends cl{constructor(e,n){super(n),this.url=e,Cp(this,n)}toString(){return Qv(this._root)}};function Cp(t,e){e.value._routerState=t,e.children.forEach(n=>Cp(t,n))}function Qv(t){let e=t.children.length>0?` { ${t.children.map(Qv).join(", ")} } `:"";return`${t.value}${e}`}function Hh(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Wn(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Wn(e.params,n.params)||t.paramsSubject.next(n.params),Nw(e.url,n.url)||t.urlSubject.next(n.url),Wn(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function lp(t,e){let n=Wn(t.params,e.params)&&Vw(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||lp(t.parent,e.parent))}function Jv(t){return typeof t.title=="string"||t.title===null}var _p=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=pe,this.activateEvents=new on,this.deactivateEvents=new on,this.attachEvents=new on,this.detachEvents=new on,this.parentContexts=K(hl),this.location=K(En),this.changeDetector=K(Is),this.environmentInjector=K(an),this.inputBinder=K(bp,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:o}=r.name;if(i)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Q(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Q(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Q(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new Q(4013,!1);this._activatedRoute=r;let o=this.location,a=r.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new up(r,c,o.injector);this.activated=o.createComponent(a,{index:o.length,injector:l,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=cr({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Sn]});let t=e;return t})(),up=class{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===yo?this.route:e===hl?this.childContexts:this.parent.get(e,n)}},bp=new Me("");function sS(t,e,n){let r=zs(t,e._root,n?n._root:void 0);return new ll(r,e)}function zs(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=aS(t,e,n);return new Jt(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>zs(t,a)),s}}let r=cS(e.value),i=e.children.map(o=>zs(t,o));return new Jt(r,i)}}function aS(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return zs(t,r,i);return zs(t,r)})}function cS(t){return new yo(new qe(t.url),new qe(t.params),new qe(t.queryParams),new qe(t.fragment),new qe(t.data),t.outlet,t.component,t)}var e4="ngNavigationCancelingError";function t4(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=vo(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=n4(!1,0,e);return i.url=n,i.navigationBehaviorOptions=r,i}function n4(t,e,n){let r=new Error("NavigationCancelingError: "+(t||""));return r[e4]=!0,r.cancellationCode=e,n&&(r.url=n),r}function lS(t){return r4(t)&&vo(t.url)}function r4(t){return t&&t[e4]}var uS=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=ae({type:e,selectors:[["ng-component"]],standalone:!0,features:[de],decls:1,vars:0,template:function(i,o){i&1&&H(0,"router-outlet")},dependencies:[_p],encapsulation:2});let t=e;return t})();function dS(t,e){return t.providers&&!t._injector&&(t._injector=_h(t.providers,e,`Route: ${t.path}`)),t._injector??e}function wp(t){let e=t.children&&t.children.map(wp),n=e?Se(T({},t),{children:e}):T({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==pe&&(n.component=uS),n}function Yn(t){return t.outlet||pe}function fS(t,e){let n=t.filter(r=>Yn(r)===e);return n.push(...t.filter(r=>Yn(r)!==e)),n}function Ys(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var hS=(t,e,n,r)=>ee(i=>(new dp(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),dp=class{constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Hh(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=ho(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=ho(e);for(let s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=ho(e);for(let s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=ho(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new op(o.value.snapshot))}),e.children.length&&this.forwardEvent(new rp(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(Hh(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Hh(a.route.value),this.activateChildRoutes(e,null,s.children)}else{let a=Ys(i.snapshot);s.attachRef=null,s.route=i,s.injector=a,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,r)}},dl=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},go=class{constructor(e,n){this.component=e,this.route=n}};function pS(t,e,n){let r=t._root,i=e?e._root:null;return Ns(r,i,n,[r.value])}function gS(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function _o(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!tm(t)?t:e.get(t):r}function Ns(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=ho(e);return t.children.forEach(s=>{mS(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Vs(a,n.getContext(s),i)),i}function mS(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=vS(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new dl(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Ns(t,e,a?a.children:null,r,i):Ns(t,e,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new go(a.outlet.component,s))}else s&&Vs(e,a,i),i.canActivateChecks.push(new dl(r)),o.component?Ns(t,null,a?a.children:null,r,i):Ns(t,null,n,r,i);return i}function vS(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!vi(t.url,e.url);case"pathParamsOrQueryParamsChange":return!vi(t.url,e.url)||!Wn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!lp(t,e)||!Wn(t.queryParams,e.queryParams);case"paramsChange":default:return!lp(t,e)}}function Vs(t,e,n){let r=ho(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Vs(s,e.children.getContext(o),n):Vs(s,null,n):Vs(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new go(e.outlet.component,i)):n.canDeactivateChecks.push(new go(null,i)):n.canDeactivateChecks.push(new go(null,i))}function Ks(t){return typeof t=="function"}function yS(t){return typeof t=="boolean"}function CS(t){return t&&Ks(t.canLoad)}function _S(t){return t&&Ks(t.canActivate)}function bS(t){return t&&Ks(t.canActivateChild)}function wS(t){return t&&Ks(t.canDeactivate)}function SS(t){return t&&Ks(t.canMatch)}function i4(t){return t instanceof ir||t?.name==="EmptyError"}var el=Symbol("INITIAL_VALUE");function Co(){return It(t=>za(t.map(e=>e.pipe(vn(1),Td(el)))).pipe(ee(e=>{for(let n of e)if(n!==!0){if(n===el)return el;if(n===!1||n instanceof Vr)return n}return!0}),kt(e=>e!==el),vn(1)))}function DS(t,e){return St(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?re(Se(T({},n),{guardsResult:!0})):ES(s,r,i,t).pipe(St(a=>a&&yS(a)?xS(r,o,t,e):re(a)),ee(a=>Se(T({},n),{guardsResult:a})))})}function ES(t,e,n,r){return it(t).pipe(St(i=>OS(i.component,i.route,n,e,r)),kn(i=>i!==!0,!0))}function xS(t,e,n,r){return it(e).pipe(Vi(i=>Li(MS(i.route.parent,r),IS(i.route,r),AS(t,i.path,n),TS(t,i.route,n))),kn(i=>i!==!0,!0))}function IS(t,e){return t!==null&&e&&e(new ip(t)),re(!0)}function MS(t,e){return t!==null&&e&&e(new np(t)),re(!0)}function TS(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return re(!0);let i=r.map(o=>qa(()=>{let s=Ys(e)??n,a=_o(o,s),c=_S(a)?a.canActivate(e,t):s.runInContext(()=>a(e,t));return Ur(c).pipe(kn())}));return re(i).pipe(Co())}function AS(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>gS(s)).filter(s=>s!==null).map(s=>qa(()=>{let a=s.guards.map(c=>{let l=Ys(s.node)??n,u=_o(c,l),f=bS(u)?u.canActivateChild(r,t):l.runInContext(()=>u(r,t));return Ur(f).pipe(kn())});return re(a).pipe(Co())}));return re(o).pipe(Co())}function OS(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return re(!0);let s=o.map(a=>{let c=Ys(e)??i,l=_o(a,c),u=wS(l)?l.canDeactivate(t,e,n,r):c.runInContext(()=>l(t,e,n,r));return Ur(u).pipe(kn())});return re(s).pipe(Co())}function RS(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return re(!0);let o=i.map(s=>{let a=_o(s,t),c=CS(a)?a.canLoad(e,n):t.runInContext(()=>a(e,n));return Ur(c)});return re(o).pipe(Co(),o4(r))}function o4(t){return ns(Mt(e=>{if(vo(e))throw t4(t,e)}),ee(e=>e===!0))}function PS(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return re(!0);let o=i.map(s=>{let a=_o(s,t),c=SS(a)?a.canMatch(e,n):t.runInContext(()=>a(e,n));return Ur(c)});return re(o).pipe(Co(),o4(r))}var qs=class{constructor(e){this.segmentGroup=e||null}},fl=class extends Error{constructor(e){super(),this.urlTree=e}};function fo(t){return ki(new qs(t))}function NS(t){return ki(new Q(4e3,!1))}function FS(t){return ki(n4(!1,3))}var fp=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}noMatchError(e){return new Q(4002,!1)}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return re(r);if(i.numberOfChildren>1||!i.children[pe])return NS(e.redirectTo);i=i.children[pe]}}applyRedirectCommands(e,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new fl(i);return i}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new Vr(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o.startsWith(":")){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new ke(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new Q(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},hp={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function kS(t,e,n,r,i){let o=Sp(t,e,n);return o.matched?(r=dS(e,r),PS(r,e,n,i).pipe(ee(s=>s===!0?o:T({},hp)))):re(o)}function Sp(t,e,n){if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?T({},hp):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||Pw)(n,t,e);if(!i)return T({},hp);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?T(T({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function Fv(t,e,n,r){return n.length>0&&jS(t,n,r)?{segmentGroup:new ke(e,VS(r,new ke(n,t.children))),slicedSegments:[]}:n.length===0&&US(t,n,r)?{segmentGroup:new ke(t.segments,LS(t,e,n,r,t.children)),slicedSegments:n}:{segmentGroup:new ke(t.segments,t.children),slicedSegments:n}}function LS(t,e,n,r,i){let o={};for(let s of r)if(pl(t,n,s)&&!i[Yn(s)]){let a=new ke([],{});o[Yn(s)]=a}return T(T({},i),o)}function VS(t,e){let n={};n[pe]=e;for(let r of t)if(r.path===""&&Yn(r)!==pe){let i=new ke([],{});n[Yn(r)]=i}return n}function jS(t,e,n){return n.some(r=>pl(t,e,r)&&Yn(r)!==pe)}function US(t,e,n){return n.some(r=>pl(t,e,r))}function pl(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function BS(t,e,n,r){return Yn(t)!==r&&(r===pe||!pl(e,n,t))?!1:t.path==="**"?!0:Sp(e,t,n).matched}function $S(t,e,n){return e.length===0&&!t.children[n]}var pp=class{};function HS(t,e,n,r,i,o,s="emptyOnly"){return new gp(t,e,n,r,i,s,o).recognize()}var GS=31,gp=class{constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new fp(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new Q(4002,!1)}recognize(){let e=Fv(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ee(n=>{let r=new Gs([],Object.freeze({}),Object.freeze(T({},this.urlTree.queryParams)),this.urlTree.fragment,{},pe,this.rootComponentType,null,{}),i=new Jt(r,n),o=new ul("",i),s=Qw(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root,null),{state:o,tree:s}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,pe).pipe(Mr(r=>{if(r instanceof fl)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof qs?this.noMatchError(r):r}))}inheritParamsAndData(e,n){let r=e.value,i=yp(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(o=>this.inheritParamsAndData(o,r))}processSegmentGroup(e,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0).pipe(ee(o=>o instanceof Jt?[o]:[]))}processChildren(e,n,r){let i=[];for(let o of Object.keys(r.children))o==="primary"?i.unshift(o):i.push(o);return it(i).pipe(Vi(o=>{let s=r.children[o],a=fS(n,o);return this.processSegmentGroup(e,a,s,o)}),xd((o,s)=>(o.push(...s),o)),Tr(null),Ed(),St(o=>{if(o===null)return fo(r);let s=s4(o);return zS(s),re(s)}))}processSegment(e,n,r,i,o,s){return it(n).pipe(Vi(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,o,s).pipe(Mr(c=>{if(c instanceof qs)return re(null);throw c}))),kn(a=>!!a),Mr(a=>{if(i4(a))return $S(r,i,o)?re(new pp):fo(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,o,s,a){return BS(r,i,o,s)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s):fo(i):fo(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s){let{matched:a,consumedSegments:c,positionalParamSegments:l,remainingSegments:u}=i.path==="**"?kv(o):Sp(n,i,o);if(!a)return fo(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>GS&&(this.allowRedirects=!1));let f=this.applyRedirects.applyRedirectCommands(c,i.redirectTo,l);return this.applyRedirects.lineralizeSegments(i,f).pipe(St(d=>this.processSegment(e,r,n,d.concat(u),s,!1)))}matchSegmentAgainstRoute(e,n,r,i,o){let s;return r.path==="**"?(s=re(kv(i)),n.children={}):s=kS(n,r,i,e,this.urlSerializer),s.pipe(It(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(It(({routes:c})=>{let l=r._loadedInjector??e,{consumedSegments:u,remainingSegments:f,parameters:d}=a,h=new Gs(u,d,Object.freeze(T({},this.urlTree.queryParams)),this.urlTree.fragment,WS(r),Yn(r),r.component??r._loadedComponent??null,r,YS(r)),{segmentGroup:g,slicedSegments:v}=Fv(n,u,f,c);if(v.length===0&&g.hasChildren())return this.processChildren(l,c,g).pipe(ee(D=>D===null?null:new Jt(h,D)));if(c.length===0&&v.length===0)return re(new Jt(h,[]));let b=Yn(r)===o;return this.processSegment(l,c,g,v,b?pe:o,!0).pipe(ee(D=>new Jt(h,D instanceof Jt?[D]:[])))}))):fo(n)))}getChildConfig(e,n,r){return n.children?re({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?re({routes:n._loadedRoutes,injector:n._loadedInjector}):RS(e,n,r,this.urlSerializer).pipe(St(i=>i?this.configLoader.loadChildren(e,n).pipe(Mt(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):FS(n))):re({routes:[],injector:e})}};function zS(t){t.sort((e,n)=>e.value.outlet===pe?-1:n.value.outlet===pe?1:e.value.outlet.localeCompare(n.value.outlet))}function qS(t){let e=t.value.routeConfig;return e&&e.path===""}function s4(t){let e=[],n=new Set;for(let r of t){if(!qS(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=s4(r.children);e.push(new Jt(r.value,i))}return e.filter(r=>!n.has(r))}function WS(t){return t.data||{}}function YS(t){return t.resolve||{}}function kv(t){return{matched:!0,parameters:t.length>0?Vv(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function KS(t,e,n,r,i,o){return St(s=>HS(t,e,n,r,s.extractedUrl,i,o).pipe(ee(({state:a,tree:c})=>Se(T({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function XS(t,e){return St(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return re(n);let o=i.map(l=>l.route),s=new Set(o),a=a4(o[0].parent).slice(1),c=0;return it(a).pipe(Vi(l=>s.has(l)?ZS(l,r,t,e):(l.data=yp(l,l.parent,t).resolve,re(void 0))),Mt(()=>c++),ji(1),St(l=>c===a.length?re(n):qt))})}function a4(t){let e=t.children.map(n=>a4(n)).flat();return[t,...e]}function ZS(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!Jv(i)&&(o[Ws]=i.title),QS(o,t,e,r).pipe(ee(s=>(t._resolvedData=s,t.data=yp(t,t.parent,n).resolve,null)))}function QS(t,e,n,r){let i=qh(t);if(i.length===0)return re({});let o={};return it(i).pipe(St(s=>JS(t[s],e,n,r).pipe(kn(),Mt(a=>{o[s]=a}))),ji(1),Dd(o),Mr(s=>i4(s)?qt:ki(s)))}function JS(t,e,n,r){let i=Ys(e)??r,o=_o(t,i),s=o.resolve?o.resolve(e,n):i.runInContext(()=>o(e,n));return Ur(s)}function Gh(t){return It(e=>{let n=t(e);return n?it(n).pipe(ee(()=>e)):re(e)})}var c4=(()=>{let e=class e{buildTitle(r){let i,o=r.root;for(;o!==void 0;)i=this.getResolvedTitleForRoute(o)??i,o=o.children.find(s=>s.outlet===pe);return i}getResolvedTitleForRoute(r){return r.data[Ws]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ne({token:e,factory:()=>(()=>K(eD))(),providedIn:"root"});let t=e;return t})(),eD=(()=>{let e=class e extends c4{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(Ee(Uh))},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Dp=new Me("",{providedIn:"root",factory:()=>({})}),Ep=new Me("ROUTES"),tD=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=K(wh)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return re(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Ur(r.loadComponent()).pipe(ee(l4),Mt(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),as(()=>{this.componentLoaders.delete(r)})),o=new Ni(i,()=>new Oe).pipe(Pi());return this.componentLoaders.set(r,o),o}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return re({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let s=nD(i,this.compiler,r,this.onLoadEndListener).pipe(as(()=>{this.childrenLoaders.delete(i)})),a=new Ni(s,()=>new Oe).pipe(Pi());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function nD(t,e,n,r){return Ur(t.loadChildren()).pipe(ee(l4),St(i=>i instanceof _s||Array.isArray(i)?re(i):it(e.compileModuleAsync(i))),ee(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(Ep,[],{optional:!0,self:!0}).flat()),{routes:s.map(wp),injector:o}}))}function rD(t){return t&&typeof t=="object"&&"default"in t}function l4(t){return rD(t)?t.default:t}var xp=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ne({token:e,factory:()=>(()=>K(iD))(),providedIn:"root"});let t=e;return t})(),iD=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),oD=new Me("");var sD=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Oe,this.transitionAbortSubject=new Oe,this.configLoader=K(tD),this.environmentInjector=K(an),this.urlSerializer=K(vp),this.rootContexts=K(hl),this.location=K(Ts),this.inputBindingEnabled=K(bp,{optional:!0})!==null,this.titleStrategy=K(c4),this.options=K(Dp,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=K(xp),this.createViewTransition=K(oD,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>re(void 0),this.rootComponentType=null;let r=o=>this.events.next(new ep(o)),i=o=>this.events.next(new tp(o));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(Se(T(T({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,o){return this.transitions=new qe({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Ls,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(kt(s=>s.id!==0),ee(s=>Se(T({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),It(s=>{this.currentTransition=s;let a=!1,c=!1;return re(s).pipe(Mt(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?Se(T({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),It(l=>{let u=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),f=l.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!u&&f!=="reload"){let d="";return this.events.next(new Ci(l.id,this.urlSerializer.serialize(l.rawUrl),d,0)),l.resolve(null),qt}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return re(l).pipe(It(d=>{let h=this.transitions?.getValue();return this.events.next(new Us(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),h!==this.transitions?.getValue()?qt:Promise.resolve(d)}),KS(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),Mt(d=>{s.targetSnapshot=d.targetSnapshot,s.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation=Se(T({},this.currentNavigation),{finalUrl:d.urlAfterRedirects});let h=new al(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(h)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:d,extractedUrl:h,source:g,restoredState:v,extras:b}=l,D=new Us(d,this.urlSerializer.serialize(h),g,v);this.events.next(D);let I=Zv(h,this.rootComponentType).snapshot;return this.currentTransition=s=Se(T({},l),{targetSnapshot:I,urlAfterRedirects:h,extras:Se(T({},b),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=h,re(s)}else{let d="";return this.events.next(new Ci(l.id,this.urlSerializer.serialize(l.extractedUrl),d,1)),l.resolve(null),qt}}),Mt(l=>{let u=new Xh(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),ee(l=>(this.currentTransition=s=Se(T({},l),{guards:pS(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),s)),DS(this.environmentInjector,l=>this.events.next(l)),Mt(l=>{if(s.guardsResult=l.guardsResult,vo(l.guardsResult))throw t4(this.urlSerializer,l.guardsResult);let u=new Zh(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(u)}),kt(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",3),!1)),Gh(l=>{if(l.guards.canActivateChecks.length)return re(l).pipe(Mt(u=>{let f=new Qh(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(f)}),It(u=>{let f=!1;return re(u).pipe(XS(this.paramsInheritanceStrategy,this.environmentInjector),Mt({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(u,"",2)}}))}),Mt(u=>{let f=new Jh(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(f)}))}),Gh(l=>{let u=f=>{let d=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(f.routeConfig).pipe(Mt(h=>{f.component=h}),ee(()=>{})));for(let h of f.children)d.push(...u(h));return d};return za(u(l.targetSnapshot.root)).pipe(Tr(),vn(1))}),Gh(()=>this.afterPreactivation()),It(()=>{let{currentSnapshot:l,targetSnapshot:u}=s,f=this.createViewTransition?.(this.environmentInjector,l.root,u.root);return f?it(f).pipe(ee(()=>s)):re(s)}),ee(l=>{let u=sS(r.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=s=Se(T({},l),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,s}),Mt(()=>{this.events.next(new $s)}),hS(this.rootContexts,r.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),vn(1),Mt({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new yi(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),vt(this.transitionAbortSubject.pipe(Mt(l=>{throw l}))),as(()=>{if(!a&&!c){let l="";this.cancelNavigationTransition(s,l,1)}this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),Mr(l=>{if(c=!0,r4(l))this.events.next(new jr(s.id,this.urlSerializer.serialize(s.extractedUrl),l.message,l.cancellationCode)),lS(l)?this.events.next(new Hs(l.url)):s.resolve(!1);else{this.events.next(new Bs(s.id,this.urlSerializer.serialize(s.extractedUrl),l,s.targetSnapshot??void 0));try{s.resolve(r.errorHandler(l))}catch(u){s.reject(u)}}return qt}))}))}cancelNavigationTransition(r,i,o){let s=new jr(r.id,this.urlSerializer.serialize(r.extractedUrl),i,o);this.events.next(s),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function aD(t){return t!==Ls}var cD=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ne({token:e,factory:()=>(()=>K(lD))(),providedIn:"root"});let t=e;return t})(),mp=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},lD=(()=>{let e=class e extends mp{};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=qf(e)))(o||e)}})(),e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),u4=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ne({token:e,factory:()=>(()=>K(uD))(),providedIn:"root"});let t=e;return t})(),uD=(()=>{let e=class e extends u4{constructor(){super(...arguments),this.location=K(Ts),this.urlSerializer=K(vp),this.options=K(Dp,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=K(xp),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Vr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Zv(this.currentUrlTree,null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof Us)this.stateMemento=this.createStateMemento();else if(r instanceof Ci)this.rawUrlTree=i.initialUrl;else if(r instanceof al){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(o,i)}}else r instanceof $s?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof jr&&(r.code===3||r.code===2)?this.restoreHistory(i):r instanceof Bs?this.restoreHistory(i,!0):r instanceof yi&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let o=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(o)||i.extras.replaceUrl){let s=this.browserPageId,a=T(T({},i.extras.state),this.generateNgRouterState(i.id,s));this.location.replaceState(o,"",a)}else{let s=T(T({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(o,"",s)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,s=this.currentPageId-o;s!==0?this.location.historyGo(s):this.currentUrlTree===r.finalUrl&&s===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=qf(e)))(o||e)}})(),e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Fs=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Fs||{});function dD(t,e){t.events.pipe(kt(n=>n instanceof yi||n instanceof jr||n instanceof Bs||n instanceof Ci),ee(n=>n instanceof yi||n instanceof Ci?Fs.COMPLETE:(n instanceof jr?n.code===0||n.code===1:!1)?Fs.REDIRECTING:Fs.FAILED),kt(n=>n!==Fs.REDIRECTING),vn(1)).subscribe(()=>{e()})}function fD(t){throw t}var hD={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},pD={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},d4=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=K(Hc),this.stateManager=K(u4),this.options=K(Dp,{optional:!0})||{},this.pendingTasks=K(bh),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=K(sD),this.urlSerializer=K(vp),this.location=K(Ts),this.urlHandlingStrategy=K(xp),this._events=new Oe,this.errorHandler=this.options.errorHandler||fD,this.navigated=!1,this.routeReuseStrategy=K(cD),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=K(Ep,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!K(bp,{optional:!0}),this.eventsSubscription=new mt,this.isNgZoneEnabled=K(yt)instanceof yt&&yt.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let o=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(o!==null&&s!==null){if(this.stateManager.handleRouterEvent(i,s),i instanceof jr&&i.code!==0&&i.code!==1)this.navigated=!0;else if(i instanceof yi)this.navigated=!0;else if(i instanceof Hs){let a=this.urlHandlingStrategy.merge(i.url,o.currentRawUrl),c={skipLocationChange:o.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||aD(o.source)};this.scheduleNavigation(a,Ls,null,c,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}mD(i)&&this._events.next(i)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ls,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription||(this.nonRouterCurrentEntryChangeSubscription=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)}))}navigateToSyncWithBrowser(r,i,o){let s={replaceUrl:!0},a=o?.navigationId?o:null;if(o){let l=T({},o);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(s.state=l)}let c=this.parseUrl(r);this.scheduleNavigation(c,i,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(wp),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:o,queryParams:s,fragment:a,queryParamsHandling:c,preserveFragment:l}=i,u=l?this.currentUrlTree.fragment:a,f=null;switch(c){case"merge":f=T(T({},this.currentUrlTree.queryParams),s);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=s||null}f!==null&&(f=this.removeEmptyProps(f));let d;try{let h=o?o.snapshot:this.routerState.snapshot.root;d=Wv(h)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),d=this.currentUrlTree.root}return Yv(d,r,f,u??null)}navigateByUrl(r,i={skipLocationChange:!1}){let o=vo(r)?r:this.parseUrl(r),s=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(s,Ls,null,i)}navigate(r,i={skipLocationChange:!1}){return gD(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let o;if(i===!0?o=T({},hD):i===!1?o=T({},pD):o=i,vo(r))return Ov(this.currentUrlTree,r,o);let s=this.parseUrl(r);return Ov(this.currentUrlTree,s,o)}removeEmptyProps(r){return Object.keys(r).reduce((i,o)=>{let s=r[o];return s!=null&&(i[o]=s),i},{})}scheduleNavigation(r,i,o,s,a){if(this.disposed)return Promise.resolve(!1);let c,l,u;a?(c=a.resolve,l=a.reject,u=a.promise):u=new Promise((d,h)=>{c=d,l=h});let f=this.pendingTasks.add();return dD(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:s,resolve:c,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(d=>Promise.reject(d))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function gD(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new Q(4008,!1)}function mD(t){return!(t instanceof $s)&&!(t instanceof Hs)}var vD=new Me("");function f4(t,...e){return Oc([{provide:Ep,multi:!0,useValue:t},[],{provide:yo,useFactory:yD,deps:[d4]},{provide:Sh,multi:!0,useFactory:CD},e.map(n=>n.\u0275providers)])}function yD(t){return t.routerState.root}function CD(){let t=K(kr);return e=>{let n=t.get(pi);if(e!==n.components[0])return;let r=t.get(d4),i=t.get(_D);t.get(bD)===1&&r.initialNavigation(),t.get(wD,null,Ce.Optional)?.setUpPreloading(),t.get(vD,null,Ce.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var _D=new Me("",{factory:()=>new Oe}),bD=new Me("",{providedIn:"root",factory:()=>1});var wD=new Me("");function SD(...t){let e={config:{},state:{}};for(let{config:n,props:r}of t)Object.assign(e.config,n),Object.assign(e.state,r);return e}var h4=new qe(!1),DD=h4.asObservable().pipe(kt(t=>!t),vn(1));var bo={},Ip=class{registerPreStoreUpdate(e){bo.preStoreUpdate=e}registerPreStateInit(e){bo.preStateInit=e}},BU=new Ip,Xs=new Map,Tp=new Oe,p4=Tp.asObservable();function ED(t){Xs.set(t.name,t),Tp.next({type:"add",store:t})}function xD(t){Xs.delete(t.name),Tp.next({type:"remove",store:t})}function g4(t){return Xs.get(t)}function m4(){return Xs}function Ap(){let t={};return Xs.forEach((e,n)=>{t[n]=e.getValue()}),t}var Mp=class extends qe{constructor(e){super(e.state),this.storeDef=e,this.initialState=void 0,this.state=void 0,this.batchInProgress=!1,this.context={config:this.getConfig()},this.state=this.getInitialState(e.state),this.initialState=this.getValue(),ED(this)}get name(){return this.storeDef.name}getInitialState(e){return bo.preStateInit?bo.preStateInit(e,this.name):e}getConfig(){return this.storeDef.config}query(e){return e(this.getValue())}update(...e){let n=this.getValue(),r=e.reduce((i,o)=>(i=o(i,this.context),i),n);bo.preStoreUpdate&&(r=bo.preStoreUpdate(n,r,this.name)),r!==n&&(this.state=r,h4.getValue()?this.batchInProgress||(this.batchInProgress=!0,DD.subscribe(()=>{super.next(this.state),this.batchInProgress=!1})):super.next(this.state))}getValue(){return this.state}reset(){this.update(()=>this.initialState)}combine(e){let n=!0,r={};return new De(i=>{for(let[o,s]of Object.entries(e))i.add(s.subscribe(a=>{r[o]=a,n=!0}));return this.subscribe({next(){n&&(i.next(T({},r)),n=!1)},error(o){i.error(o)},complete(){i.complete()}})})}destroy(){xD(this),this.reset()}next(e){this.update(()=>e)}error(){}complete(){}};function Op(t,...e){let{state:n,config:r}=SD(...e),{name:i}=t;return new Mp({name:i,state:n,config:r})}function So(t){return Array.isArray(t)?t:[t]}function wo(t){return typeof t=="function"}function v4(t){return t===void 0}function Br(t){return t.charAt(0).toUpperCase()+t.slice(1)}function ID(t){return typeof t=="object"&&!Array.isArray(t)&&t!==null}function y4(t,e){return function(n){return Se(T({},n),{[t]:wo(e)?e(n[t]):e})}}function Do(t){return ns(ee(t),Gt())}function gl(){return Gt((t,e)=>t===e?!0:t.length!==e.length?!1:!e.some((r,i)=>t[i]!==r))}function Rp(){return kt(t=>t!=null)}function Pp(t,{initialValue:e,config:n}){let r=e,i=Br(t);return{[`with${i}`](o=r){return{props:{[t]:o},config:n}},[`set${i}InitialValue`](o){r=o},[`set${i}`](o){return function(s){let a=wo(o)?o(s):o;return a===s[t]?s:Se(T({},s),{[t]:a})}},[`update${i}`](o){return function(s){let a=wo(o)?o(s):o;return a===s[t]?s:Se(T({},s),{[t]:ID(a)?T(T({},s[t]),a):a})}},[`reset${i}`](){return function(o){return Se(T({},o),{[t]:r})}},[`select${i}`](){return Do(o=>o[t])},[`get${i}`](o){return o[t]}}}function C4(t,e){let n=Br(t),r=Pp(t,e);return Se(T({},r),{[`add${n}`](i){return function(o){return Se(T({},o),{[t]:MD(o[t],i)})}},[`remove${n}`](i){return function(o){return Se(T({},o),{[t]:TD(o[t],i)})}},[`toggle${n}`](i){return function(o){return Se(T({},o),{[t]:AD(o[t],i)})}},[`update${n}`](i,o){return function(s){return Se(T({},s),{[t]:RD(s[t],i,o)})}},[`in${n}`](i){return o=>OD(o[t],i)}})}function MD(t,e){return[...t,...So(e)]}function TD(t,e){let n=So(e);return t.filter(r=>!n.includes(r))}function AD(t,e){let n=So(e),r=[...t];return n.forEach(i=>{let o=r.indexOf(i);o>-1?r.splice(o,1):r.push(i)}),r}function OD(t,e){return t.includes(e)}function RD(t,e,n){return t.map(r=>r===e?n:r)}function _4(t){return{props:t,config:void 0}}var PD=!0;function b4(){return PD}var ND=new Oe;function w4(t={}){if(!window.__REDUX_DEVTOOLS_EXTENSION__)return;let e=!1,n=window.__REDUX_DEVTOOLS_EXTENSION__.connect(t),r=new Map,i=c=>{n.send(c,Ap())};r.set("externalSend",ND.subscribe(i));let o=c=>{let l=c.name,u=Br(l);i({type:`[${u}] - @Init`});let f=c.pipe(Md(1)).subscribe(()=>{if(e){e=!1;return}t.preAction?.(),i({type:`[${u}] - Update`})});r.set(l,f)};m4().forEach(o),t.actionsDispatcher&&r.set("actionsDispatcher",t.actionsDispatcher.subscribe(c=>{i(c)}));let s=p4.subscribe(({store:c,type:l})=>{let u=c.name,f=Br(u);if(t.logTrace){let d=`[${f}] - ${l}`;console.groupCollapsed(d),console.trace(),console.groupEnd()}l==="add"&&o(c),l==="remove"&&(r.get(u)?.unsubscribe(),r.delete(u),i({type:`Remove ${f}`}))}),a=n.subscribe(c=>{if(c.type==="DISPATCH"){let l=c.payload.type;if(l==="COMMIT"){n.init(Ap());return}if(l==="JUMP_TO_STATE"||l==="JUMP_TO_ACTION"){let u=JSON.parse(c.state);for(let[f,d]of Object.entries(u))e=!0,g4(f)?.update(()=>d);t.postTimelineUpdate?.()}}});return{unsubscribe(){s.unsubscribe(),n.unsubscribe(),r.forEach(c=>c.unsubscribe()),a()}}}var S4=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=ae({type:e,selectors:[["app-header"]],standalone:!0,features:[de],decls:4,vars:0,consts:[[1,"container"],[1,"logo"],[1,"menu"]],template:function(i,o){i&1&&(x(0,"div",0)(1,"div",1),J(2," Image Cutter "),A(),H(3,"div",2),A())},dependencies:[oe],styles:[".container[_ngcontent-%COMP%]{width:100%;max-height:32px}.menu[_ngcontent-%COMP%]{padding:0,10px}.logo[_ngcontent-%COMP%]{font-size:24px;font-weight:400;line-height:32px;margin:auto auto auto 10px}"]});let t=e;return t})();var _i=function(t){return t.TOP="top",t.BOTTOM="bottom",t.LEFT="left",t.RIGHT="right",t.DEFAULT="bottom",t}(_i||{}),Eo=(()=>{let e=class e{constructor(r,i,o,s,a){this.elementRef=r,this.appRef=i,this.componentFactoryResolver=o,this.viewContainerRef=s,this.injector=a,this.tooltip="",this.position="bottom",this.componentRef=null}onMouseEnter(){if(this.componentRef===null){this.componentRef=this.viewContainerRef.createComponent(D4);let r=this.componentRef.hostView.rootNodes[0];document.body.appendChild(r),this.setTooltipComponentProperties()}}setTooltipComponentProperties(){if(this.componentRef!==null){this.componentRef.instance.tooltip=this.tooltip,this.componentRef.instance.position=this.position;let{left:r,right:i,top:o,bottom:s}=this.elementRef.nativeElement.getBoundingClientRect();switch(this.position){case _i.BOTTOM:{this.componentRef.instance.left=Math.round((i-r)/2+r),this.componentRef.instance.top=Math.round(s);break}case _i.TOP:{this.componentRef.instance.left=Math.round((i-r)/2+r),this.componentRef.instance.top=Math.round(o);break}case _i.RIGHT:{this.componentRef.instance.left=Math.round(i),this.componentRef.instance.top=Math.round(o+(s-o)/2);break}case _i.LEFT:{this.componentRef.instance.left=Math.round(r),this.componentRef.instance.top=Math.round(o+(s-o)/2);break}default:{this.componentRef.instance.left=Math.round((i-r)/2+r),this.componentRef.instance.top=Math.round(s);break}}}}onMouseLeave(){this.destroy()}ngOnDestroy(){this.destroy()}destroy(){this.componentRef!==null&&(this.appRef.detachView(this.componentRef.hostView),this.componentRef.destroy(),this.componentRef=null)}};e.\u0275fac=function(i){return new(i||e)(X($n),X(pi),X(ro),X(En),X(kr))},e.\u0275dir=cr({type:e,selectors:[["","tooltip",""]],hostBindings:function(i,o){i&1&&ie("mouseenter",function(){return o.onMouseEnter()})("mouseleave",function(){return o.onMouseLeave()})},inputs:{tooltip:"tooltip",position:"position"}});let t=e;return t})();var FD=t=>[t],D4=(()=>{let e=class e{constructor(){this.tooltip="",this.left=0,this.top=0,this.position=_i.DEFAULT}ngOnInit(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=ae({type:e,selectors:[["app-tooltip"]],decls:2,vars:8,consts:[[1,"tooltip",3,"ngClass"]],template:function(i,o){i&1&&(x(0,"div",0),J(1),A()),i&2&&(Uc("left",o.left+"px")("top",o.top+"px"),G("ngClass",Q2(6,FD,"tooltip-"+o.position)),z(1),Lr(" ",o.tooltip,`
`))},dependencies:[Cv],styles:['.tooltip[_ngcontent-%COMP%]{position:fixed;background-color:#fff;border-radius:5px;color:var(--background-header);padding:3px 6px;font-size:13px;transform:translate(-50%)}.tooltip[_ngcontent-%COMP%]:before{content:"";width:0;height:0;border:5px solid white;position:absolute}.tooltip-bottom[_ngcontent-%COMP%]{transform:translate(-50%);margin-top:7px}.tooltip-bottom[_ngcontent-%COMP%]:before{border-left-color:transparent;border-right-color:transparent;border-top:none;left:calc(50% - 5px);top:-5px}.tooltip-top[_ngcontent-%COMP%]{transform:translate(-50%,calc(-100% - 7px));margin-bottom:7px}.tooltip-top[_ngcontent-%COMP%]:before{border-left-color:transparent;border-right-color:transparent;border-bottom:none;left:calc(50% - 5px);bottom:-5px}.tooltip-left[_ngcontent-%COMP%]{transform:translate(calc(-100% - 7px),-50%);margin-right:7px}.tooltip-left[_ngcontent-%COMP%]:before{border-top-color:transparent;border-bottom-color:transparent;border-right:none;right:-5px;top:calc(50% - 5px)}.tooltip-right[_ngcontent-%COMP%]{transform:translateY(-50%);margin-left:7px}.tooltip-right[_ngcontent-%COMP%]:before{border-top-color:transparent;border-bottom-color:transparent;border-left:none;left:-5px;top:calc(50% - 5px)}']});let t=e;return t})();var Kn=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Nr({type:e}),e.\u0275inj=Pr({imports:[oe]});let t=e;return t})();var kD=["*"],xo=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=ae({type:e,selectors:[["app-layer-box"]],inputs:{headerText:"headerText"},standalone:!0,features:[de],ngContentSelectors:kD,decls:6,vars:1,consts:[[1,"container"],[1,"header"],[1,"header-text","prevent-select"],[1,"content"]],template:function(i,o){i&1&&(X2(),x(0,"div",0)(1,"div",1)(2,"div",2),J(3),A()(),x(4,"div",3),Z2(5),A()()),i&2&&(z(3),Lr(" ",o.headerText," "))},dependencies:[oe,Kn],styles:[".container[_ngcontent-%COMP%]{display:block}.header[_ngcontent-%COMP%]{background-color:var(--background-subheader);height:32px}.header-text[_ngcontent-%COMP%]{line-height:32px;text-align:center;margin:auto;font-weight:500}"]});let t=e;return t})();var Zo=ld(P1());function J3(t,e){let n={},r=[];for(let i of t){let o=i[e];r.push(o),n[o]=i}return{ids:r,asObject:n}}function e6(t,e){return t&&e?wo(e)?e(t):t[e]:t}function RT(t,e){return t.config[e.idKeyRef]}var L1=class{constructor(e){this.entitiesKey=void 0,this.idsKey=void 0,this.idKeyRef="idKey",this.entitiesKey=e.entitiesKey,this.idsKey=e.idsKey,this.idKeyRef=e.idKeyRef}};function t6(t){let e=t?`idKey${Br(t)}`:"idKey",n=new L1({entitiesKey:t?`${t}Entities`:"entities",idsKey:t?`${t}Ids`:"ids",idKeyRef:e});function r(i){let o={},s=[],a=i?.idKey||"id";return i?.initialValue&&({ids:s,asObject:o}=J3(i.initialValue,a)),{props:{[n.entitiesKey]:o,[n.idsKey]:s},config:{[e]:a}}}return{[`${t}EntitiesRef`]:n,[`with${Br(t)}Entities`]:r}}var{withEntities:B1,EntitiesRef:Dr}=t6(""),{UIEntitiesRef:p$,withUIEntities:g$}=t6("UI");function $1(t,e={}){return function(n,r){let{prepend:i=!1,ref:o=Dr}=e,{entitiesKey:s,idsKey:a}=o,c=RT(r,o),l=So(t);if(!l.length)return n;b4()&&(PT(l,c,n,s),NT(l,c));let{ids:u,asObject:f}=J3(l,c);return Se(T({},n),{[s]:T(T({},n[s]),f),[a]:i?[...u,...n[a]]:[...n[a],...u]})}}function PT(t,e,n,r){t.forEach(i=>{let o=i[e];if(n[r][o])throw Error(`Entity already exists. ${e} ${o}`)})}function NT(t,e){let n=new Set;t.forEach(r=>{let i=r[e];if(n.has(i))throw Error(`Duplicate entity id provided. ${e} ${i}`);n.add(i)})}function n6(t={}){let{ref:{entitiesKey:e,idsKey:n}=Dr}=t;return function(r){return r[n].map(i=>r[e][i])}}function nr(t,e={}){return function(n){let{ref:{entitiesKey:r}=Dr}=e;return n[r][t]}}function FT(t,e={}){return function(n){let{ref:{entitiesKey:r}=Dr}=e;return Reflect.has(n[r],t)}}function kT(t,e){return wo(t)?t(e):T(T({},e),t)}function Er(t,e,n={}){return function(r){let{ref:{entitiesKey:i}=Dr}=n,o={};for(let s of So(t))FT(s,n)(r)&&(o[s]=kT(e,nr(s,n)(r)));return Se(T({},r),{[i]:T(T({},r[i]),o)})}}var V1=function(t,e){return V1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},V1(t,e)};function H1(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");V1(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function LT(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{l(r.next(u))}catch(f){s(f)}}function c(u){try{l(r.throw(u))}catch(f){s(f)}}function l(u){u.done?o(u.value):i(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function r6(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){n.label=l[1];break}if(l[0]===6&&n.label<o[1]){n.label=o[1],o=l;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(l);break}o[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],i=0}finally{r=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function ma(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ku(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o}function Lu(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))}function zo(t){return this instanceof zo?(this.v=t,this):new zo(t)}function VT(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(d){r[d]&&(i[d]=function(h){return new Promise(function(g,v){o.push([d,h,g,v])>1||a(d,h)})})}function a(d,h){try{c(r[d](h))}catch(g){f(o[0][3],g)}}function c(d){d.value instanceof zo?Promise.resolve(d.value.v).then(l,u):f(o[0][2],d)}function l(d){a("next",d)}function u(d){a("throw",d)}function f(d,h){d(h),o.shift(),o.length&&a(o[0][0],o[0][1])}}function jT(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof ma=="function"?ma(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,c){s=t[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(l){o({value:l,done:a})},s)}}function jt(t){return typeof t=="function"}function UT(t){var e=function(r){Error.call(r),r.stack=new Error().stack},n=t(e);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var N1=UT(function(t){return function(n){t(this),this.message=n?n.length+` errors occurred during unsubscription:
`+n.map(function(r,i){return i+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=n}});function K3(t,e){if(t){var n=t.indexOf(e);0<=n&&t.splice(n,1)}}var G1=function(){function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){var e,n,r,i,o;if(!this.closed){this.closed=!0;var s=this._parentage;if(s)if(this._parentage=null,Array.isArray(s))try{for(var a=ma(s),c=a.next();!c.done;c=a.next()){var l=c.value;l.remove(this)}}catch(v){e={error:v}}finally{try{c&&!c.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}else s.remove(this);var u=this.initialTeardown;if(jt(u))try{u()}catch(v){o=v instanceof N1?v.errors:[v]}var f=this._finalizers;if(f){this._finalizers=null;try{for(var d=ma(f),h=d.next();!h.done;h=d.next()){var g=h.value;try{X3(g)}catch(v){o=o??[],v instanceof N1?o=Lu(Lu([],ku(o)),ku(v.errors)):o.push(v)}}}catch(v){r={error:v}}finally{try{h&&!h.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}}if(o)throw new N1(o)}},t.prototype.add=function(e){var n;if(e&&e!==this)if(this.closed)X3(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}},t.prototype._hasParent=function(e){var n=this._parentage;return n===e||Array.isArray(n)&&n.includes(e)},t.prototype._addParent=function(e){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e},t.prototype._removeParent=function(e){var n=this._parentage;n===e?this._parentage=null:Array.isArray(n)&&K3(n,e)},t.prototype.remove=function(e){var n=this._finalizers;n&&K3(n,e),e instanceof t&&e._removeParent(this)},t.EMPTY=function(){var e=new t;return e.closed=!0,e}(),t}();G1.EMPTY;function i6(t){return t instanceof G1||t&&"closed"in t&&jt(t.remove)&&jt(t.add)&&jt(t.unsubscribe)}function X3(t){jt(t)?t():t.unsubscribe()}var va={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Vu={setTimeout:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=Vu.delegate;return i?.setTimeout?i.setTimeout.apply(i,Lu([t,e],ku(n))):setTimeout.apply(void 0,Lu([t,e],ku(n)))},clearTimeout:function(t){var e=Vu.delegate;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function o6(t){Vu.setTimeout(function(){var e=va.onUnhandledError;if(e)e(t);else throw t})}function Z3(){}var BT=function(){return z1("C",void 0,void 0)}();function $T(t){return z1("E",void 0,t)}function HT(t){return z1("N",t,void 0)}function z1(t,e,n){return{kind:t,value:e,error:n}}var Nu=null;function GT(t){if(va.useDeprecatedSynchronousErrorHandling){var e=!Nu;if(e&&(Nu={errorThrown:!1,error:null}),t(),e){var n=Nu,r=n.errorThrown,i=n.error;if(Nu=null,r)throw i}}else t()}var q1=function(t){H1(e,t);function e(n){var r=t.call(this)||this;return r.isStopped=!1,n?(r.destination=n,i6(n)&&n.add(r)):r.destination=YT,r}return e.create=function(n,r,i){return new j1(n,r,i)},e.prototype.next=function(n){this.isStopped?k1(HT(n),this):this._next(n)},e.prototype.error=function(n){this.isStopped?k1($T(n),this):(this.isStopped=!0,this._error(n))},e.prototype.complete=function(){this.isStopped?k1(BT,this):(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(n){this.destination.next(n)},e.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(G1),zT=Function.prototype.bind;function F1(t,e){return zT.call(t,e)}var qT=function(){function t(e){this.partialObserver=e}return t.prototype.next=function(e){var n=this.partialObserver;if(n.next)try{n.next(e)}catch(r){Fu(r)}},t.prototype.error=function(e){var n=this.partialObserver;if(n.error)try{n.error(e)}catch(r){Fu(r)}else Fu(e)},t.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(n){Fu(n)}},t}(),j1=function(t){H1(e,t);function e(n,r,i){var o=t.call(this)||this,s;if(jt(n)||!n)s={next:n??void 0,error:r??void 0,complete:i??void 0};else{var a;o&&va.useDeprecatedNextContext?(a=Object.create(n),a.unsubscribe=function(){return o.unsubscribe()},s={next:n.next&&F1(n.next,a),error:n.error&&F1(n.error,a),complete:n.complete&&F1(n.complete,a)}):s=n}return o.destination=new qT(s),o}return e}(q1);function Fu(t){o6(t)}function WT(t){throw t}function k1(t,e){var n=va.onStoppedNotification;n&&Vu.setTimeout(function(){return n(t,e)})}var YT={closed:!0,next:Z3,error:WT,complete:Z3},W1=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function s6(t){return t}function a6(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return c6(t)}function c6(t){return t.length===0?s6:t.length===1?t[0]:function(n){return t.reduce(function(r,i){return i(r)},n)}}var qo=function(){function t(e){e&&(this._subscribe=e)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(e,n,r){var i=this,o=XT(e)?e:new j1(e,n,r);return GT(function(){var s=i,a=s.operator,c=s.source;o.add(a?a.call(o,c):c?i._subscribe(o):i._trySubscribe(o))}),o},t.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(n){e.error(n)}},t.prototype.forEach=function(e,n){var r=this;return n=Q3(n),new n(function(i,o){var s=new j1({next:function(a){try{e(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});r.subscribe(s)})},t.prototype._subscribe=function(e){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(e)},t.prototype[W1]=function(){return this},t.prototype.pipe=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return c6(e)(this)},t.prototype.toPromise=function(e){var n=this;return e=Q3(e),new e(function(r,i){var o;n.subscribe(function(s){return o=s},function(s){return i(s)},function(){return r(o)})})},t.create=function(e){return new t(e)},t}();function Q3(t){var e;return(e=t??va.Promise)!==null&&e!==void 0?e:Promise}function KT(t){return t&&jt(t.next)&&jt(t.error)&&jt(t.complete)}function XT(t){return t&&t instanceof q1||KT(t)&&i6(t)}function ZT(t){return jt(t?.lift)}function l6(t){return function(e){if(ZT(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function U1(t,e,n,r,i){return new QT(t,e,n,r,i)}var QT=function(t){H1(e,t);function e(n,r,i,o,s,a){var c=t.call(this,n)||this;return c.onFinalize=s,c.shouldUnsubscribe=a,c._next=r?function(l){try{r(l)}catch(u){n.error(u)}}:t.prototype._next,c._error=o?function(l){try{o(l)}catch(u){n.error(u)}finally{this.unsubscribe()}}:t.prototype._error,c._complete=i?function(){try{i()}catch(l){n.error(l)}finally{this.unsubscribe()}}:t.prototype._complete,c}return e.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;t.prototype.unsubscribe.call(this),!r&&((n=this.onFinalize)===null||n===void 0||n.call(this))}},e}(q1),JT=function(t){return t&&typeof t.length=="number"&&typeof t!="function"};function eA(t){return jt(t?.then)}function tA(t){return jt(t[W1])}function nA(t){return Symbol.asyncIterator&&jt(t?.[Symbol.asyncIterator])}function rA(t){return new TypeError("You provided "+(t!==null&&typeof t=="object"?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function iA(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var oA=iA();function sA(t){return jt(t?.[oA])}function aA(t){return VT(this,arguments,function(){var n,r,i,o;return r6(this,function(s){switch(s.label){case 0:n=t.getReader(),s.label=1;case 1:s.trys.push([1,,9,10]),s.label=2;case 2:return[4,zo(n.read())];case 3:return r=s.sent(),i=r.value,o=r.done,o?[4,zo(void 0)]:[3,5];case 4:return[2,s.sent()];case 5:return[4,zo(i)];case 6:return[4,s.sent()];case 7:return s.sent(),[3,2];case 8:return[3,10];case 9:return n.releaseLock(),[7];case 10:return[2]}})})}function cA(t){return jt(t?.getReader)}function lA(t){if(t instanceof qo)return t;if(t!=null){if(tA(t))return uA(t);if(JT(t))return dA(t);if(eA(t))return fA(t);if(nA(t))return u6(t);if(sA(t))return hA(t);if(cA(t))return pA(t)}throw rA(t)}function uA(t){return new qo(function(e){var n=t[W1]();if(jt(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function dA(t){return new qo(function(e){for(var n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function fA(t){return new qo(function(e){t.then(function(n){e.closed||(e.next(n),e.complete())},function(n){return e.error(n)}).then(null,o6)})}function hA(t){return new qo(function(e){var n,r;try{for(var i=ma(t),o=i.next();!o.done;o=i.next()){var s=o.value;if(e.next(s),e.closed)return}}catch(a){n={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}e.complete()})}function u6(t){return new qo(function(e){gA(t,e).catch(function(n){return e.error(n)})})}function pA(t){return u6(aA(t))}function gA(t,e){var n,r,i,o;return LT(this,void 0,void 0,function(){var s,a;return r6(this,function(c){switch(c.label){case 0:c.trys.push([0,5,6,11]),n=jT(t),c.label=1;case 1:return[4,n.next()];case 2:if(r=c.sent(),!!r.done)return[3,4];if(s=r.value,e.next(s),e.closed)return[2];c.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=c.sent(),i={error:a},[3,11];case 6:return c.trys.push([6,,9,10]),r&&!r.done&&(o=n.return)?[4,o.call(n)]:[3,8];case 7:c.sent(),c.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})}function mA(t,e){return e===void 0&&(e=s6),t=t??vA,l6(function(n,r){var i,o=!0;n.subscribe(U1(r,function(s){var a=e(s);(o||!t(i,a))&&(o=!1,i=a,r.next(s))}))})}function vA(t,e){return t===e}function yA(t,e){return l6(function(n,r){var i=null,o=0,s=!1,a=function(){return s&&!i&&r.complete()};n.subscribe(U1(r,function(c){i?.unsubscribe();var l=0,u=o++;lA(t(c,u)).subscribe(i=U1(r,function(f){return r.next(e?e(c,f,u,l++):f)},function(){i=null,a()}))},function(){s=!0,a()}))})}function d6(t){return mA((e,n)=>e[t]===n[t])}function Y1(t,e={}){let{ref:{entitiesKey:n}=Dr,pluck:r}=e;return a6(d6(n),Do(i=>CA(i[n],t,r)))}function CA(t,e,n){let r=t[e];if(!v4(r))return n?e6(r,n):r}function K1(t,e){let{ref:{entitiesKey:n,idsKey:r}=Dr,pluck:i}=e||{};return a6(d6(n),Do(o=>{let s=[];return o[r].forEach((a,c)=>{let l=o[n][a];t(l,c)&&s.push(e6(l,i))}),s}),gl())}var{selectActiveId:_A,setActiveId:X1,withActiveId:f6,resetActiveId:m$,getActiveId:bA}=Pp("activeId",{initialValue:void 0});function h6(t={}){let{ref:e=Dr}=t;return function(n){return n.pipe(_A()).pipe(yA(r=>n.pipe(Y1(r,{ref:e}))))}}function Wo(t={}){let{ref:{entitiesKey:e}=Dr}=t;return function(n){return n[e][bA(n)]}}var{setActiveIds:v$,resetActiveIds:y$,withActiveIds:C$,selectActiveIds:_$,toggleActiveIds:b$,removeActiveIds:w$,addActiveIds:S$,getActiveIds:D$}=C4("activeIds",{initialValue:[]});var J1=function(t,e){return J1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},J1(t,e)};function Xo(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");J1(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function wA(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{l(r.next(u))}catch(f){s(f)}}function c(u){try{l(r.throw(u))}catch(f){s(f)}}function l(u){u.done?o(u.value):i(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function y6(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){n.label=l[1];break}if(l[0]===6&&n.label<o[1]){n.label=o[1],o=l;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(l);break}o[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],i=0}finally{r=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function Ko(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Hu(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o}function Gu(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))}function Yo(t){return this instanceof Yo?(this.v=t,this):new Yo(t)}function SA(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(d){r[d]&&(i[d]=function(h){return new Promise(function(g,v){o.push([d,h,g,v])>1||a(d,h)})})}function a(d,h){try{c(r[d](h))}catch(g){f(o[0][3],g)}}function c(d){d.value instanceof Yo?Promise.resolve(d.value.v).then(l,u):f(o[0][2],d)}function l(d){a("next",d)}function u(d){a("throw",d)}function f(d,h){d(h),o.shift(),o.length&&a(o[0][0],o[0][1])}}function DA(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Ko=="function"?Ko(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,c){s=t[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(l){o({value:l,done:a})},s)}}function At(t){return typeof t=="function"}function C6(t){var e=function(r){Error.call(r),r.stack=new Error().stack},n=t(e);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Z1=C6(function(t){return function(n){t(this),this.message=n?n.length+` errors occurred during unsubscription:
`+n.map(function(r,i){return i+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=n}});function e0(t,e){if(t){var n=t.indexOf(e);0<=n&&t.splice(n,1)}}var qu=function(){function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){var e,n,r,i,o;if(!this.closed){this.closed=!0;var s=this._parentage;if(s)if(this._parentage=null,Array.isArray(s))try{for(var a=Ko(s),c=a.next();!c.done;c=a.next()){var l=c.value;l.remove(this)}}catch(v){e={error:v}}finally{try{c&&!c.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}else s.remove(this);var u=this.initialTeardown;if(At(u))try{u()}catch(v){o=v instanceof Z1?v.errors:[v]}var f=this._finalizers;if(f){this._finalizers=null;try{for(var d=Ko(f),h=d.next();!h.done;h=d.next()){var g=h.value;try{p6(g)}catch(v){o=o??[],v instanceof Z1?o=Gu(Gu([],Hu(o)),Hu(v.errors)):o.push(v)}}}catch(v){r={error:v}}finally{try{h&&!h.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}}if(o)throw new Z1(o)}},t.prototype.add=function(e){var n;if(e&&e!==this)if(this.closed)p6(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}},t.prototype._hasParent=function(e){var n=this._parentage;return n===e||Array.isArray(n)&&n.includes(e)},t.prototype._addParent=function(e){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e},t.prototype._removeParent=function(e){var n=this._parentage;n===e?this._parentage=null:Array.isArray(n)&&e0(n,e)},t.prototype.remove=function(e){var n=this._finalizers;n&&e0(n,e),e instanceof t&&e._removeParent(this)},t.EMPTY=function(){var e=new t;return e.closed=!0,e}(),t}(),_6=qu.EMPTY;function b6(t){return t instanceof qu||t&&"closed"in t&&At(t.remove)&&At(t.add)&&At(t.unsubscribe)}function p6(t){At(t)?t():t.unsubscribe()}var Wu={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},t0={setTimeout:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=t0.delegate;return i?.setTimeout?i.setTimeout.apply(i,Gu([t,e],Hu(n))):setTimeout.apply(void 0,Gu([t,e],Hu(n)))},clearTimeout:function(t){var e=t0.delegate;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function w6(t){t0.setTimeout(function(){var e=Wu.onUnhandledError;if(e)e(t);else throw t})}function g6(){}var ju=null;function Bu(t){if(Wu.useDeprecatedSynchronousErrorHandling){var e=!ju;if(e&&(ju={errorThrown:!1,error:null}),t(),e){var n=ju,r=n.errorThrown,i=n.error;if(ju=null,r)throw i}}else t()}var r0=function(t){Xo(e,t);function e(n){var r=t.call(this)||this;return r.isStopped=!1,n?(r.destination=n,b6(n)&&n.add(r)):r.destination=MA,r}return e.create=function(n,r,i){return new n0(n,r,i)},e.prototype.next=function(n){this.isStopped||this._next(n)},e.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(n){this.destination.next(n)},e.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(qu),EA=Function.prototype.bind;function Q1(t,e){return EA.call(t,e)}var xA=function(){function t(e){this.partialObserver=e}return t.prototype.next=function(e){var n=this.partialObserver;if(n.next)try{n.next(e)}catch(r){Uu(r)}},t.prototype.error=function(e){var n=this.partialObserver;if(n.error)try{n.error(e)}catch(r){Uu(r)}else Uu(e)},t.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(n){Uu(n)}},t}(),n0=function(t){Xo(e,t);function e(n,r,i){var o=t.call(this)||this,s;if(At(n)||!n)s={next:n??void 0,error:r??void 0,complete:i??void 0};else{var a;o&&Wu.useDeprecatedNextContext?(a=Object.create(n),a.unsubscribe=function(){return o.unsubscribe()},s={next:n.next&&Q1(n.next,a),error:n.error&&Q1(n.error,a),complete:n.complete&&Q1(n.complete,a)}):s=n}return o.destination=new xA(s),o}return e}(r0);function Uu(t){w6(t)}function IA(t){throw t}var MA={closed:!0,next:g6,error:IA,complete:g6},i0=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function TA(t){return t}function AA(t){return t.length===0?TA:t.length===1?t[0]:function(n){return t.reduce(function(r,i){return i(r)},n)}}var Rn=function(){function t(e){e&&(this._subscribe=e)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(e,n,r){var i=this,o=RA(e)?e:new n0(e,n,r);return Bu(function(){var s=i,a=s.operator,c=s.source;o.add(a?a.call(o,c):c?i._subscribe(o):i._trySubscribe(o))}),o},t.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(n){e.error(n)}},t.prototype.forEach=function(e,n){var r=this;return n=m6(n),new n(function(i,o){var s=new n0({next:function(a){try{e(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});r.subscribe(s)})},t.prototype._subscribe=function(e){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(e)},t.prototype[i0]=function(){return this},t.prototype.pipe=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return AA(e)(this)},t.prototype.toPromise=function(e){var n=this;return e=m6(e),new e(function(r,i){var o;n.subscribe(function(s){return o=s},function(s){return i(s)},function(){return r(o)})})},t.create=function(e){return new t(e)},t}();function m6(t){var e;return(e=t??Wu.Promise)!==null&&e!==void 0?e:Promise}function OA(t){return t&&At(t.next)&&At(t.error)&&At(t.complete)}function RA(t){return t&&t instanceof r0||OA(t)&&b6(t)}function PA(t){return At(t?.lift)}function Yu(t){return function(e){if(PA(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function zu(t,e,n,r,i){return new NA(t,e,n,r,i)}var NA=function(t){Xo(e,t);function e(n,r,i,o,s,a){var c=t.call(this,n)||this;return c.onFinalize=s,c.shouldUnsubscribe=a,c._next=r?function(l){try{r(l)}catch(u){n.error(u)}}:t.prototype._next,c._error=o?function(l){try{o(l)}catch(u){n.error(u)}finally{this.unsubscribe()}}:t.prototype._error,c._complete=i?function(){try{i()}catch(l){n.error(l)}finally{this.unsubscribe()}}:t.prototype._complete,c}return e.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;t.prototype.unsubscribe.call(this),!r&&((n=this.onFinalize)===null||n===void 0||n.call(this))}},e}(r0),FA=C6(function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),S6=function(t){Xo(e,t);function e(){var n=t.call(this)||this;return n.closed=!1,n.currentObservers=null,n.observers=[],n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return e.prototype.lift=function(n){var r=new v6(this,this);return r.operator=n,r},e.prototype._throwIfClosed=function(){if(this.closed)throw new FA},e.prototype.next=function(n){var r=this;Bu(function(){var i,o;if(r._throwIfClosed(),!r.isStopped){r.currentObservers||(r.currentObservers=Array.from(r.observers));try{for(var s=Ko(r.currentObservers),a=s.next();!a.done;a=s.next()){var c=a.value;c.next(n)}}catch(l){i={error:l}}finally{try{a&&!a.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}}})},e.prototype.error=function(n){var r=this;Bu(function(){if(r._throwIfClosed(),!r.isStopped){r.hasError=r.isStopped=!0,r.thrownError=n;for(var i=r.observers;i.length;)i.shift().error(n)}})},e.prototype.complete=function(){var n=this;Bu(function(){if(n._throwIfClosed(),!n.isStopped){n.isStopped=!0;for(var r=n.observers;r.length;)r.shift().complete()}})},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(n){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,n)},e.prototype._subscribe=function(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)},e.prototype._innerSubscribe=function(n){var r=this,i=this,o=i.hasError,s=i.isStopped,a=i.observers;return o||s?_6:(this.currentObservers=null,a.push(n),new qu(function(){r.currentObservers=null,e0(a,n)}))},e.prototype._checkFinalizedStatuses=function(n){var r=this,i=r.hasError,o=r.thrownError,s=r.isStopped;i?n.error(o):s&&n.complete()},e.prototype.asObservable=function(){var n=new Rn;return n.source=this,n},e.create=function(n,r){return new v6(n,r)},e}(Rn),v6=function(t){Xo(e,t);function e(n,r){var i=t.call(this)||this;return i.destination=n,i.source=r,i}return e.prototype.next=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.next)===null||i===void 0||i.call(r,n)},e.prototype.error=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.error)===null||i===void 0||i.call(r,n)},e.prototype.complete=function(){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||r===void 0||r.call(n)},e.prototype._subscribe=function(n){var r,i;return(i=(r=this.source)===null||r===void 0?void 0:r.subscribe(n))!==null&&i!==void 0?i:_6},e}(S6),D6={now:function(){return(D6.delegate||Date).now()},delegate:void 0},kA=function(t){Xo(e,t);function e(n,r,i){n===void 0&&(n=1/0),r===void 0&&(r=1/0),i===void 0&&(i=D6);var o=t.call(this)||this;return o._bufferSize=n,o._windowTime=r,o._timestampProvider=i,o._buffer=[],o._infiniteTimeWindow=!0,o._infiniteTimeWindow=r===1/0,o._bufferSize=Math.max(1,n),o._windowTime=Math.max(1,r),o}return e.prototype.next=function(n){var r=this,i=r.isStopped,o=r._buffer,s=r._infiniteTimeWindow,a=r._timestampProvider,c=r._windowTime;i||(o.push(n),!s&&o.push(a.now()+c)),this._trimBuffer(),t.prototype.next.call(this,n)},e.prototype._subscribe=function(n){this._throwIfClosed(),this._trimBuffer();for(var r=this._innerSubscribe(n),i=this,o=i._infiniteTimeWindow,s=i._buffer,a=s.slice(),c=0;c<a.length&&!n.closed;c+=o?1:2)n.next(a[c]);return this._checkFinalizedStatuses(n),r},e.prototype._trimBuffer=function(){var n=this,r=n._bufferSize,i=n._timestampProvider,o=n._buffer,s=n._infiniteTimeWindow,a=(s?1:2)*r;if(r<1/0&&a<o.length&&o.splice(0,o.length-a),!s){for(var c=i.now(),l=0,u=1;u<o.length&&o[u]<=c;u+=2)l=u;l&&o.splice(0,l+1)}},e}(S6);function LA(t){return t&&At(t.schedule)}function VA(t){return t[t.length-1]}function jA(t){return LA(VA(t))?t.pop():void 0}var E6=function(t){return t&&typeof t.length=="number"&&typeof t!="function"};function x6(t){return At(t?.then)}function I6(t){return At(t[i0])}function M6(t){return Symbol.asyncIterator&&At(t?.[Symbol.asyncIterator])}function T6(t){return new TypeError("You provided "+(t!==null&&typeof t=="object"?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function UA(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var A6=UA();function O6(t){return At(t?.[A6])}function R6(t){return SA(this,arguments,function(){var n,r,i,o;return y6(this,function(s){switch(s.label){case 0:n=t.getReader(),s.label=1;case 1:s.trys.push([1,,9,10]),s.label=2;case 2:return[4,Yo(n.read())];case 3:return r=s.sent(),i=r.value,o=r.done,o?[4,Yo(void 0)]:[3,5];case 4:return[2,s.sent()];case 5:return[4,Yo(i)];case 6:return[4,s.sent()];case 7:return s.sent(),[3,2];case 8:return[3,10];case 9:return n.releaseLock(),[7];case 10:return[2]}})})}function P6(t){return At(t?.getReader)}function Ku(t){if(t instanceof Rn)return t;if(t!=null){if(I6(t))return BA(t);if(E6(t))return $A(t);if(x6(t))return HA(t);if(M6(t))return N6(t);if(O6(t))return GA(t);if(P6(t))return zA(t)}throw T6(t)}function BA(t){return new Rn(function(e){var n=t[i0]();if(At(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function $A(t){return new Rn(function(e){for(var n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function HA(t){return new Rn(function(e){t.then(function(n){e.closed||(e.next(n),e.complete())},function(n){return e.error(n)}).then(null,w6)})}function GA(t){return new Rn(function(e){var n,r;try{for(var i=Ko(t),o=i.next();!o.done;o=i.next()){var s=o.value;if(e.next(s),e.closed)return}}catch(a){n={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}e.complete()})}function N6(t){return new Rn(function(e){qA(t,e).catch(function(n){return e.error(n)})})}function zA(t){return N6(R6(t))}function qA(t,e){var n,r,i,o;return wA(this,void 0,void 0,function(){var s,a;return y6(this,function(c){switch(c.label){case 0:c.trys.push([0,5,6,11]),n=DA(t),c.label=1;case 1:return[4,n.next()];case 2:if(r=c.sent(),!!r.done)return[3,4];if(s=r.value,e.next(s),e.closed)return[2];c.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=c.sent(),i={error:a},[3,11];case 6:return c.trys.push([6,,9,10]),r&&!r.done&&(o=n.return)?[4,o.call(n)]:[3,8];case 7:c.sent(),c.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})}function xi(t,e,n,r,i){r===void 0&&(r=0),i===void 0&&(i=!1);var o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function F6(t,e){return e===void 0&&(e=0),Yu(function(n,r){n.subscribe(zu(r,function(i){return xi(r,t,function(){return r.next(i)},e)},function(){return xi(r,t,function(){return r.complete()},e)},function(i){return xi(r,t,function(){return r.error(i)},e)}))})}function k6(t,e){return e===void 0&&(e=0),Yu(function(n,r){r.add(t.schedule(function(){return n.subscribe(r)},e))})}function WA(t,e){return Ku(t).pipe(k6(e),F6(e))}function YA(t,e){return Ku(t).pipe(k6(e),F6(e))}function KA(t,e){return new Rn(function(n){var r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function XA(t,e){return new Rn(function(n){var r;return xi(n,e,function(){r=t[A6](),xi(n,e,function(){var i,o,s;try{i=r.next(),o=i.value,s=i.done}catch(a){n.error(a);return}s?n.complete():n.next(o)},0,!0)}),function(){return At(r?.return)&&r.return()}})}function L6(t,e){if(!t)throw new Error("Iterable cannot be null");return new Rn(function(n){xi(n,e,function(){var r=t[Symbol.asyncIterator]();xi(n,e,function(){r.next().then(function(i){i.done?n.complete():n.next(i.value)})},0,!0)})})}function ZA(t,e){return L6(R6(t),e)}function QA(t,e){if(t!=null){if(I6(t))return WA(t,e);if(E6(t))return KA(t,e);if(x6(t))return YA(t,e);if(M6(t))return L6(t,e);if(O6(t))return XA(t,e);if(P6(t))return ZA(t,e)}throw T6(t)}function V6(t,e){return e?QA(t,e):Ku(t)}function $u(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=jA(t);return V6(t,n)}function JA(t,e){return Yu(function(n,r){var i=0;n.subscribe(zu(r,function(o){return t.call(e,o,i++)&&r.next(o)}))})}function eO(t){return JA(function(e,n){return t<=n})}function tO(t,e){return Yu(function(n,r){var i=null,o=0,s=!1,a=function(){return s&&!i&&r.complete()};n.subscribe(zu(r,function(c){i?.unsubscribe();var l=0,u=o++;Ku(t(c,u)).subscribe(i=zu(r,function(f){return r.next(e?e(c,f,u,l++):f)},function(){i=null,a()}))},function(){s=!0,a()}))})}function j6(t,e){let n={source:c=>c,preStoreInit:c=>c,key:e.key??`${t.name}@store`,runGuard(){return typeof window<"u"}},r=T(T({},n),e);if(!r.runGuard?.())return{initialized$:$u(!1),unsubscribe(){}};let{storage:i}=e,o=new kA(1),s=V6(i.getItem(r.key)).subscribe(c=>{c&&t.update(l=>r.preStoreInit(T(T({},l),c))),o.next(!0),o.complete()}),a=r.source(t).pipe(eO(1),tO(c=>{let l=r.preStorageUpdate?r.preStorageUpdate(t.name,c):c;return i.setItem(r.key,l)})).subscribe();return{initialized$:o.asObservable(),unsubscribe(){a.unsubscribe(),s.unsubscribe()}}}function U6(t){if(t)return{getItem(e){let n=t.getItem(e);return $u(n&&JSON.parse(n))},setItem(e,n){return t.setItem(e,JSON.stringify(n)),$u(!0)},removeItem(e){return t.removeItem(e),$u(!0)}}}var nO=()=>{try{if(typeof localStorage<"u")return localStorage}catch{}},B6=U6(nO()),rO=()=>{try{if(typeof sessionStorage<"u")return sessionStorage}catch{}},I$=U6(rO());var Xu,iO=new Uint8Array(16);function o0(){if(!Xu&&(Xu=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Xu))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Xu(iO)}var Ft=[];for(let t=0;t<256;++t)Ft.push((t+256).toString(16).slice(1));function $6(t,e=0){return Ft[t[e+0]]+Ft[t[e+1]]+Ft[t[e+2]]+Ft[t[e+3]]+"-"+Ft[t[e+4]]+Ft[t[e+5]]+"-"+Ft[t[e+6]]+Ft[t[e+7]]+"-"+Ft[t[e+8]]+Ft[t[e+9]]+"-"+Ft[t[e+10]]+Ft[t[e+11]]+Ft[t[e+12]]+Ft[t[e+13]]+Ft[t[e+14]]+Ft[t[e+15]]}var oO=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),s0={randomUUID:oO};function sO(t,e,n){if(s0.randomUUID&&!e&&!t)return s0.randomUUID();t=t||{};let r=t.random||(t.rng||o0)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(let i=0;i<16;++i)e[n+i]=r[i];return e}return $6(r)}var Xr=sO;function H6(t){return Bt(this,null,function*(){let e=[];for(let n=0;n<t.length;n++){let r=t[n];if(!lO(r))continue;let i={lastModified:r.lastModified,lastModifiedDate:new Date(r.lastModified),name:r.name,size:r.size,type:r.type,width:0,height:0,dataURL:""},o=yield aO(r);i.dataURL=o;let s=yield fetch(o).then(c=>c.blob()),a=yield createImageBitmap(s);i.width=a.width,i.height=a.height,e.push(i)}return e})}function aO(t){return Bt(this,null,function*(){return new Promise(n=>{let r=new FileReader;r.onloadend=i=>{let o=r.result;n(o)},r.readAsDataURL(t)})})}var cO=["image/apng","image/bmp","image/gif","image/jpeg","image/pjpeg","image/png","image/svg+xml","image/tiff","image/webp","image/x-icon"];function lO(t){return cO.includes(t.type)}var c0=ld(z6());var Y$={id:Xr(),meta:{name:"testImage",active:!0,date:new Date,zoom:1,scrollX:.5,scrollY:.5},cuts:[]},K$={id:Xr(),meta:{name:"testImageTwo",active:!1,date:new Date,zoom:1,scrollX:.5,scrollY:.5},cuts:[]};c0.default.config({driver:c0.default.INDEXEDDB,name:"ImageCutter",version:1,storeName:"AppStore"});var Te=(()=>{let e=class e{constructor(){this.store=Op({name:"AppStore"},B1(),f6(),_4({bestNumber:42,showDropzone:!1})),this.restoredImageProps=[],this.preAppStoreInit=r=>{console.log("preAppStoreInit",r);let i=[];r.ids.forEach(s=>{let a=r.entities[s];i.push(a)}),this.addCanvasEntities(i);let o=T({},r);return o.showDropzone=!1,o},this.persist=j6(this.store,{key:"AppStore",storage:B6,source:()=>this.store.pipe(Fn(200)),preStoreInit:this.preAppStoreInit}),this.canvasStore=Op({name:"CanvasStore"},B1()),this.app$=this.store.pipe(r=>r),this.showDropzone$=this.store.pipe(Do(r=>r.showDropzone)),this.active$=this.store.pipe(h6()),this.activeCanvas$=this.active$.pipe(Rp(),ee(r=>r.id),Gt(),It(r=>this.canvasStore.pipe(Y1(r))),Rp()),this.activeFile$=this.active$.pipe(ee(r=>{if(r)return r.file}),Gt()),this.zoom$=this.active$.pipe(ee(r=>r?.meta.zoom),Gt()),this.scroll$=this.active$.pipe(ee(r=>{let i={x:.5,y:.5};return r&&(i.x=r.meta.scrollX,i.y=r.meta.scrollY),i}),Gt((r,i)=>r.x===i.x&&r.y===i.y)),this.selectedCut$=this.active$.pipe(ee(r=>r?.cuts?.find(o=>o.selected)),Gt()),this.nonSelectedCuts$=this.active$.pipe(ee(r=>r?.cuts.filter(o=>!o.selected)||[]),gl()),this.imagesOpen$=this.store.pipe(K1(r=>r.meta.active)),this.imagesClosed$=this.store.pipe(K1(r=>!r.meta.active)),console.log("AppRepo constructor")}updateShowDropzone(r){this.store.update(y4("showDropzone",r))}updateZoom(r,i){let o=this.store.query(nr(r));if(o){let s=T({},o);s.meta.zoom=i,this.store.update(Er(r,a=>T({},s)))}}updateScroll(r,i,o){let s=this.store.query(nr(r));if(s){let a=T({},s);a.meta.scrollX=i,a.meta.scrollY=o,this.store.update(Er(r,c=>T({},a)))}}setActiveImage(r){this.store.update(X1(r))}getActiveEntity(){return this.store.query(Wo())}addNewCut(r){let i=this.store.query(nr(r));if(!i)return;let o=T({},i);if(!i.cuts||i.cuts.length<1){o.cuts=[];let s={id:Xr(),name:"Cut 1",visible:!0,selected:!0,locked:!1,type:"absolute",absolute:{x:0,y:0,width:32,height:32},relative:{top:0,bottom:1,left:0,right:1}};o.cuts?.push(s)}else{let s={id:Xr(),name:`Cut ${i.cuts.length+1}`,visible:!0,selected:!1,locked:!1,type:"absolute",absolute:{x:0,y:0,width:32,height:32},relative:{top:0,bottom:1,left:0,right:1}};o.cuts?.push(s)}this.store.update(Er(r,s=>T({},o)))}duplicateCut(r,i){let o=this.store.query(nr(r));if(!o||!o.cuts)return;let s=o.cuts.findIndex(u=>u.id===i);if(s<0)return;let a=o.cuts[s],c=JSON.parse(JSON.stringify(o)),l=JSON.parse(JSON.stringify(a));l.id=Xr(),l.name=l.name+"(2)",l.selected=!1,c.cuts.push(l),this.store.update(Er(r,u=>T({},c)))}removeCut(r,i){let o=this.store.query(nr(r));if(!o||!o.cuts)return;let s=o.cuts.findIndex(l=>l.id===i);if(s<0)return;let a=o.cuts[s],c=T({},o);if(c.cuts=o.cuts.filter(l=>l.id!=i),!(c.cuts.length<1)){if(a.selected){let l=Math.max(0,s-1);c.cuts[l].selected=!0}}this.store.update(Er(r,l=>T({},c)))}updateCut(r,i){let o=this.store.query(nr(r));if(!o||!o.cuts)return;let s=o.cuts.findIndex(u=>u.id===i.id);if(s<0)return;let a=o.cuts[s],c=T({},o),l=T({},i);if(l.absolute){let u=l.absolute;l.absolute.x=Number(u.x),l.absolute.y=Number(u.y),l.absolute.height=Number(u.height),l.absolute.width=Number(u.width)}if(c.cuts[s]=l,a.selected&&!i.selected){let u=Math.max(0,s-1);c.cuts[u].selected=!0}this.store.update(Er(r,u=>T({},c)))}updateSelectedCut(r,i){}selectCut(r,i){let o=this.store.query(nr(r));if(!o||!o.cuts)return;let s=T({},o);if(s.cuts=o.cuts.map(a=>{let c=T({},a);return c.selected=!1,c}),i){let a=o.cuts.findIndex(l=>l.id===i.id);if(a<0)return;let c=o.cuts[a];s.cuts[a].selected=!0}this.store.update(Er(r,a=>T({},s)))}openFileList(r){return Bt(this,null,function*(){let i=yield H6(r);if(i.length<1)return;console.log(i);let o=i.map(s=>({id:Xr(),meta:{name:s.name,date:new Date,active:!0,zoom:1,scrollX:.5,scrollY:.5},file:s,cuts:[]}));this.store.update($1(o)),yield this.addCanvasEntities(o),this.store.update(X1(o[0].id))})}addCanvasEntities(r){return Bt(this,null,function*(){let i=[];for(let o=0;o<r.length;o++){let s=r[o];if(s.file){let a=new OffscreenCanvas(s.file.width,s.file.height),c={id:s.id,canvas:a},l=yield fetch(s.file.dataURL).then(d=>d.blob()),u=yield createImageBitmap(l);a.getContext("2d")?.drawImage(u,0,0),i.push(c)}}this.canvasStore.update($1(i))})}closeImage(r){let i=this.store.query(nr(r));if(!i||!i.meta.active)return;let o=JSON.parse(JSON.stringify(i));o.meta.active=!1;let s=this.store.query(n6()).filter(u=>u.meta.active),a=s.length,c=s.findIndex(u=>u.id===r),l=this.getActiveEntity();if(l&&l.id===i.id)if(a>1){let u=Math.max(0,c-1),f=s[u];this.setActiveImage(f.id)}else this.setActiveImage("-1");this.store.update(Er(r,u=>T({},o)))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var q6=(()=>{let e=class e{onResize(r){this.updateRect()}constructor(r){this.store=r,this.destroy$=new Oe,this.updateSubject=new Oe,this.dragging=!1,this.id="-42",this.zoom=1,this.scroll={x:.5,y:.5}}ngOnChanges(r){}ngAfterViewInit(){this.stage||(this.initStage(),this.initRect(),this.initSubs())}ngOnDestroy(){this.destroy$.next(1),this.destroy$.complete()}initStage(){this.stage=new Zo.default.Stage({height:117,width:208,container:"preview"});let r=new Zo.default.Layer({imageSmoothingEnabled:!1});this.layerBG=r,this.stage.add(this.layerBG);let i=new Zo.default.Layer({imageSmoothingEnabled:!1});this.layerRect=i,this.stage.add(this.layerRect)}initSubs(){this.store.activeFile$.pipe(vt(this.destroy$)).subscribe(r=>{this.imageFile=r;let i=this.store.store.query(Wo());i&&(this.id=i.id),this.drawBG(),this.updateRect()}),this.store.zoom$.pipe(vt(this.destroy$)).subscribe(r=>{this.zoom=r||1,this.updateRect()}),this.store.scroll$.pipe(vt(this.destroy$)).subscribe(r=>{this.scroll=r,this.updateRect()}),this.updateSubject.pipe(Fn(5),vt(this.destroy$)).subscribe(r=>{this.store.updateScroll(this.id,r.x,r.y)})}drawBG(){let r=this.imageFile;if(!r)return;let i=this.stage,o=117,s=208,a=r.dataURL,c=r.height,l=r.width,u=o/c,f=s/l,d=Math.min(u,f),h=(s-l*d)/2,g=(o-c*d)/2,v=this.layerBG;v.findOne("#previewBG")&&v.destroyChildren(),Zo.default.Image.fromURL(a,function(D){D.setAttrs({x:0,y:0,scaleX:1,scaleY:1,id:"previewBG"}),v.add(D)}),i.width(l*d),i.height(c*d),i.scale({x:d,y:d})}initRect(){let r=new Zo.default.Rect({x:0,y:0,width:100,height:100,stroke:"orange",strokeWidth:2,strokeScaleEnabled:!1,id:"previewRect",draggable:!0}),i=this;r.on("dragstart",function(){i.dragging=!0}),r.on("dragend",function(){i.dragging=!1}),r.on("dragmove",function(){let o=i.imageFile?.width||0,s=i.imageFile?.height||0,a=Math.max(0,Math.min(this.x(),o-this.width())),c=Math.max(0,Math.min(this.y(),s-this.height()));this.x(a),this.y(c),i.updateStoreFromRect()}),this.rect=r,this.layerRect.add(r)}updateStoreFromRect(){let r=this.rect,i=this.imageFile;if(!i)return;let o=i.width-r.width(),s=i.height-r.height(),a=o!=0?r.x()/o:.5,c=s!=0?r.y()/s:.5;this.updateSubject.next({x:a,y:c})}updateRect(){let r=this.imageFile;if(!r||this.dragging)return;let i=window.innerHeight,o=window.innerWidth,s=24,a=i-32-48-32-32-2*s,c=o-48-240-2*s,l=this.zoom,u=this.scroll,f=c/(r.width*l),d=a/(r.height*l),h=0,g=0,v=100,b=100;f<1?(v=f*r.width,h=u.x*(r.width-v)):(h=0,v=r.width),d<1?(b=d*r.height,g=u.y*(r.height-b)):(g=0,b=r.height),this.rect.x(h),this.rect.y(g),this.rect.width(v),this.rect.height(b)}};e.\u0275fac=function(i){return new(i||e)(X(Te))},e.\u0275cmp=ae({type:e,selectors:[["app-canvas-preview"]],hostBindings:function(i,o){i&1&&ie("resize",function(a){return o.onResize(a)},!1,Pc)},standalone:!0,features:[Sn,de],decls:2,vars:0,consts:[[1,"container"],["id","preview"]],template:function(i,o){i&1&&(x(0,"div",0),H(1,"div",1),A())},dependencies:[oe],styles:[".container[_ngcontent-%COMP%]{margin:0;padding:9px 16px}#preview[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:117px;width:208px}"]});let t=e;return t})();var uO=["zoomSlider"];function dO(t,e){t&1&&at(0)}function fO(t,e){t&1&&at(0)}function hO(t,e){t&1&&at(0)}function pO(t,e){if(t&1){let n=Ot();Ze(0),x(1,"div",5),H(2,"app-canvas-preview",6),x(3,"div",7)(4,"div",8),ie("click",function(){let o=Ne(n).ngIf,s=Z();return Fe(s.zoomOutClicked(o.id))}),ce(5,dO,1,0,"ng-container",9),A(),x(6,"input",10,11),ie("input",function(i){let s=Ne(n).ngIf,a=Z();return Fe(a.onSliderChange(i,s.id))}),Je(8,"inverseExp"),A(),x(9,"div",12),ie("click",function(){let o=Ne(n).ngIf,s=Z();return Fe(s.zoomInClicked(o.id))}),ce(10,fO,1,0,"ng-container",9),A()(),x(11,"div",13)(12,"div",14),J(13),Je(14,"percent"),A(),H(15,"div",15),x(16,"div",16),ie("click",function(){let o=Ne(n).ngIf,s=Z();return Fe(s.zoomerClicked(o,1))}),J(17," 1x "),A(),x(18,"div",16),ie("click",function(){let o=Ne(n).ngIf,s=Z();return Fe(s.zoomerClicked(o,2))}),J(19," 2x "),A(),x(20,"div",16),ie("click",function(){let o=Ne(n).ngIf,s=Z();return Fe(s.zoomerClicked(o,5))}),J(21," 5x "),A(),x(22,"div",17),ie("click",function(){let o=Ne(n).ngIf,s=Z();return Fe(s.maximizeClicked(o))}),ce(23,hO,1,0,"ng-container",9),A()()(),Qe()}if(t&2){let n=e.ngIf;Z();let r=Ye(5),i=Ye(3),o=Ye(7);z(5),G("ngTemplateOutlet",r),z(1),G("value",et(8,5,n.meta.zoom)),z(4),G("ngTemplateOutlet",i),z(3),co(et(14,7,n.meta.zoom)),z(10),G("ngTemplateOutlet",o)}}function gO(t,e){t&1&&(_t(),x(0,"svg",18)(1,"g",19),H(2,"path",20)(3,"path",21),A(),x(4,"defs")(5,"clipPath",22),H(6,"rect",23),A()()())}function mO(t,e){t&1&&(_t(),x(0,"svg",18)(1,"g",24),H(2,"path",25)(3,"path",26),A(),x(4,"defs")(5,"clipPath",27),H(6,"rect",23),A()()())}function vO(t,e){t&1&&(_t(),x(0,"svg",28)(1,"g",29),H(2,"path",30)(3,"path",31)(4,"path",32)(5,"path",33),A(),x(6,"defs")(7,"clipPath",34),H(8,"rect",35),A()()())}function yO(t,e){t&1&&(x(0,"div",36),_t(),x(1,"svg",37)(2,"g",38),H(3,"path",39)(4,"path",40)(5,"path",41),A(),x(6,"defs")(7,"clipPath",42),H(8,"rect",43),A()()()())}var CO=(()=>{let e=class e{transform(r){return 17.7946*Math.log(5.516024049864857*r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275pipe=di({name:"inverseExp",type:e,pure:!0,standalone:!0});let t=e;return t})(),W6=(()=>{let e=class e{constructor(r){this.store=r,this.destroy$=new Oe,this.updateSubject=new Oe,this.active$=this.store.active$}ngOnInit(){this.updateSubject.pipe(Fn(5),vt(this.destroy$)).subscribe(r=>{this.store.updateZoom(r[0],r[1])})}ngOnDestroy(){this.destroy$.next(1),this.destroy$.complete()}onSliderChange(r,i){let o=r.target,s=this.scaleValue(Number(o.value));this.updateSubject.next([i,s])}scaleValue(r){return .18129*Math.exp(.0561968*r)}zoomInClicked(r){let i=this.zoomSliderRef.nativeElement,o=Number(i.value),s=Math.round(o)+2,a=Math.min(s,Number(i.max)),c=this.scaleValue(a);this.updateSubject.next([r,c])}zoomOutClicked(r){let i=this.zoomSliderRef.nativeElement,o=Number(i.value),s=Math.round(o)-2,a=Math.max(s,Number(i.min)),c=this.scaleValue(a);this.updateSubject.next([r,c])}maximizeClicked(r){if(!r.file)return;let i=window.innerHeight,o=window.innerWidth,s=24,a=i-32-48-32-32-2*s,c=o-48-240-2*s,l=a/r.file.height,u=c/r.file.width,f=Math.min(l,u),d=this.zoomSliderRef.nativeElement,h=Math.max(Number(d.min),Math.min(Number(d.max),f));this.updateSubject.next([r.id,h])}zoomerClicked(r,i){this.updateSubject.next([r.id,i])}};e.\u0275fac=function(i){return new(i||e)(X(Te))},e.\u0275cmp=ae({type:e,selectors:[["app-canvas-navigation"]],viewQuery:function(i,o){if(i&1&&ur(uO,5),i&2){let s;Gn(s=zn())&&(o.zoomSliderRef=s.first)}},standalone:!0,features:[de],decls:10,vars:3,consts:[[4,"ngIf"],["zoomIn",""],["zoomOut",""],["maximize",""],["remove",""],[1,"container"],[1,"canvas"],[1,"slidercontainer"],[1,"zoomout",3,"click"],[4,"ngTemplateOutlet"],["type","range","min","0.1","max","100","step","0.1",1,"slider",3,"value","input"],["zoomSlider",""],[1,"zoomin",3,"click"],[1,"buttons"],[1,"percent","prevent-select"],[1,"spacer"],[1,"zoomer","prevent-select",3,"click"],[1,"maximize",3,"click"],["width","159","height","154","viewBox","0 0 159 154","fill","none","xmlns","http://www.w3.org/2000/svg"],["clip-path","url(#clip0_1_996)"],["d","M14.5582 89.0236C18.4678 93.6319 23.5943 97.0394 29.3479 98.8536C34.6975 100.546 40.2624 101.455 45.8707 101.552C54.1113 101.739 62.3894 100.355 71.1896 97.3279C77.215 95.2655 82.9729 92.487 88.341 89.0516C88.4686 89.3108 88.6247 89.5558 88.806 89.7806C98.6486 101.542 109.39 112.293 118.602 121.262C127.919 130.332 137.524 139.404 146.562 147.919C147.982 149.195 149.492 150.368 151.078 151.428C151.531 151.749 151.99 152.069 152.442 152.396C153.183 152.982 154.089 153.318 155.032 153.359C155.727 153.357 156.402 153.119 156.946 152.684C158.44 151.526 158.732 149.642 157.689 147.883L157.16 146.983C156.104 145 154.816 143.151 153.326 141.473C147.01 134.934 140.206 128.106 133.102 121.18C125.232 113.508 117.189 105.75 109.411 98.2487C105.177 94.166 100.946 90.0815 96.7189 85.9936C96.1601 85.453 95.6388 84.8598 95.135 84.286C95.0107 84.1437 94.887 84.0033 94.7646 83.8656L94.9654 83.6434C95.2555 83.3185 95.5482 82.9975 95.8551 82.6953C103.119 75.6263 107.098 66.7872 107.68 56.4243C108.691 38.4186 102.638 23.1455 89.6879 11.0282C83.3401 4.94621 75.1086 1.22828 66.3629 0.493103C57.8574 -0.323972 49.2758 0.660071 41.1734 3.38146C28.8546 7.59665 18.3748 15.6449 10.0267 27.3015C2.57994 37.6942 -0.355364 49.0752 1.29327 61.1269C2.63368 70.9822 6.97543 80.1072 14.5582 89.0236ZM53.5401 12.2042C54.8611 12.0795 56.1821 11.9565 57.5031 11.8352C77.2085 11.0633 88.9504 24.6094 93.3705 37.5369C96.3913 46.3741 97.0317 53.8414 95.3869 61.0456C94.3055 66.0536 91.8669 70.6638 88.3404 74.3696C84.2408 78.6452 79.3338 82.0585 73.9054 84.4095C61.8292 89.8287 50.0894 91.6046 38.0179 89.8365C30.2785 88.7039 24.3963 85.2938 20.0351 79.4119C15.5521 73.3689 12.7302 67.6261 11.4072 61.8637C9.48378 53.9318 10.2632 45.582 13.6212 38.1464C17.4812 29.5504 22.6026 23.2111 29.2781 18.7672C34.5795 15.2375 39.4529 13.4045 44.6151 13.0003C47.5938 12.7644 50.6165 12.4791 53.5401 12.2042Z","fill","white"],["d","M20.9156 50.6481C20.8308 51.3752 21.03 52.107 21.4713 52.6899C21.9126 53.2729 22.5617 53.6617 23.2824 53.7749C24.5124 54.0906 25.7777 54.246 27.0472 54.2375C31.9089 54.0497 36.8483 53.8061 41.6253 53.5709L46.3044 53.3421C47.1067 53.3031 47.909 53.2603 48.8156 53.2122L49.6353 53.1692L49.6671 53.4513C49.7195 53.9126 49.7584 54.2519 49.7882 54.5924C49.9129 56.0219 50.0362 57.4513 50.1579 58.8808C50.4661 62.4826 50.7854 66.2053 51.1454 69.8656C51.1767 71.095 51.5269 72.2945 52.1614 73.3465C52.9538 74.4213 54.0918 75.188 55.3829 75.5168C55.5463 75.5486 55.7124 75.5649 55.8789 75.5655C57.1921 75.5655 58.3292 74.535 58.7391 72.9014C59.0872 71.6688 59.2463 70.39 59.2105 69.1092C59.0409 66.5276 58.7806 63.9149 58.528 61.3885C58.4309 60.4142 58.3355 59.4395 58.2418 58.4645L57.6759 52.5454L57.9174 52.5181C58.3642 52.4661 58.7048 52.4272 59.0461 52.3934L63.8009 51.921C68.0969 51.4967 72.5383 51.058 76.9041 50.5824C78.1163 50.5183 79.2941 50.1579 80.336 49.5324C80.8023 49.1734 81.1791 48.7107 81.4362 48.1808C81.6939 47.6508 81.826 47.0681 81.8208 46.4784C81.6985 45.4244 80.6689 44.3756 79.7636 43.8473C78.8396 43.4262 77.8177 43.2671 76.8102 43.3873C73.7726 43.5036 70.1722 43.6602 66.5046 43.9357C64.1603 44.1118 61.8635 44.3465 59.4326 44.5954C58.5926 44.682 57.7449 44.7685 56.8898 44.8552L56.8581 44.3783C56.8121 43.6922 56.7739 43.119 56.7415 42.5452L56.476 37.8018C56.2985 34.6113 56.1168 31.4212 55.9307 28.2317C55.8219 26.4123 54.8714 25.2731 53.2532 25.0184C52.9219 24.9655 52.5834 24.9802 52.2579 25.0615C51.9323 25.1428 51.6265 25.289 51.3584 25.4914C50.9636 25.8099 50.6351 26.2033 50.392 26.6494C50.1488 27.0954 49.9958 27.5851 49.9416 28.0906C49.7696 29.4454 49.6962 30.8111 49.7221 32.1765C49.7059 35.5372 49.7085 38.8986 49.7111 42.3509V45.7571C48.7566 45.8604 47.8281 45.963 46.9176 46.0631C44.5508 46.323 42.3155 46.572 40.0757 46.7779C34.6176 47.2763 29.0584 47.7331 23.8645 48.1522C21.6156 48.3348 21.0179 49.6104 20.9156 50.6481Z","fill","white"],["id","clip0_1_996"],["width","158","height","154","fill","white","transform","translate(0.777344)"],["clip-path","url(#clip0_1_999)"],["d","M154.779 142.458C152.263 139.504 149.475 136.556 146.255 133.445C133.915 121.518 121.334 109.429 109.168 97.7371L99.3711 88.3217C98.269 87.2632 97.1519 86.2183 96.0641 85.2027L95.005 84.2098L95.0381 84.1449C95.0875 84.0383 95.1448 83.9363 95.2104 83.8388C95.5609 83.4405 95.9361 83.0474 96.3249 82.6698C103.581 75.5995 107.548 66.75 108.116 56.3616C109.099 38.3741 102.984 23.1158 89.9373 11.0102C83.6322 5.0228 75.4832 1.34732 66.8192 0.583593C58.1676 -0.273856 49.4326 0.718459 41.1944 3.49464C28.7944 7.74168 18.6427 15.4963 10.1595 27.2035C2.62359 37.6047 -0.365394 49.0865 1.27637 61.3305C2.42399 69.8859 5.99426 77.9192 12.5132 86.6121C17.0159 92.6168 22.6506 96.741 29.2593 98.8717C34.5152 100.57 39.9918 101.49 45.5145 101.601C59.5589 101.895 73.3355 98.1342 86.5003 90.4602C87.0718 90.1268 87.6472 89.798 88.2155 89.4731L88.5192 89.299C89.5992 90.503 90.6655 91.698 91.7175 92.8832C94.2813 95.7631 96.7027 98.4818 99.2372 101.2C112.215 115.117 126.29 128.354 139.902 141.155C142.434 143.538 144.964 145.921 147.492 148.303C149.068 149.708 150.759 150.976 152.549 152.095L153.475 152.714C154.148 153.178 154.94 153.439 155.758 153.464C156.139 153.474 156.516 153.395 156.861 153.233C157.206 153.071 157.508 152.83 157.743 152.531C158.493 151.578 158.978 149.711 158.483 148.553C157.554 146.35 156.306 144.296 154.779 142.458ZM53.3468 12.2655C54.7772 12.1091 56.2062 11.9506 57.6336 11.7899C77.4403 11.1141 89.2604 24.6466 93.713 37.5332C96.8015 46.4743 97.4348 54.045 95.7072 61.3597C94.6038 66.2497 92.1961 70.7501 88.7402 74.3824C83.8559 79.5586 77.7043 83.395 69.381 86.4536C59.5604 90.1697 48.9675 91.3796 38.5611 89.9741C30.3425 88.8805 24.1265 85.2144 19.5543 78.7633C15.298 72.7586 12.7219 67.4362 11.4456 62.0121C9.67624 54.7328 10.1841 47.0861 12.9007 40.1044C17.4002 28.4225 25.239 19.987 36.2002 15.0336C38.156 14.1499 40.4604 13.8348 42.6886 13.5294L42.7874 13.5164C46.2953 13.0362 49.8805 12.6443 53.3481 12.2655H53.3468Z","fill","white"],["d","M24.1702 48.4609C22.3242 48.663 21.2196 49.8962 21.3555 51.6045C21.4491 52.7741 22.0882 54.1725 24.5999 54.1738C28.7892 54.1738 32.9791 54.177 37.1489 54.177H47.8085C50.3551 54.0904 52.8909 54.0081 55.4158 53.9302C62.0479 53.719 68.9108 53.5007 75.6267 53.1862C77.5897 53.0291 79.5332 52.6845 81.4305 52.1569C81.816 52.0633 82.201 51.9692 82.5852 51.8788C82.9936 51.7938 83.3804 51.6264 83.7224 51.3867C84.0638 51.147 84.3525 50.8402 84.571 50.485C84.7368 50.1976 84.8395 49.8784 84.8733 49.5484C84.9071 49.2183 84.8707 48.8849 84.766 48.57C84.5502 48.0316 84.2172 47.5479 83.7907 47.1545C83.3642 46.7611 82.8551 46.4677 82.3004 46.2958C80.8297 45.9733 79.3186 45.871 77.8173 45.9923C75.4765 46.0989 73.1 46.2411 70.8022 46.3789C67.9771 46.5478 65.0565 46.722 62.1845 46.8337C57.0173 47.0326 51.7604 47.1983 46.6771 47.3588C42.1816 47.5011 37.6861 47.6421 33.1912 47.8078C30.1281 47.9202 27.0935 48.1399 24.1702 48.4609Z","fill","white"],["id","clip0_1_999"],["width","158","height","156","viewBox","0 0 158 156","fill","none","xmlns","http://www.w3.org/2000/svg"],["clip-path","url(#clip0_1_712)"],["d","M106.987 153.403C109.085 153.821 111.21 154.083 113.345 154.189C114.534 154.25 115.722 154.313 116.909 154.378C122.286 154.669 127.845 154.969 133.323 155C133.609 155 133.894 155 134.179 155C139.276 155 144.581 154.744 149.962 154.239C154.983 153.766 156.328 152.343 156.499 147.315C156.866 136.59 157.133 125.683 157.391 115.137L157.534 109.327C157.551 108.273 157.439 107.221 157.202 106.194C156.648 103.717 155.011 102.165 152.823 102.048C151.715 101.988 150.622 102.321 149.733 102.985C148.844 103.65 148.215 104.606 147.957 105.687C147.477 107.454 147.225 109.275 147.208 111.106C147.143 116.409 147.146 121.798 147.148 127.011C147.148 128.825 147.148 130.639 147.148 132.453C147.148 135.106 147.148 137.76 147.148 140.495V143.828L146.823 143.908C146.568 143.986 146.305 144.038 146.039 144.065C144.674 144.125 143.309 144.192 141.944 144.26C138.283 144.438 134.498 144.623 130.779 144.678C126.691 144.743 122.535 144.723 118.513 144.703C116.058 144.691 113.601 144.68 111.148 144.686C109.772 144.645 108.396 144.745 107.041 144.983C104.694 145.477 103.195 147.091 103.127 149.194C103.093 150.471 103.54 152.703 106.987 153.403Z","fill","white"],["d","M43.5595 144.771C36.5529 144.669 29.4294 144.641 22.5396 144.615C20.3338 144.607 18.1281 144.598 15.9223 144.588C14.8071 144.583 13.6918 144.584 12.4909 144.588H11.3154C11.2927 144.364 11.2707 144.158 11.2506 143.965C11.1857 143.341 11.1325 142.847 11.1163 142.374C10.9567 137.768 10.7996 133.163 10.6452 128.558C10.4333 122.28 10.2184 116.002 10.0004 109.723C9.98393 108.249 9.8595 106.778 9.62808 105.321C9.52765 104.556 9.16396 103.851 8.5998 103.327C8.03564 102.802 7.3063 102.491 6.53789 102.449C4.807 102.311 3.48875 103.216 2.83999 104.996C2.6042 105.68 2.45933 106.391 2.40918 107.113L2.33014 108.005C2.17963 109.682 2.02458 111.418 1.97852 113.14C1.63208 125.986 1.34195 137.653 1.09218 148.808C1.00784 152.552 3.21372 154.951 7.14326 155.388C8.42418 155.507 9.7106 155.556 10.9968 155.534C11.3978 155.534 11.7981 155.534 12.1984 155.54L17.9678 155.61C26.6573 155.715 35.642 155.825 44.4807 155.87H44.5222C45.9211 155.834 47.2999 155.528 48.5828 154.967C49.5334 154.64 50.3588 154.024 50.9446 153.206C51.5303 152.387 51.8475 151.407 51.8521 150.4C51.8567 149.393 51.5486 148.409 50.9704 147.585C50.3922 146.762 49.5724 146.138 48.6249 145.802C47.0104 145.162 45.2955 144.813 43.5595 144.771Z","fill","white"],["d","M5.74181 55.6845H5.84619C8.02732 55.6845 9.76346 54.0335 10.3921 51.3509C10.541 50.652 10.617 49.9395 10.619 49.2248C10.6301 48.6398 10.645 48.0547 10.6593 47.4697C10.7053 45.6308 10.7528 43.7298 10.6834 41.8533C10.487 36.5753 10.2725 31.298 10.0398 26.0213C9.87765 22.1871 9.71863 18.352 9.56293 14.5162C9.51687 13.3416 9.52855 12.1541 9.54152 10.897C9.54542 10.496 9.54924 10.0876 9.55184 9.66969C10.1052 9.66644 10.6424 9.65877 11.1673 9.65162C12.6594 9.62952 14.0743 9.61041 15.4594 9.68841C25.2453 10.2403 33.4776 10.4035 41.8498 9.38818C43.3624 9.2249 44.8293 8.77042 46.1699 8.04976C46.7312 7.74303 47.2013 7.29277 47.5323 6.74469C47.8634 6.19665 48.0437 5.57045 48.0546 4.92992C48.0574 4.27537 47.8872 3.63188 47.5612 3.06466C47.2351 2.49744 46.7649 2.02687 46.1984 1.70086C45.0505 1.06602 43.7791 0.687687 42.4714 0.591928C41.0896 0.49185 39.7032 0.472504 38.3192 0.534482C37.904 0.544882 37.4888 0.555926 37.0743 0.561776C31.1645 0.648443 25.2546 0.736775 19.3449 0.826475L5.78584 1.02992C3.56383 1.06307 2.28257 2.10365 1.87126 4.21485C1.54904 5.78135 1.37207 7.37454 1.34256 8.97367C1.23746 19.6792 1.15562 31.446 1.08296 46.004C1.04293 47.7067 1.13316 49.4098 1.35285 51.0986C1.77844 53.9138 3.41795 55.6286 5.74181 55.6845Z","fill","white"],["d","M146.662 16.5955C146.485 18.7619 146.302 21.0033 146.172 23.2139L145.995 26.1456C145.694 31.0778 145.383 36.1777 145.315 41.2048C145.322 43.4102 145.851 45.5826 146.858 47.5435C147.158 48.2106 147.636 48.7823 148.239 49.1961C148.841 49.61 149.545 49.8501 150.275 49.8906H150.328C151.065 49.859 151.779 49.6287 152.395 49.2241C153.012 48.8194 153.509 48.2553 153.832 47.5915C154.875 45.669 155.509 43.5501 155.692 41.3691C156.645 29.803 156.043 18.069 155.461 6.72394L155.391 5.34271C155.261 2.85256 153.95 1.24802 151.591 0.698766C149.82 0.242304 147.998 0.0214045 146.171 0.0421018C136.86 0.341752 127.037 0.730363 115.258 1.26466C113.865 1.36094 112.496 1.66948 111.196 2.17936C110.475 2.4362 109.865 2.93494 109.468 3.59108C109.072 4.24721 108.914 5.02043 109.022 5.77975C109.02 6.55995 109.324 7.30966 109.867 7.86846C110.411 8.42727 111.151 8.75077 111.93 8.76982C112.325 8.81207 112.72 8.8601 113.115 8.9082C114.146 9.033 115.212 9.16229 116.279 9.19349C118.723 9.26499 121.206 9.30405 123.61 9.34175C125.271 9.36775 126.93 9.39356 128.59 9.43061C132.912 9.52551 137.233 9.63211 141.715 9.74196L147.014 9.87209C147.014 10.0827 147.019 10.2803 147.022 10.4688C147.033 11.1636 147.041 11.7121 147.003 12.2484C146.896 13.6953 146.779 15.1453 146.662 16.5955Z","fill","white"],["id","clip0_1_712"],["width","157","height","156","fill","white","transform","translate(0.777344)"],[1,"remover"],["width","120","height","141","viewBox","0 0 120 141","fill","none","xmlns","http://www.w3.org/2000/svg"],["clip-path","url(#clip0_1_576)"],["d","M11.5447 32.2823C9.35739 31.9305 7.54846 31.7222 5.77836 31.3361C2.60934 30.6453 0.988722 29.1086 0.949918 26.938C0.90982 24.6587 2.59503 22.7092 5.87594 22.292C10.5616 21.6963 15.3056 21.5295 20.03 21.2921C22.5846 21.1628 25.1507 21.2695 28.1082 21.2695C27.6794 19.2916 27.3724 17.7509 27.009 16.2245C26.2431 13.1665 26.6502 9.93253 28.1499 7.15974C30.1548 3.31135 33.21 0.966791 37.5696 0.821263C45.5318 0.555646 53.4971 0.406041 61.4658 0.372408C66.7409 0.347184 72.0177 0.592906 77.2931 0.718385C78.0466 0.736495 78.8026 0.733267 79.5535 0.788891C84.9344 1.18602 88.3776 3.94844 89.6148 9.22106C90.1749 11.6084 90.2467 14.1134 90.4976 16.5699C90.627 17.8376 90.6645 19.1143 90.7563 20.58C91.6242 20.7109 92.4993 20.7908 93.3769 20.8193C99.1891 20.655 104.999 20.4131 110.812 20.2863C112.31 20.2218 113.809 20.3725 115.263 20.734C116.431 21.0072 117.48 21.649 118.255 22.5645C119.03 23.48 119.49 24.6206 119.567 25.8177C119.768 27.0519 119.583 28.318 119.038 29.4433C118.493 30.5687 117.614 31.4986 116.521 32.1065C115.619 32.6562 114.629 33.0624 113.507 33.6199C113.507 36.7542 113.401 39.8628 113.525 42.9615C114.263 61.3478 115.277 79.7315 114.594 98.1391C114.347 104.796 113.896 111.473 112.986 118.065C112.481 121.727 111.006 125.296 109.663 128.789C109.028 130.464 108.025 131.975 106.728 133.211C105.431 134.447 103.872 135.375 102.169 135.928C99.021 137.007 95.7892 137.824 92.507 138.369C89.5152 138.752 86.5046 138.965 83.4895 139.006C71.7674 139.589 60.049 140.279 48.3204 140.659C43.3759 140.869 38.4226 140.655 33.5146 140.02C20.8883 138.243 14.0256 131.285 12.0272 118.648C11.4351 115.148 11.1059 111.607 11.0423 108.058C10.9086 87.7206 10.8602 67.383 10.8973 47.0453C10.9038 42.2177 11.3093 37.3887 11.5447 32.2823ZM21.213 33.0682C21.795 43.107 22.2262 92.2559 23.389 107.055C23.7318 111.419 24.7369 115.741 25.5971 120.052C26.4547 124.348 29.3579 126.846 33.5196 127.519C38.1762 128.271 42.9124 128.996 47.6077 128.961C59.3402 128.874 71.0741 128.47 82.7969 127.939C87.2853 127.736 91.751 126.893 96.2122 126.238C97.0251 126.136 97.7857 125.78 98.3839 125.22C98.9828 124.66 99.389 123.925 99.5455 123.121C100.163 120.625 100.962 118.14 101.257 115.602C102.951 101.021 102.602 86.3863 102.154 71.7566C101.802 60.2522 101.392 48.7496 101.003 37.2464C100.968 36.2116 100.897 35.1728 100.849 34.268C73.4017 33.8676 48.8907 33.4724 21.2148 33.0682H21.213ZM38.4807 21.0379C52.0098 21.5275 65.2706 21.5062 78.617 20.8833V11.9383C65.1232 11.4855 51.8792 10.9991 38.4807 12.3115V21.0379Z","fill","white"],["d","M82.2127 77.7577C82.0717 70.8105 81.7412 63.7697 81.4211 56.9597L81.4146 56.8303C81.2995 54.3613 81.1869 51.8924 81.0757 49.4233C81.0265 48.5606 80.8642 47.7079 80.5939 46.8872C80.0008 45.0115 78.6627 44.0226 76.9308 44.1862C75.8817 44.2729 74.0748 44.8129 73.7533 47.4479C73.7016 47.922 73.6757 48.3986 73.6757 48.8754C73.5722 57.4389 72.7903 85.75 72.7826 86.0385C72.6364 92.8447 72.4851 99.8798 72.3816 106.859C72.3279 108.781 72.5012 110.703 72.899 112.583C73.0911 113.579 73.6285 114.476 74.4162 115.115C75.2046 115.754 76.1928 116.094 77.2069 116.076C77.3259 116.076 77.4462 116.072 77.5671 116.063C78.5689 116.035 79.5281 115.652 80.2737 114.982C81.0188 114.312 81.5019 113.4 81.6364 112.406C81.9915 110.339 82.1862 108.247 82.2185 106.15L82.2534 101.336C82.3103 93.6124 82.3724 85.6265 82.2127 77.7577Z","fill","white"],["d","M47.6009 44.6397H47.5977C46.9524 44.6372 46.3162 44.7915 45.7437 45.0896C45.1713 45.3876 44.6798 45.8204 44.3116 46.3504C43.6881 47.4661 43.3363 48.7129 43.2847 49.9899C43.1747 51.7201 43.0594 53.4495 42.9417 55.2211C42.5375 61.3145 42.1185 67.6158 41.9388 73.8347C41.6801 82.6789 41.5928 91.666 41.5055 100.358C41.4792 103.018 41.451 105.678 41.4209 108.338C41.4194 109.427 41.5716 110.511 41.8734 111.557C42.579 114.058 44.2768 115.611 46.3037 115.611H46.3684C48.4916 115.575 50.1884 113.898 50.6897 111.339C50.9368 109.985 51.0413 108.609 51.0011 107.234C50.8885 100.171 50.7505 93.1097 50.6199 86.4012L50.5015 80.3356L50.6369 73.1316C50.7844 65.3281 50.9233 57.9518 51.0351 50.539C51.1015 49.296 50.9174 48.0524 50.4939 46.882C50.2341 46.2985 49.834 45.7884 49.3292 45.3972C48.8245 45.0059 48.2307 44.7458 47.6009 44.6397Z","fill","white"],["id","clip0_1_576"],["width","119","height","141","fill","white","transform","translate(0.777344)"]],template:function(i,o){i&1&&(ce(0,pO,24,9,"ng-container",0),Je(1,"async"),ce(2,gO,7,0,"ng-template",null,1,ot)(4,mO,7,0,"ng-template",null,2,ot)(6,vO,9,0,"ng-template",null,3,ot)(8,yO,9,0,"ng-template",null,4,ot)),i&2&&G("ngIf",et(1,1,o.active$))},dependencies:[oe,bt,qn,Tt,bv,CO,q6],styles:['.container[_ngcontent-%COMP%]{width:100%;display:grid;height:100%;grid-template-areas:"canvas" "slider" "buttons";grid-template-rows:auto 32px 33px}.canvas[_ngcontent-%COMP%]{grid-area:canvas;height:135px}.slidercontainer[_ngcontent-%COMP%]{grid-area:slider;display:flex;padding:6px 16px;background-color:var(--background-subheader)}.slidercontainer[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{line-height:20px;text-align:center}.percent[_ngcontent-%COMP%]{width:50px;line-height:20px;margin-top:auto;margin-bottom:auto}.zoomin[_ngcontent-%COMP%]{width:20px}.zoomin[_ngcontent-%COMP%] > svg[_ngcontent-%COMP%]{margin:0}.zoomout[_ngcontent-%COMP%]{width:20px}.zoomout[_ngcontent-%COMP%] > svg[_ngcontent-%COMP%]{margin:0}.slider[_ngcontent-%COMP%]{margin:auto 8px;width:110px;width:100%;cursor:pointer;-webkit-appearance:none;appearance:none;height:5px;background:#3c3e42}input[type=range][_ngcontent-%COMP%]:focus{outline:none}input[type=range][_ngcontent-%COMP%]::-webkit-slider-runnable-track{background:#3c3e42;height:5px}input[type=range][_ngcontent-%COMP%]::-moz-range-track{background:#3c3e42;height:5px}input[type=range][_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;margin-top:-6px;background-color:var(--accent);height:16px;width:16px;border-radius:50px}input[type=range][_ngcontent-%COMP%]::-moz-range-thumb{border:none;background-color:var(--accent);height:16px;width:16px;border-radius:50px}.buttons[_ngcontent-%COMP%]{grid-area:buttons;height:32px;background-color:var(--background-subheader);display:grid;grid-template-columns:50px auto repeat(4,32px);gap:4px;padding-right:16px;padding-left:16px;border-bottom:1px solid rgba(0,0,0,.5)}.zoomer[_ngcontent-%COMP%]{text-align:center;margin-top:auto;margin-bottom:auto;opacity:.5;cursor:pointer}.spacer[_ngcontent-%COMP%]{width:100%}svg[_ngcontent-%COMP%]{margin-top:6px;margin-left:6px;height:20px;width:20px;opacity:.5;cursor:pointer}']});let t=e;return t})();var _O=["canvas"];function bO(t,e){t&1&&at(0)}function wO(t,e){if(t&1&&(Ze(0),ce(1,bO,1,0,"ng-container",12),Qe()),t&2){Z();let n=Ye(14);z(1),G("ngTemplateOutlet",n)}}function SO(t,e){t&1&&(_t(),x(0,"svg",13),H(1,"path",14)(2,"path",15),A())}function DO(t,e){t&1&&(_t(),x(0,"svg",16)(1,"g",17),H(2,"path",18)(3,"path",19)(4,"path",20),A(),x(5,"defs")(6,"clipPath",21),H(7,"rect",22),A()()())}var EO=(()=>{let e=class e{transform(r,...i){return r.type==="absolute"&&r.absolute?`w: ${r.absolute.width}, h: ${r.absolute.height}`:""}};e.\u0275fac=function(i){return new(i||e)},e.\u0275pipe=di({name:"cutSize",type:e,pure:!0,standalone:!0});let t=e;return t})(),Y6=(()=>{let e=class e{constructor(r){this.store=r}ngOnChanges(r){this.drawCut()}ngAfterViewInit(){this.drawCut()}drawCut(){if(!this.canvasRef)return;let i=this.canvasRef.nativeElement.getContext("2d");if(!i)return;i.clearRect(0,0,i.canvas.width,i.canvas.height),i.imageSmoothingEnabled=!1;let o=this.activeCanvas.canvas;if(this.cut.type==="absolute"){let s=this.cut.absolute,a=s.x,c=s.y,l=s.width,u=s.height;if(l===u)i.drawImage(o,a,c,l,u,0,0,40,40);else if(l>u){let h=u/l*40,g=(40-h)/2;i.drawImage(o,a,c,l,u,0,g,40,h)}else{let f=l/u*40,d=(40-f)/2,h=40,g=0;i.drawImage(o,a,c,l,u,d,g,f,h)}}else this.cut.type}cutClicked(){this.cut.selected?this.store.selectCut(this.activeCanvas.id,void 0):this.store.selectCut(this.activeCanvas.id,this.cut)}eyeClicked(){let r=T({},this.cut);r.visible=!this.cut.visible,this.store.updateCut(this.activeCanvas.id,r)}};e.\u0275fac=function(i){return new(i||e)(X(Te))},e.\u0275cmp=ae({type:e,selectors:[["app-layers-cut"]],viewQuery:function(i,o){if(i&1&&ur(_O,5),i&2){let s;Gn(s=zn())&&(o.canvasRef=s.first)}},inputs:{cut:"cut",activeCanvas:"activeCanvas"},standalone:!0,features:[Sn,de],decls:17,vars:10,consts:[[1,"container",3,"click"],[1,"canvas"],["konva",""],["width","40","height","40"],["canvas",""],[1,"main"],[1,"title"],[1,"size"],[1,"eye",3,"tooltip","position","click"],[4,"ngIf","ngIfElse"],["eye",""],["eyeclosed",""],[4,"ngTemplateOutlet"],["width","24","height","15","viewBox","0 0 24 15","fill","none","xmlns","http://www.w3.org/2000/svg",1,"eye-normal"],["d","M12.4595 0.0192124C14.63 0.0802182 16.7069 0.559648 18.6372 1.56577C20.0555 2.29945 21.3561 3.24309 22.4956 4.36518C22.8344 4.71936 23.1541 5.09165 23.4531 5.48044C23.8222 5.93446 23.8842 6.49565 23.9092 7.04691C23.9055 7.29295 23.8339 7.53313 23.7024 7.74063C22.4448 9.84507 20.7984 11.5273 18.5446 12.5677C15.3568 14.0392 12.0887 14.3783 8.71694 13.3252C6.24358 12.5523 3.93249 11.4497 1.89889 9.8067C1.321 9.33973 0.798444 8.82492 0.433833 8.17135C0.292525 7.89987 0.168601 7.6196 0.0628248 7.33224C-0.0617866 7.0212 0.0147302 6.71933 0.178119 6.45149C0.31175 6.24537 0.465515 6.05317 0.637145 5.87777C1.84651 4.56934 3.19483 3.39809 4.65801 2.38496C6.02436 1.44152 7.56359 0.780481 9.18626 0.440257C10.2593 0.210774 11.343 -0.0286229 12.4595 0.0192124ZM1.4656 7.16838C1.83073 7.79835 2.38451 8.18441 2.93945 8.56646C4.8758 9.89963 6.99799 10.8208 9.25913 11.43C11.6382 12.071 13.9753 11.8831 16.2914 11.0943C18.627 10.2985 20.4504 8.80438 22.0162 6.94407C22.0613 6.90189 22.0932 6.84746 22.108 6.78739C22.1139 6.67149 22.1365 6.51619 22.0747 6.44455C21.3538 5.60901 20.6171 4.78612 19.6957 4.16278C15.4583 1.29783 11.0243 1.12555 6.47636 3.28951C4.70088 4.13422 3.15902 5.36519 1.71829 6.70816C1.59368 6.82343 1.54431 7.01897 1.46508 7.16838H1.4656Z","fill","white"],["d","M15.3756 6.68239C15.3849 7.27764 15.1745 7.85525 14.7852 8.30383C13.986 9.22945 13.0007 9.76837 11.7402 9.6884C11.3276 9.6691 10.9247 9.55614 10.5618 9.35795C10.1989 9.15976 9.88526 8.88152 9.64453 8.54409C9.40382 8.20665 9.24222 7.8188 9.1719 7.40962C9.10157 7.00044 9.12434 6.58054 9.23847 6.18147C9.373 5.71024 9.58398 5.26456 9.86289 4.86241C11.1087 3.10736 13.4096 3.38468 14.546 4.44433C15.1695 5.02583 15.3884 5.77236 15.3756 6.68239ZM12.1772 5.63991C11.6187 5.60998 11.1103 5.89341 10.9889 6.25028C10.8449 6.67395 10.8545 7.09529 11.1609 7.45901C11.2387 7.55171 11.3338 7.62831 11.4407 7.6845C11.6563 7.80217 11.9006 7.8559 12.1453 7.83949C12.3901 7.82307 12.6251 7.73718 12.8232 7.59177C13.5485 7.1034 13.4967 6.20929 12.7212 5.8322C12.5448 5.75469 12.363 5.69043 12.1772 5.63991Z","fill","white"],["width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg",1,"eye-closed"],["clip-path","url(#clip0_40_26)"],["d","M6.16435 5.58635C6.16435 5.25874 5.92896 5.04813 5.76075 4.80592C5.27342 4.10452 4.7666 3.41594 4.29498 2.70422C3.91035 2.15093 3.63995 1.52717 3.49944 0.869124C3.47756 0.749184 3.48467 0.625797 3.52026 0.509155C3.55586 0.392512 3.61893 0.285985 3.70413 0.198392C3.78646 0.1096 3.89374 0.0475394 4.01204 0.0203287C4.13035 -0.00688204 4.25414 0.00200585 4.3673 0.0458353C4.7186 0.20015 4.96246 0.472402 5.19733 0.751315C6.1414 1.87239 7.08073 2.99748 8.01531 4.12661C8.91326 5.20671 9.82419 6.27661 10.6996 7.37433C11.651 8.56724 12.5675 9.78756 13.5003 10.9951C13.7617 11.3334 14.0119 11.6816 14.2932 12.0027C15.5423 13.4287 16.6627 14.9535 17.805 16.4629C18.2466 17.0462 18.7433 17.5879 19.1914 18.1666C20.2373 19.5176 21.2741 20.8756 22.302 22.2405C22.543 22.5611 22.4463 23.0322 22.1519 23.2118C22.0159 23.2827 21.8615 23.3104 21.7092 23.2913C21.557 23.2721 21.4144 23.2067 21.3007 23.1043C21.1283 22.9325 20.9628 22.7531 20.8019 22.5706C19.429 21.0126 18.0564 19.4544 16.6842 17.8959C16.6066 17.8009 16.5051 17.7281 16.3899 17.6851C16.2747 17.6419 16.1501 17.63 16.0287 17.6505C15.6066 17.7205 15.1875 17.8084 14.7665 17.886C12.4758 18.3086 10.254 17.9946 8.07881 17.2452C6.16007 16.584 4.33595 15.7268 2.68634 14.5368C2.18646 14.1854 1.71473 13.7958 1.27538 13.3719C0.934333 13.0234 0.637852 12.6344 0.392639 12.2137C-0.14668 11.3159 -0.0829795 10.898 0.657667 10.0965C2.03039 8.616 3.59367 7.32234 5.30689 6.24908C5.61176 6.05682 5.9887 5.95086 6.16435 5.58635ZM9.52374 9.39207C9.03379 8.61539 8.40706 7.95572 7.74429 7.332C7.63372 7.22773 7.39946 7.21199 7.2279 7.22564C7.04663 7.25167 6.87221 7.31258 6.71437 7.40497C4.91699 8.33753 3.30146 9.52783 1.79008 10.8638C1.73106 10.9115 1.68235 10.9705 1.64685 11.0374C1.61136 11.1043 1.58981 11.1776 1.58355 11.253C1.57728 11.3283 1.5864 11.4043 1.61037 11.476C1.63434 11.5477 1.67264 11.6139 1.723 11.6707C2.12844 12.126 2.59636 12.5223 3.11292 12.8479C4.90444 14.0395 6.85617 14.8915 8.91503 15.498C10.5761 15.9869 12.2765 16.0743 13.9929 15.8546C14.1222 15.8428 14.2461 15.7973 14.3521 15.7226C14.458 15.6478 14.5422 15.5466 14.5961 15.429C14.4274 15.2062 14.2434 14.9671 14.0637 14.7249C13.6068 14.1092 13.0949 13.6197 12.2269 13.8655C12.1058 13.882 11.9832 13.8828 11.8621 13.8675C10.5631 13.8686 8.99042 12.7977 9.21533 10.8256C9.2693 10.3508 9.41454 9.88672 9.52374 9.39167V9.39207Z","fill","white"],["d","M19.3487 16.197C18.9056 15.9579 18.6174 15.5789 18.3577 15.1445C18.2764 15.0113 18.245 14.8537 18.2691 14.6997C18.2933 14.5457 18.3715 14.4051 18.4898 14.303C18.5418 14.2581 18.5973 14.2173 18.6558 14.1812C19.3337 13.7657 19.9611 13.2735 20.5252 12.7144C22.7238 10.5486 22.6044 11.0792 20.5252 9.04304C19.2362 7.78141 17.6057 7.05614 15.8813 6.56317C14.8205 6.25997 13.7362 6.07196 12.6231 6.11482C12.3176 6.1267 12.0113 6.11981 11.7056 6.12721C11.2432 6.13858 10.8798 5.93142 10.58 5.60736C10.4162 5.43011 10.2845 5.22335 10.1376 5.03045C10.0467 4.91086 10.1577 4.63935 10.3079 4.58972C11.5006 4.1957 12.7232 4.23823 13.9415 4.38576C17.2847 4.79074 20.0949 6.30427 22.5232 8.56831C22.9205 8.93867 23.2471 9.3894 23.5763 9.82544C23.8264 10.1768 23.9585 10.5979 23.9536 11.0285C23.9585 11.265 23.9512 11.5424 23.8363 11.7343C22.7625 13.5305 21.5232 15.1765 19.5679 16.1279C19.4964 16.1557 19.4232 16.1787 19.3487 16.197Z","fill","white"],["d","M15.4976 10.6657C15.4679 10.9017 15.292 11.4323 15.2042 11.3237C14.5176 10.4791 13.4808 9.24302 12.8225 8.37615C12.7955 8.33057 12.7803 8.27899 12.7783 8.22609C12.7763 8.1732 12.7875 8.12065 12.811 8.07315C12.8526 8.03201 12.9028 8.0004 12.9579 7.98049C13.0131 7.9606 13.072 7.95289 13.1303 7.95794C13.6733 8.04394 14.1783 8.28842 14.5813 8.66039C15.2023 9.22593 15.5848 9.97362 15.4976 10.6657Z","fill","white"],["id","clip0_40_26"],["width","24","height","23.3557","fill","white"]],template:function(i,o){if(i&1&&(x(0,"div",0),ie("click",function(){return o.cutClicked()}),x(1,"div",1,2),H(3,"canvas",3,4),A(),x(5,"div",5)(6,"div",6),J(7),A(),x(8,"div",7),J(9),Je(10,"cutSize"),A()(),x(11,"div",8),ie("click",function(){return o.eyeClicked()}),ce(12,wO,2,1,"ng-container",9),A()(),ce(13,SO,3,0,"ng-template",null,10,ot)(15,DO,8,0,"ng-template",null,11,ot)),i&2){let s=Ye(16);Hn("selected",o.cut.selected),z(7),co(o.cut.name),z(2),co(et(10,8,o.cut)),z(2),G("tooltip","Toggle Visibility")("position","top"),z(1),G("ngIf",o.cut.visible)("ngIfElse",s)}},dependencies:[oe,bt,qn,EO,Kn,Eo],styles:['.container[_ngcontent-%COMP%]{width:240px;height:48px;display:grid;grid-template-areas:"canvas title eye" "canvas size eye";grid-template-columns:48px auto 64px;cursor:pointer;border-bottom:1px solid rgba(0,0,0,.5)}.selected[_ngcontent-%COMP%]{background-color:var(--accent)}.main[_ngcontent-%COMP%]{padding-left:8px;padding-right:8px}.title[_ngcontent-%COMP%]{grid-area:title;font-size:14px;font-weight:500;line-height:17px;padding-top:5.5px;padding-bottom:5px}.size[_ngcontent-%COMP%]{grid-area:size;font-size:12px;line-height:15px;font-style:italic;padding-bottom:5.5px;color:#ffffff80}.eye[_ngcontent-%COMP%]{grid-area:eye;height:48px;margin-right:16px}.eye-normal[_ngcontent-%COMP%]{line-height:48px;width:24px;height:14px;margin:17px 12px}.eye-closed[_ngcontent-%COMP%]{line-height:48px;width:24px;height:24.36px;margin:11.82px 12px}.canvas[_ngcontent-%COMP%]{grid-area:canvas;padding:4px}']});let t=e;return t})();function xO(t,e){if(t&1&&(Ze(0),H(1,"app-layers-cut",10),Qe()),t&2){let n=e.$implicit,r=Z().ngIf;z(1),G("cut",n)("activeCanvas",r)}}function IO(t,e){if(t&1&&(Ze(0),ce(1,xO,2,2,"ng-container",9),Qe()),t&2){let n=Z();z(1),G("ngForOf",n.active.cuts)}}function MO(t,e){t&1&&at(0)}function TO(t,e){t&1&&at(0)}function AO(t,e){t&1&&at(0)}function OO(t,e){t&1&&J(0,` NO CANVAS ENTITY
`)}function RO(t,e){if(t&1){let n=Ot();x(0,"div",11),ie("click",function(){Ne(n);let i=Z();return Fe(i.adderClicked())}),_t(),x(1,"svg",12)(2,"g",13),H(3,"path",14)(4,"path",15),A(),x(5,"defs")(6,"clipPath",16),H(7,"rect",17),A()()()()}t&2&&G("tooltip","Add Cut")("position","top")}function PO(t,e){if(t&1){let n=Ot();x(0,"div",18),ie("click",function(){Ne(n);let i=Z();return Fe(i.removerClicked())}),_t(),x(1,"svg",19)(2,"g",20),H(3,"path",21)(4,"path",22)(5,"path",23),A(),x(6,"defs")(7,"clipPath",24),H(8,"rect",25),A()()()()}t&2&&G("tooltip","Remove Cut")("position","top")}function NO(t,e){if(t&1){let n=Ot();x(0,"div",26),ie("click",function(){Ne(n);let i=Z();return Fe(i.duplicateClicked())}),_t(),x(1,"svg",27)(2,"g",28),H(3,"path",29),A(),x(4,"defs")(5,"clipPath",30),H(6,"rect",31),A()()()()}t&2&&G("tooltip","Duplicate Cut")("position","top")}var K6=(()=>{let e=class e{constructor(r){this.store=r,this.activeCanvas$=r.activeCanvas$;let i=r.active$.pipe(ee(s=>s?.file?.dataURL||""),Gt()),o=it(new Promise(s=>{s("test")}));this.image$=i.pipe(It(s=>new Promise((c,l)=>{let u=new Image;u.addEventListener("load",()=>{c(u)}),u.src=s})))}adderClicked(){console.log("Adder",this.active),this.store.addNewCut(this.active.id)}removerClicked(){console.log("Remover",this.active);let r=this.active.cuts?.find(i=>i.selected);this.active.cuts&&r&&this.store.removeCut(this.active.id,r.id)}duplicateClicked(){console.log("Duplicate");let r=this.active.cuts?.find(i=>i.selected);this.active.cuts&&r&&this.store.duplicateCut(this.active.id,r.id)}};e.\u0275fac=function(i){return new(i||e)(X(Te))},e.\u0275cmp=ae({type:e,selectors:[["app-layers-cuts"]],inputs:{active:"active"},standalone:!0,features:[de],decls:16,vars:8,consts:[[1,"container"],[1,"cuts",3,"headerText"],[4,"ngIf","ngIfElse"],[1,"buttons"],[4,"ngTemplateOutlet"],["error",""],["add",""],["remove",""],["duplicate",""],[4,"ngFor","ngForOf"],[3,"cut","activeCanvas"],[1,"adder",3,"tooltip","position","click"],["width","138","height","164","viewBox","0 0 138 164","fill","none","xmlns","http://www.w3.org/2000/svg"],["clip-path","url(#clip0_1_589)"],["d","M137.273 82.673C137.273 97.0745 137.192 111.477 137.315 125.878C137.257 131.183 136.718 136.472 135.704 141.679C135.346 143.92 134.553 146.067 133.372 148.001C128.405 155.697 121.501 160.577 112.222 161.587C91.9284 163.816 71.465 164.02 51.1311 162.199C43.2342 161.486 35.2579 161.444 27.5523 159.315C23.8951 158.401 20.3171 157.194 16.8527 155.706C7.92056 151.593 2.80505 144.479 1.616 134.664C1.2437 131.655 1.05786 128.625 1.05958 125.593C1.16944 96.0341 1.35943 66.472 1.47704 36.911C1.53559 30.8429 2.38153 24.808 3.99348 18.959C5.06943 14.908 7.15491 11.1983 10.0538 8.17847C13.7054 4.23851 18.7609 1.90477 24.1195 1.68615C34.3047 1.17405 44.4892 0.555105 54.6821 0.331468C64.5003 0.116259 74.3316 0.206058 84.1504 0.425156C90.9403 0.576192 97.7296 1.06481 104.498 1.64627C106.373 1.80769 108.171 2.46653 109.709 3.55485C119.117 10.6029 127.839 18.4142 135.282 27.5846C136.961 29.6492 137.818 32.2647 137.688 34.9258C137.483 49.3241 137.407 63.7254 137.289 78.1251C137.277 79.6412 137.289 81.1568 137.289 82.673H137.273ZM12.4344 82.203C11.3675 98.0702 11.2945 113.953 11.2712 129.836C11.3269 133.244 11.8445 136.628 12.8099 139.896C13.3125 141.922 14.2457 143.815 15.5454 145.445C16.8452 147.076 18.4808 148.405 20.3404 149.343C22.3187 150.443 24.4302 151.281 26.6223 151.839C31.7689 152.976 36.9239 154.064 42.2352 154.358C62.9437 155.613 83.7077 155.647 104.421 154.461C107.053 154.297 109.695 154.112 112.299 153.717C115.3 153.231 118.098 151.891 120.362 149.857C123.238 147.384 125.384 144.168 126.566 140.557C128.419 135.061 128.44 129.408 128.44 123.727C128.436 99.141 128.432 74.5553 128.429 49.9698C128.429 46.9439 128.419 43.9173 128.343 40.8947C128.278 38.3095 126.856 37.0384 123.956 36.9528C118.679 36.7972 113.397 36.7643 108.123 36.5166C106.252 36.3845 104.402 36.0368 102.611 35.4797C101.691 35.243 100.858 34.7459 100.212 34.0478C99.5655 33.3498 99.1325 32.4801 98.9651 31.5423C98.6394 29.6825 98.4785 27.7972 98.4843 25.909C98.4326 21.3773 98.4902 16.8445 98.5134 12.3115C98.5173 11.5064 97.272 9.87169 96.598 9.77122C95.8626 9.61065 95.1175 9.49851 94.3679 9.43635C76.2697 9.17706 58.1707 8.9376 40.0716 8.71721C37.0615 8.68545 34.0476 9.00009 31.0342 9.13881C27.2124 9.31383 23.6077 10.4446 20.0871 11.802C17.589 12.7597 15.5152 14.5825 14.2407 16.9409C12.5838 19.9486 11.4509 23.1169 11.8393 26.6743C12.2496 30.434 12.8577 34.2002 12.8513 37.9631C12.8241 52.7076 12.5902 67.4553 12.4344 82.203ZM109.153 17.636C108.763 18.2309 108.47 18.8853 108.288 19.5736C108.114 21.4243 108.067 23.2915 108.076 25.1525C108.05 25.6142 108.116 26.0763 108.272 26.5117C108.427 26.9469 108.668 27.3468 108.98 27.6871C109.292 28.0276 109.669 28.3017 110.088 28.4937C110.507 28.6856 110.961 28.7913 111.422 28.8045C114.007 28.8466 116.595 28.7452 119.18 28.6544C119.332 28.6177 119.473 28.5453 119.592 28.443C119.711 28.3407 119.803 28.2111 119.863 28.0657C119.927 27.8917 119.956 27.7067 119.947 27.5213C119.94 27.3359 119.895 27.1536 119.816 26.9858C117.187 23.3863 113.949 20.2784 110.247 17.8043C109.975 17.615 109.523 17.6865 109.153 17.636Z","fill","white"],["d","M52.63 92.2501C56.3898 92.2501 60.1495 92.2806 63.9086 92.2346C64.652 92.1568 65.3482 91.8333 65.887 91.3134C66.4254 90.7936 66.7756 90.1084 66.8809 89.3662C67.1226 84.4663 67.2635 79.5612 67.5556 74.6652C67.6028 72.7853 67.9072 70.9211 68.4603 69.1242C68.6348 68.5836 68.9683 68.1091 69.4174 67.7636C69.8672 67.4174 70.4106 67.2171 70.9761 67.1886C71.5415 67.1601 72.1025 67.3046 72.5845 67.6035C73.066 67.9016 73.446 68.3405 73.6728 68.861C74.2705 70.2404 74.5969 71.7223 74.6337 73.2255C74.9232 76.9903 75.0447 80.7688 75.2696 84.5389C75.3375 85.6674 75.5094 86.7908 75.6625 87.9096C76.027 90.581 77.5618 92.1717 80.0375 92.1574C83.7972 92.1354 87.5557 91.8981 91.3154 91.8612C94.3107 91.834 97.3615 91.7691 100.104 93.2309C100.583 93.4856 100.757 94.4366 100.925 95.1042C100.954 95.2922 100.939 95.4847 100.882 95.6662C100.825 95.8471 100.726 96.0131 100.595 96.1505C100.072 96.6898 99.4197 97.0846 98.6998 97.2972C96.4716 97.6018 94.2189 97.7788 91.9707 97.8773C87.8348 98.0575 83.6951 98.1113 79.5599 98.2896C78.6235 98.3881 77.7537 98.8218 77.1088 99.5102C76.4645 100.199 76.0884 101.098 76.0496 102.042C75.7265 107.696 75.5042 113.355 75.1623 119.007C75.0492 120.876 74.7184 122.734 74.4366 124.589C74.2499 125.82 72.2136 127.291 71.095 127.104C69.884 126.901 68.1379 125.324 67.9834 124.155C67.7378 122.293 67.4664 120.423 67.4018 118.55C67.2008 112.893 67.1116 107.232 66.9359 101.573C66.868 100.825 66.5514 100.122 66.037 99.577C65.5226 99.0312 64.8399 98.6746 64.0992 98.5651C59.5911 98.3278 55.0792 98.1625 50.5718 97.9169C47.5701 97.7516 44.5703 97.5286 41.575 97.2622C40.0241 97.1254 38.2664 95.2806 38.753 94.3452C38.9799 93.8422 39.3438 93.4137 39.8026 93.1084C40.2614 92.8037 40.7967 92.6339 41.3469 92.6203C45.106 92.5872 48.8658 92.6086 52.6249 92.6086L52.63 92.2501Z","fill","white"],["id","clip0_1_589"],["width","137","height","164","fill","white","transform","translate(0.777344)"],[1,"remover",3,"tooltip","position","click"],["width","120","height","141","viewBox","0 0 120 141","fill","none","xmlns","http://www.w3.org/2000/svg"],["clip-path","url(#clip0_1_576)"],["d","M11.5447 32.2823C9.35739 31.9305 7.54846 31.7222 5.77836 31.3361C2.60934 30.6453 0.988722 29.1086 0.949918 26.938C0.90982 24.6587 2.59503 22.7092 5.87594 22.292C10.5616 21.6963 15.3056 21.5295 20.03 21.2921C22.5846 21.1628 25.1507 21.2695 28.1082 21.2695C27.6794 19.2916 27.3724 17.7509 27.009 16.2245C26.2431 13.1665 26.6502 9.93253 28.1499 7.15974C30.1548 3.31135 33.21 0.966791 37.5696 0.821263C45.5318 0.555646 53.4971 0.406041 61.4658 0.372408C66.7409 0.347184 72.0177 0.592906 77.2931 0.718385C78.0466 0.736495 78.8026 0.733267 79.5535 0.788891C84.9344 1.18602 88.3776 3.94844 89.6148 9.22106C90.1749 11.6084 90.2467 14.1134 90.4976 16.5699C90.627 17.8376 90.6645 19.1143 90.7563 20.58C91.6242 20.7109 92.4993 20.7908 93.3769 20.8193C99.1891 20.655 104.999 20.4131 110.812 20.2863C112.31 20.2218 113.809 20.3725 115.263 20.734C116.431 21.0072 117.48 21.649 118.255 22.5645C119.03 23.48 119.49 24.6206 119.567 25.8177C119.768 27.0519 119.583 28.318 119.038 29.4433C118.493 30.5687 117.614 31.4986 116.521 32.1065C115.619 32.6562 114.629 33.0624 113.507 33.6199C113.507 36.7542 113.401 39.8628 113.525 42.9615C114.263 61.3478 115.277 79.7315 114.594 98.1391C114.347 104.796 113.896 111.473 112.986 118.065C112.481 121.727 111.006 125.296 109.663 128.789C109.028 130.464 108.025 131.975 106.728 133.211C105.431 134.447 103.872 135.375 102.169 135.928C99.021 137.007 95.7892 137.824 92.507 138.369C89.5152 138.752 86.5046 138.965 83.4895 139.006C71.7674 139.589 60.049 140.279 48.3204 140.659C43.3759 140.869 38.4226 140.655 33.5146 140.02C20.8883 138.243 14.0256 131.285 12.0272 118.648C11.4351 115.148 11.1059 111.607 11.0423 108.058C10.9086 87.7206 10.8602 67.383 10.8973 47.0453C10.9038 42.2177 11.3093 37.3887 11.5447 32.2823ZM21.213 33.0682C21.795 43.107 22.2262 92.2559 23.389 107.055C23.7318 111.419 24.7369 115.741 25.5971 120.052C26.4547 124.348 29.3579 126.846 33.5196 127.519C38.1762 128.271 42.9124 128.996 47.6077 128.961C59.3402 128.874 71.0741 128.47 82.7969 127.939C87.2853 127.736 91.751 126.893 96.2122 126.238C97.0251 126.136 97.7857 125.78 98.3839 125.22C98.9828 124.66 99.389 123.925 99.5455 123.121C100.163 120.625 100.962 118.14 101.257 115.602C102.951 101.021 102.602 86.3863 102.154 71.7566C101.802 60.2522 101.392 48.7496 101.003 37.2464C100.968 36.2116 100.897 35.1728 100.849 34.268C73.4017 33.8676 48.8907 33.4724 21.2148 33.0682H21.213ZM38.4807 21.0379C52.0098 21.5275 65.2706 21.5062 78.617 20.8833V11.9383C65.1232 11.4855 51.8792 10.9991 38.4807 12.3115V21.0379Z","fill","white"],["d","M82.2127 77.7577C82.0717 70.8105 81.7412 63.7697 81.4211 56.9597L81.4146 56.8303C81.2995 54.3613 81.1869 51.8924 81.0757 49.4233C81.0265 48.5606 80.8642 47.7079 80.5939 46.8872C80.0008 45.0115 78.6627 44.0226 76.9308 44.1862C75.8817 44.2729 74.0748 44.8129 73.7533 47.4479C73.7016 47.922 73.6757 48.3986 73.6757 48.8754C73.5722 57.4389 72.7903 85.75 72.7826 86.0385C72.6364 92.8447 72.4851 99.8798 72.3816 106.859C72.3279 108.781 72.5012 110.703 72.899 112.583C73.0911 113.579 73.6285 114.476 74.4162 115.115C75.2046 115.754 76.1928 116.094 77.2069 116.076C77.3259 116.076 77.4462 116.072 77.5671 116.063C78.5689 116.035 79.5281 115.652 80.2737 114.982C81.0188 114.312 81.5019 113.4 81.6364 112.406C81.9915 110.339 82.1862 108.247 82.2185 106.15L82.2534 101.336C82.3103 93.6124 82.3724 85.6265 82.2127 77.7577Z","fill","white"],["d","M47.6009 44.6397H47.5977C46.9524 44.6372 46.3162 44.7915 45.7437 45.0896C45.1713 45.3876 44.6798 45.8204 44.3116 46.3504C43.6881 47.4661 43.3363 48.7129 43.2847 49.9899C43.1747 51.7201 43.0594 53.4495 42.9417 55.2211C42.5375 61.3145 42.1185 67.6158 41.9388 73.8347C41.6801 82.6789 41.5928 91.666 41.5055 100.358C41.4792 103.018 41.451 105.678 41.4209 108.338C41.4194 109.427 41.5716 110.511 41.8734 111.557C42.579 114.058 44.2768 115.611 46.3037 115.611H46.3684C48.4916 115.575 50.1884 113.898 50.6897 111.339C50.9368 109.985 51.0413 108.609 51.0011 107.234C50.8885 100.171 50.7505 93.1097 50.6199 86.4012L50.5015 80.3356L50.6369 73.1316C50.7844 65.3281 50.9233 57.9518 51.0351 50.539C51.1015 49.296 50.9174 48.0524 50.4939 46.882C50.2341 46.2985 49.834 45.7884 49.3292 45.3972C48.8245 45.0059 48.2307 44.7458 47.6009 44.6397Z","fill","white"],["id","clip0_1_576"],["width","119","height","141","fill","white","transform","translate(0.777344)"],[1,"duplicate",3,"tooltip","position","click"],["width","151","height","173","viewBox","0 0 151 173","fill","none","xmlns","http://www.w3.org/2000/svg"],["clip-path","url(#clip0_1_1076)"],["d","M30.9232 153.398C25.9083 153.062 21.2596 152.78 16.6154 152.431C13.3687 152.186 10.2998 151.464 7.57837 149.459C3.00697 146.09 1.56868 141.264 1.45764 136.007C1.29465 128.332 1.36022 120.646 1.56152 112.971C1.76671 105.186 2.0875 97.3959 2.65373 89.6298C3.85958 73.0868 4.3797 56.5257 4.83879 39.947C5.16786 31.9356 6.64063 24.0128 9.2122 16.4196C11.359 9.78579 15.6758 5.67804 22.633 4.53533C24.2765 4.26477 25.9219 3.95521 27.5791 3.81993C50.8388 1.97287 74.0727 -0.472549 97.463 0.405459C102.453 0.593417 107.451 0.999201 112.406 1.62356C118.56 2.39881 121.757 5.86334 121.977 12.0576C122.155 17.1357 121.886 22.2301 121.81 27.7778C122.815 27.7778 124.008 27.6887 125.186 27.7947C128.943 28.1322 132.725 28.3527 136.439 28.9654C142.402 29.9513 146.049 33.544 147.631 39.4325C148.915 44.4993 149.683 49.6836 149.923 54.9056C150.962 71.9558 149.786 88.9202 148.223 105.895C147.611 112.529 147.573 119.228 147.435 125.902C147.297 132.576 147.5 139.263 147.258 145.933C147.131 149.71 146.673 153.467 145.891 157.163C144.143 165.312 138.661 170.196 130.151 171.171C124.199 171.921 118.213 172.362 112.216 172.494C94.7721 172.676 77.3227 172.758 59.8816 172.485C54.1517 172.396 48.381 171.399 42.7388 170.278C36.1317 168.965 32.0472 163.932 31.3102 157.17C31.1771 155.969 31.0622 154.766 30.9232 153.398ZM42.1304 105.059H41.7044C41.4797 112.397 41.2546 119.735 41.0291 127.073C40.7538 135.633 40.4401 144.191 40.1934 152.752C40.1525 154.189 40.3927 155.633 40.459 157.076C40.5888 159.93 42.155 161.708 44.8232 162.227C49.3901 163.117 53.9849 164.166 58.607 164.406C68.2513 164.906 77.9247 165.201 87.5786 165.067C99.5656 164.9 111.549 164.269 123.527 163.708C126.073 163.54 128.597 163.116 131.059 162.443C134.088 161.671 136.161 159.649 136.683 156.506C137.389 152.801 137.844 149.051 138.044 145.284C138.262 137.614 138.034 129.932 138.177 122.261C138.285 116.482 138.437 110.684 139.001 104.936C140.466 89.9771 141.451 75.0022 140.733 59.9668C140.468 54.4224 140.112 48.8753 138.642 43.4636C137.981 41.0305 136.759 39.5275 134.086 39.4781C127.658 39.359 121.224 38.9747 114.801 39.0996C103.697 39.3149 92.6058 39.8527 81.5078 40.2214C73.6253 40.4816 65.7383 40.6117 57.8596 40.9538C54.3245 41.1072 50.7128 41.2972 47.4908 43.0057C46.383 43.591 44.8609 44.551 44.6901 45.5422C44.2325 48.6629 43.4543 51.7279 42.368 54.6885C42.1904 55.4482 42.1427 56.2326 42.2271 57.0083C42.1862 59.5663 42.1375 62.1248 42.1356 64.6827C42.126 78.1396 42.1243 91.5985 42.1304 105.059ZM30.7978 143.928C30.9232 141.672 31.0434 139.9 31.1167 138.126C31.4938 129.01 31.865 119.894 32.2304 110.777C32.8103 96.6584 33.3427 82.5381 33.9986 68.4236C34.4115 59.539 34.6986 50.6261 36.6038 41.8935C36.9548 40.4047 37.6252 39.0103 38.5687 37.8072C41.2358 34.4555 45.0751 32.2443 49.309 31.6215C54.8915 30.6969 60.5239 30.1038 66.1766 29.8454C80.6045 29.169 95.0441 28.7541 109.479 28.2195C110.341 28.1876 111.198 28.0243 112.384 27.8851C112.736 22.5832 112.797 17.4317 111.688 11.8788C106.129 11.5341 100.605 11.0605 95.0708 10.8706C73.5896 10.1324 52.2291 12.3483 30.8336 13.6744C28.296 13.8311 25.7881 14.4314 23.2556 14.7325C20.3238 15.0818 18.7823 16.8625 17.9278 19.5213C15.7652 26.07 14.4365 32.8659 13.9732 39.748C13.007 55.9592 12.0154 72.1737 11.4238 88.4019C10.8803 103.295 10.8167 118.213 10.6258 133.121C10.6562 135.122 10.8956 137.114 11.3401 139.066C11.8551 141.637 13.281 142.885 15.9148 143.141C19.3401 143.474 22.7765 143.702 26.2115 143.913C27.6258 144.003 29.0517 143.928 30.7978 143.928Z","fill","white"],["id","clip0_1_1076"],["width","150","height","173","fill","white","transform","translate(0.777344)"]],template:function(i,o){if(i&1&&(x(0,"div",0)(1,"app-layer-box",1),ce(2,IO,2,1,"ng-container",2),Je(3,"async"),A(),x(4,"div",3),ce(5,MO,1,0,"ng-container",4)(6,TO,1,0,"ng-container",4)(7,AO,1,0,"ng-container",4),A()(),ce(8,OO,1,0,"ng-template",null,5,ot)(10,RO,8,2,"ng-template",null,6,ot)(12,PO,9,2,"ng-template",null,7,ot)(14,NO,7,2,"ng-template",null,8,ot)),i&2){let s=Ye(9),a=Ye(11),c=Ye(13),l=Ye(15);z(1),G("headerText","Cuts"),z(1),G("ngIf",et(3,6,o.activeCanvas$))("ngIfElse",s),z(3),G("ngTemplateOutlet",a),z(1),G("ngTemplateOutlet",l),z(1),G("ngTemplateOutlet",c)}},dependencies:[oe,Kc,bt,qn,Tt,xo,Y6,Kn,Eo],styles:['.container[_ngcontent-%COMP%]{display:grid;height:100%;grid-template-areas:"cuts" "buttons";grid-template-rows:auto 33px}.cuts[_ngcontent-%COMP%]{grid-area:cuts}.spacer[_ngcontent-%COMP%]{width:240px;height:100%;min-height:32px}.buttons[_ngcontent-%COMP%]{grid-area:buttons;height:32px;background-color:var(--background-subheader);display:grid;grid-template-columns:repeat(3,32px);justify-content:end;gap:4px;padding-right:16px;border-bottom:1px solid rgba(0,0,0,.5)}.adder[_ngcontent-%COMP%], .remover[_ngcontent-%COMP%], .duplicate[_ngcontent-%COMP%]{width:32px}div[_ngcontent-%COMP%] > svg[_ngcontent-%COMP%]{margin-top:6px;margin-left:6px;height:20px;width:20px;opacity:.5;cursor:pointer}']});let t=e;return t})();var X6=(()=>{let e=class e{constructor(){this.worker=new Worker(new URL("worker-TXCGHUKC.js",import.meta.url),{type:"module"}),this.handleWorker()}handleWorker(){this.worker.addEventListener("message",({data:r})=>{console.log("Worker finished",r);let i=r;this.downloadResult(i)})}downloadResult(r){let i=r.img,o=r.result;for(let s=0;s<o.length;s++){let a=o[s],c=a.fileType.split("/").slice(-1)[0],l=document.createElement("a"),u=`${i.meta.name}-${a.cut.name}.${c}`;l.download=u,l.href=a.dataURL,l.click()}}getFileSize(r){return window.atob(r.split(",")[1]).length}downloadSelectedCut(){if(console.log("downloadSelectedCut"),!this.active||!this.activeCanvas){console.log("ERROR: refs missing");return}let r=this.active.cuts.findIndex(s=>s.selected);if(r<0){console.log("ERROR: No Cut selected");return}let i=this.active.cuts[r],o={};this.worker.postMessage({active:this.active,cuts:[i],options:{}})}downloadAllCuts(){console.log("downloadAllCuts"),!(!this.active||!this.activeCanvas)&&this.active.cuts.length>0&&this.worker.postMessage({active:this.active,cuts:this.active.cuts,options:{}})}downloadAllVisibleCuts(){if(console.log("downloadAllVisibleCuts"),!this.active||!this.activeCanvas)return;let r=this.active.cuts.filter(i=>i.visible);r.length>0&&this.worker.postMessage({active:this.active,cuts:r,options:{}})}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=ae({type:e,selectors:[["app-exporter"]],inputs:{active:"active",activeCanvas:"activeCanvas"},standalone:!0,features:[de],decls:0,vars:0,template:function(i,o){},dependencies:[oe]});let t=e;return t})();var FO=["exporter"];function kO(t,e){t&1&&at(0)}function LO(t,e){t&1&&at(0)}function VO(t,e){t&1&&at(0)}function jO(t,e){t&1&&at(0)}function UO(t,e){if(t&1&&(Ze(0),x(1,"app-layer-box",7),ce(2,kO,1,0,"ng-container",8)(3,LO,1,0,"ng-container",8)(4,VO,1,0,"ng-container",8)(5,jO,1,0,"ng-container",8),H(6,"app-exporter",9,10),A(),H(8,"div",11),Qe()),t&2){let n=e.ngIf,r=Z().ngIf;Z();let i=Ye(6),o=Ye(8),s=Ye(10),a=Ye(12);z(1),G("headerText","Export"),z(1),G("ngTemplateOutlet",i),z(1),G("ngTemplateOutlet",o),z(1),G("ngTemplateOutlet",s),z(1),G("ngTemplateOutlet",a),z(1),G("active",n)("activeCanvas",r)}}function BO(t,e){if(t&1&&(Ze(0),ce(1,UO,9,7,"ng-container",1),Je(2,"async"),Qe()),t&2){let n=Z();z(1),G("ngIf",et(2,1,n.active$))}}function $O(t,e){t&1&&(_t(),x(0,"svg",12)(1,"g",13),H(2,"path",14)(3,"path",15),A(),x(4,"defs")(5,"clipPath",16),H(6,"rect",17),A()()())}function HO(t,e){t&1&&at(0)}function GO(t,e){if(t&1){let n=Ot();x(0,"div",18),ie("click",function(){Ne(n);let i=Z();return Fe(i.onClickSelected())}),x(1,"div",19)(2,"div",20),J(3,"Download Selected"),A(),x(4,"div",21),J(5,"size: 548kb"),A()(),x(6,"div",22),ce(7,HO,1,0,"ng-container",8),A()()}if(t&2){Z();let n=Ye(4);z(7),G("ngTemplateOutlet",n)}}function zO(t,e){t&1&&at(0)}function qO(t,e){if(t&1){let n=Ot();x(0,"div",18),ie("click",function(){Ne(n);let i=Z();return Fe(i.onClickAll())}),x(1,"div",19)(2,"div",20),J(3,"Download All"),A(),x(4,"div",21),J(5,"size: 2.48mb"),A()(),x(6,"div",22),ce(7,zO,1,0,"ng-container",8),A()()}if(t&2){Z();let n=Ye(4);z(7),G("ngTemplateOutlet",n)}}function WO(t,e){t&1&&at(0)}function YO(t,e){if(t&1){let n=Ot();x(0,"div",18),ie("click",function(){Ne(n);let i=Z();return Fe(i.onClickAllVisible())}),x(1,"div",19)(2,"div",20),J(3,"Download All Visible"),A(),x(4,"div",21),J(5,"size: 1.69"),A()(),x(6,"div",22),ce(7,WO,1,0,"ng-container",8),A()()}if(t&2){Z();let n=Ye(4);z(7),G("ngTemplateOutlet",n)}}function KO(t,e){t&1&&at(0)}function XO(t,e){if(t&1){let n=Ot();x(0,"div",18),ie("click",function(){Ne(n);let i=Z();return Fe(i.onClickAs())}),x(1,"div",19)(2,"div",20),J(3,"Download..."),A(),x(4,"div",21),J(5,"..."),A()(),x(6,"div",22),ce(7,KO,1,0,"ng-container",8),A()()}if(t&2){Z();let n=Ye(4);z(7),G("ngTemplateOutlet",n)}}var Z6=(()=>{let e=class e{constructor(r){this.store=r,this.active$=r.active$,this.activeCanvas$=r.activeCanvas$}onClickSelected(){this.exporterRef.downloadSelectedCut()}onClickAll(){this.exporterRef.downloadAllCuts()}onClickAllVisible(){this.exporterRef.downloadAllVisibleCuts()}onClickAs(){}};e.\u0275fac=function(i){return new(i||e)(X(Te))},e.\u0275cmp=ae({type:e,selectors:[["app-layers-export"]],viewQuery:function(i,o){if(i&1&&ur(FO,5),i&2){let s;Gn(s=zn())&&(o.exporterRef=s.first)}},standalone:!0,features:[de],decls:13,vars:3,consts:[[1,"container"],[4,"ngIf"],["iconDownload",""],["exportActive",""],["exportAll",""],["exportAllVisible",""],["exportAs",""],[1,"exports",3,"headerText"],[4,"ngTemplateOutlet"],[3,"active","activeCanvas"],["exporter",""],[1,"buttons"],["width","158","height","146","viewBox","0 0 158 146","fill","none","xmlns","http://www.w3.org/2000/svg",1,"icon-download"],["clip-path","url(#clip0_1_595)"],["d","M70.5401 108.42C69.3341 107.513 68.082 106.667 66.7903 105.886L66.5126 105.725C63.2038 103.799 59.7829 101.808 56.3218 100.016C55.4323 99.5558 54.5377 99.0461 53.6722 98.5518C51.2997 97.1984 48.8474 95.7998 46.035 95.128C45.9112 95.0982 45.7815 95.1047 45.6611 95.1467C45.5409 95.188 45.4351 95.263 45.3564 95.3631L44.0193 97.0511C43.9436 97.1468 43.8959 97.2617 43.8813 97.3832C43.8666 97.504 43.8857 97.6267 43.9363 97.7372C44.0285 97.9394 44.105 98.1449 44.1802 98.3445C44.3357 98.8438 44.5791 99.3116 44.8991 99.7257C52.1892 108.196 61.1181 115.77 73.8469 124.284C74.6234 124.777 75.4363 125.212 76.2778 125.586C77.3988 126.146 78.6321 126.45 79.8868 126.474C81.5716 126.453 83.1922 125.824 84.447 124.705C84.7155 124.479 84.9893 124.258 85.2631 124.038C85.8535 123.564 86.4633 123.073 87.0238 122.527C88.5698 121.024 90.123 119.526 91.6832 118.035C95.8191 114.066 100.095 109.961 104.095 105.722C106.574 102.979 108.877 100.084 110.993 97.055C111.699 96.086 112.405 95.1163 113.123 94.1609L113.203 94.0549C113.618 93.5136 114.588 92.2461 113.158 90.7647C113.04 90.6433 112.881 90.5709 112.711 90.5619C110.291 90.4424 108.679 91.8539 107.124 93.228C106.542 93.7681 105.924 94.2668 105.272 94.7197C102.835 96.3941 100.509 98.223 98.3097 100.196L97.9081 100.541C96.7838 101.505 95.6984 102.54 94.6487 103.539C93.6457 104.495 92.6077 105.483 91.5489 106.398C90.8197 107.028 90.1346 107.726 89.4729 108.4C88.2364 109.778 86.8136 110.977 85.2449 111.963C85.2358 111.891 85.2274 111.823 85.219 111.754C85.1314 111.196 85.0866 110.634 85.0847 110.07C85.1878 106.448 85.3001 102.827 85.422 99.2043C85.6095 93.4199 85.8035 87.4384 85.9313 81.5512C85.9715 79.7107 86.0131 77.8689 86.0565 76.0271C86.438 59.5536 86.8318 42.5255 85.3358 25.7872C84.7992 19.7792 83.889 13.7166 83.0093 7.85141L82.6402 5.38277C82.4157 4.44857 82.0037 3.56944 81.4283 2.7987C81.0766 2.23408 80.6783 1.59394 80.2326 0.777372C80.1723 0.667426 80.0827 0.576769 79.9731 0.515555C79.8635 0.454342 79.7389 0.424669 79.613 0.431018C79.4878 0.437367 79.3665 0.478926 79.264 0.550885C79.1608 0.622843 79.0804 0.722499 79.0324 0.837936C77.5136 4.44013 77.4643 7.54494 77.4209 10.2834C77.406 11.2402 77.3917 12.1449 77.3203 13.0429C77.1977 14.5881 77.0485 16.1315 76.8993 17.6735C76.7105 19.62 76.5159 21.633 76.3803 23.6214C76.1856 26.4852 76.0637 29.3992 75.9469 32.2165C75.9093 33.1106 75.871 34.0043 75.8327 34.8984L75.7912 35.8364C75.6413 39.2242 75.4869 42.7268 75.3734 46.1759C75.2689 49.3698 75.1885 52.7454 75.1223 56.7992C75.0795 59.3833 75.0574 61.9711 75.0354 64.5584L75.0029 68.0818C74.9913 69.2536 74.977 70.4255 74.9608 71.5974C74.9277 74.1434 74.8959 76.7765 74.8959 79.3683C74.8991 82.7024 74.9199 86.6509 75.0432 90.6646C75.0938 92.3262 75.1917 94.009 75.2871 95.639C75.3948 97.4827 75.5057 99.3858 75.5466 101.259C75.5719 102.388 75.6647 103.538 75.7542 104.65C76.026 107.03 76.0403 109.431 75.7964 111.814C73.9558 110.824 72.1984 109.689 70.5401 108.42Z","fill","white"],["d","M154.191 82.8569C153.744 82.6101 153.249 82.4621 152.739 82.4234C152.229 82.3853 151.717 82.4576 151.238 82.6346C151.144 82.6605 151.057 82.7063 150.983 82.7684C150.909 82.831 150.85 82.9092 150.81 82.9971C149.077 86.744 148.595 106.975 148.244 121.748C148.106 127.519 147.995 132.177 147.842 134.43C147.03 134.507 146.264 134.589 145.533 134.666C143.717 134.86 142.147 135.025 140.568 135.063C134.253 135.213 126.785 135.366 119.282 135.366H119.171C114.222 135.366 109.273 135.373 104.323 135.386C88.7154 135.414 72.5762 135.446 56.7108 135.16C47.3609 134.99 37.8546 134.392 28.661 133.812C24.7951 133.567 20.7975 133.316 16.8634 133.102C16.1357 133.045 15.4118 132.947 14.6952 132.809C14.4357 132.765 14.1697 132.72 13.8901 132.675C13.8389 132.333 13.7843 131.996 13.7305 131.661C13.5519 130.672 13.4265 129.673 13.3548 128.67C13.1926 125.565 13.0584 122.459 12.9235 119.352C12.6886 113.938 12.446 108.34 12.0554 102.841C11.6402 96.9756 11.0485 87.1264 10.7339 81.78C10.6799 80.7722 10.2443 79.8212 9.51481 79.1203C8.78534 78.4194 7.8161 78.0195 6.80236 78.0014C5.76153 77.9794 4.75231 78.3574 3.98422 79.057C3.21613 79.7573 2.74817 80.7244 2.67751 81.7586C2.03719 91.7157 0.623532 116.375 1.3229 130.279L1.36772 131.235C1.391 133.381 1.63708 135.52 2.10209 137.617C3.0655 141.327 5.29401 142.99 9.55186 143.181C12.9312 143.333 16.31 143.511 19.6881 143.69C25.0728 143.975 30.6449 144.272 36.1308 144.446C48.1595 144.833 59.0509 145.054 69.4271 145.128C74.0521 145.162 78.6765 145.205 83.3015 145.257C91.5927 145.343 100.003 145.431 108.457 145.431C119.85 145.431 131.323 145.272 142.687 144.74C145.152 144.67 147.609 144.442 150.044 144.055C153.921 143.365 156.099 140.984 156.341 137.168C156.435 135.679 156.557 134.071 156.681 132.446C156.848 130.242 157.022 127.964 157.13 125.88C157.052 111.441 155.603 86.7369 155.324 84.7988C155.288 84.4125 155.169 84.0391 154.973 83.7038C154.777 83.3685 154.51 83.0791 154.191 82.8569Z","fill","white"],["id","clip0_1_595"],["width","157","height","146","fill","white","transform","translate(0.777344)"],[1,"sub-container","prevent-select",3,"click"],[1,"main"],[1,"title"],[1,"size"],[1,"icon"]],template:function(i,o){i&1&&(x(0,"div",0),ce(1,BO,3,3,"ng-container",1),Je(2,"async"),A(),ce(3,$O,7,0,"ng-template",null,2,ot)(5,GO,8,1,"ng-template",null,3,ot)(7,qO,8,1,"ng-template",null,4,ot)(9,YO,8,1,"ng-template",null,5,ot)(11,XO,8,1,"ng-template",null,6,ot)),i&2&&(z(1),G("ngIf",et(2,1,o.activeCanvas$)))},dependencies:[oe,bt,qn,Tt,xo,Kn,X6],styles:['.container[_ngcontent-%COMP%]{display:grid;height:100%;grid-template-areas:"cuts" "buttons";grid-template-rows:auto 33px}.exports[_ngcontent-%COMP%]{grid-area:cuts}.buttons[_ngcontent-%COMP%]{grid-area:buttons;height:32px;background-color:var(--background-subheader);display:grid;grid-template-columns:32px 32px;justify-content:end;gap:4px;padding-right:16px;border-bottom:1px solid rgba(0,0,0,.5)}.sub-container[_ngcontent-%COMP%]{width:240px;height:48px;display:grid;grid-template-areas:"title icon" "size icon";grid-template-columns:auto 64px;cursor:pointer;border-bottom:1px solid rgba(0,0,0,.5)}.sub-container[_ngcontent-%COMP%]:hover, .selected[_ngcontent-%COMP%]{background-color:var(--accent)}.main[_ngcontent-%COMP%]{padding-left:16px;padding-right:8px}.title[_ngcontent-%COMP%]{grid-area:title;font-size:14px;font-weight:500;line-height:17px;padding-top:5.5px;padding-bottom:5px}.size[_ngcontent-%COMP%]{grid-area:size;font-size:12px;line-height:15px;font-style:italic;padding-bottom:5.5px;color:#ffffff80}.icon[_ngcontent-%COMP%]{grid-area:icon;height:48px;margin-right:16px}.icon-download[_ngcontent-%COMP%]{line-height:48px;width:24px;height:22.32px;margin:12.84px 12px}']});let t=e;return t})();function ZO(t,e){if(t&1&&(x(0,"div",1)(1,"app-layer-box",2),H(2,"app-canvas-navigation"),A(),H(3,"app-layers-cuts",3)(4,"app-layers-export",4)(5,"div",5),A()),t&2){let n=e.ngIf;z(1),G("headerText","Navigation"),z(2),G("active",n)}}var Q6=(()=>{let e=class e{constructor(r){this.store=r,this.active$=r.active$}};e.\u0275fac=function(i){return new(i||e)(X(Te))},e.\u0275cmp=ae({type:e,selectors:[["app-layers"]],standalone:!0,features:[de],decls:2,vars:3,consts:[["class","container",4,"ngIf"],[1,"container"],[1,"navigation",3,"headerText"],[1,"cuts",3,"active"],[1,"export"],[1,"footer"]],template:function(i,o){i&1&&(ce(0,ZO,6,2,"div",0),Je(1,"async")),i&2&&G("ngIf",et(1,1,o.active$))},dependencies:[oe,bt,Tt,xo,W6,K6,Z6],styles:['.container[_ngcontent-%COMP%]{display:grid;grid-template-areas:"navigation" "cuts" "export" "footer";grid-template-rows:232px auto 261px 32px;justify-content:stretch;height:100%;width:100%;max-width:240px}.navigation[_ngcontent-%COMP%]{grid-area:navigation}.cuts[_ngcontent-%COMP%]{grid-area:cuts}.export[_ngcontent-%COMP%]{grid-area:export}.footer[_ngcontent-%COMP%]{grid-area:footer;background-color:var(--background-header)}']});let t=e;return t})();var J6=(()=>{let e=class e{constructor(r){this.store=r}onDrop(r){return Bt(this,null,function*(){if(r.preventDefault(),r.dataTransfer?.files){let i=r.dataTransfer.files;this.store.openFileList(i)}})}onDragOver(r){r.stopPropagation(),r.preventDefault(),console.log("dragover")}readFileAsDataUr(r){return Bt(this,null,function*(){return new Promise(o=>{let s=new FileReader;s.onloadend=a=>{let c=s.result;o(c)},s.readAsDataURL(r)})})}onChange(r){console.log(r);let o=r.target.files;this.store.openFileList(o)}};e.\u0275fac=function(i){return new(i||e)(X(Te))},e.\u0275cmp=ae({type:e,selectors:[["app-new-image"]],standalone:!0,features:[de],decls:18,vars:0,consts:[[1,"container"],[1,"header"],[1,"input"],["type","file","name","file","id","file","accept",".jpg, .jpeg, .png","multiple","",1,"inputfile",3,"change"],["for","file"],[1,"grid"],["width","138","height","164","viewBox","0 0 138 164","fill","none","xmlns","http://www.w3.org/2000/svg"],["clip-path","url(#clip0_1_589)"],["d","M137.273 82.673C137.273 97.0745 137.192 111.477 137.315 125.878C137.257 131.183 136.718 136.472 135.704 141.679C135.346 143.92 134.553 146.067 133.372 148.001C128.405 155.697 121.501 160.577 112.222 161.587C91.9284 163.816 71.465 164.02 51.1311 162.199C43.2342 161.486 35.2579 161.444 27.5523 159.315C23.8951 158.401 20.3171 157.194 16.8527 155.706C7.92056 151.593 2.80505 144.479 1.616 134.664C1.2437 131.655 1.05786 128.625 1.05958 125.593C1.16944 96.0341 1.35943 66.472 1.47704 36.911C1.53559 30.8429 2.38153 24.808 3.99348 18.959C5.06943 14.908 7.15491 11.1983 10.0538 8.17847C13.7054 4.23851 18.7609 1.90477 24.1195 1.68615C34.3047 1.17405 44.4892 0.555105 54.6821 0.331468C64.5003 0.116259 74.3316 0.206058 84.1504 0.425156C90.9403 0.576192 97.7296 1.06481 104.498 1.64627C106.373 1.80769 108.171 2.46653 109.709 3.55485C119.117 10.6029 127.839 18.4142 135.282 27.5846C136.961 29.6492 137.818 32.2647 137.688 34.9258C137.483 49.3241 137.407 63.7254 137.289 78.1251C137.277 79.6412 137.289 81.1568 137.289 82.673H137.273ZM12.4344 82.203C11.3675 98.0702 11.2945 113.953 11.2712 129.836C11.3269 133.244 11.8445 136.628 12.8099 139.896C13.3125 141.922 14.2457 143.815 15.5454 145.445C16.8452 147.076 18.4808 148.405 20.3404 149.343C22.3187 150.443 24.4302 151.281 26.6223 151.839C31.7689 152.976 36.9239 154.064 42.2352 154.358C62.9437 155.613 83.7077 155.647 104.421 154.461C107.053 154.297 109.695 154.112 112.299 153.717C115.3 153.231 118.098 151.891 120.362 149.857C123.238 147.384 125.384 144.168 126.566 140.557C128.419 135.061 128.44 129.408 128.44 123.727C128.436 99.141 128.432 74.5553 128.429 49.9698C128.429 46.9439 128.419 43.9173 128.343 40.8947C128.278 38.3095 126.856 37.0384 123.956 36.9528C118.679 36.7972 113.397 36.7643 108.123 36.5166C106.252 36.3845 104.402 36.0368 102.611 35.4797C101.691 35.243 100.858 34.7459 100.212 34.0478C99.5655 33.3498 99.1325 32.4801 98.9651 31.5423C98.6394 29.6825 98.4785 27.7972 98.4843 25.909C98.4326 21.3773 98.4902 16.8445 98.5134 12.3115C98.5173 11.5064 97.272 9.87169 96.598 9.77122C95.8626 9.61065 95.1175 9.49851 94.3679 9.43635C76.2697 9.17706 58.1707 8.9376 40.0716 8.71721C37.0615 8.68545 34.0476 9.00009 31.0342 9.13881C27.2124 9.31383 23.6077 10.4446 20.0871 11.802C17.589 12.7597 15.5152 14.5825 14.2407 16.9409C12.5838 19.9486 11.4509 23.1169 11.8393 26.6743C12.2496 30.434 12.8577 34.2002 12.8513 37.9631C12.8241 52.7076 12.5902 67.4553 12.4344 82.203ZM109.153 17.636C108.763 18.2309 108.47 18.8853 108.288 19.5736C108.114 21.4243 108.067 23.2915 108.076 25.1525C108.05 25.6142 108.116 26.0763 108.272 26.5117C108.427 26.9469 108.668 27.3468 108.98 27.6871C109.292 28.0276 109.669 28.3017 110.088 28.4937C110.507 28.6856 110.961 28.7913 111.422 28.8045C114.007 28.8466 116.595 28.7452 119.18 28.6544C119.332 28.6177 119.473 28.5453 119.592 28.443C119.711 28.3407 119.803 28.2111 119.863 28.0657C119.927 27.8917 119.956 27.7067 119.947 27.5213C119.94 27.3359 119.895 27.1536 119.816 26.9858C117.187 23.3863 113.949 20.2784 110.247 17.8043C109.975 17.615 109.523 17.6865 109.153 17.636Z","fill","white"],["d","M52.63 92.2501C56.3898 92.2501 60.1495 92.2806 63.9086 92.2346C64.652 92.1568 65.3482 91.8333 65.887 91.3134C66.4254 90.7936 66.7756 90.1084 66.8809 89.3662C67.1226 84.4663 67.2635 79.5612 67.5556 74.6652C67.6028 72.7853 67.9072 70.9211 68.4603 69.1242C68.6348 68.5836 68.9683 68.1091 69.4174 67.7636C69.8672 67.4174 70.4106 67.2171 70.9761 67.1886C71.5415 67.1601 72.1025 67.3046 72.5845 67.6035C73.066 67.9016 73.446 68.3405 73.6728 68.861C74.2705 70.2404 74.5969 71.7223 74.6337 73.2255C74.9232 76.9903 75.0447 80.7688 75.2696 84.5389C75.3375 85.6674 75.5094 86.7908 75.6625 87.9096C76.027 90.581 77.5618 92.1717 80.0375 92.1574C83.7972 92.1354 87.5557 91.8981 91.3154 91.8612C94.3107 91.834 97.3615 91.7691 100.104 93.2309C100.583 93.4856 100.757 94.4366 100.925 95.1042C100.954 95.2922 100.939 95.4847 100.882 95.6662C100.825 95.8471 100.726 96.0131 100.595 96.1505C100.072 96.6898 99.4197 97.0846 98.6998 97.2972C96.4716 97.6018 94.2189 97.7788 91.9707 97.8773C87.8348 98.0575 83.6951 98.1113 79.5599 98.2896C78.6235 98.3881 77.7537 98.8218 77.1088 99.5102C76.4645 100.199 76.0884 101.098 76.0496 102.042C75.7265 107.696 75.5042 113.355 75.1623 119.007C75.0492 120.876 74.7184 122.734 74.4366 124.589C74.2499 125.82 72.2136 127.291 71.095 127.104C69.884 126.901 68.1379 125.324 67.9834 124.155C67.7378 122.293 67.4664 120.423 67.4018 118.55C67.2008 112.893 67.1116 107.232 66.9359 101.573C66.868 100.825 66.5514 100.122 66.037 99.577C65.5226 99.0312 64.8399 98.6746 64.0992 98.5651C59.5911 98.3278 55.0792 98.1625 50.5718 97.9169C47.5701 97.7516 44.5703 97.5286 41.575 97.2622C40.0241 97.1254 38.2664 95.2806 38.753 94.3452C38.9799 93.8422 39.3438 93.4137 39.8026 93.1084C40.2614 92.8037 40.7967 92.6339 41.3469 92.6203C45.106 92.5872 48.8658 92.6086 52.6249 92.6086L52.63 92.2501Z","fill","white"],["id","clip0_1_589"],["width","137","height","164","fill","white","transform","translate(0.777344)"],[1,"history"]],template:function(i,o){i&1&&(x(0,"div",0)(1,"div",1),J(2,"Open Files"),A(),x(3,"div",2)(4,"input",3),ie("change",function(a){return o.onChange(a)}),A(),x(5,"label",4)(6,"div",5),_t(),x(7,"svg",6)(8,"g",7),H(9,"path",8)(10,"path",9),A(),x(11,"defs")(12,"clipPath",10),H(13,"rect",11),A()()(),jm(),x(14,"div"),J(15," Choose a file..."),A()()()(),x(16,"div",12),J(17," History "),A()())},dependencies:[oe],styles:['.container[_ngcontent-%COMP%]{width:600px;height:500px;border-radius:25px;background-color:var(--background-header);display:grid;justify-content:stretch;gap:20px;padding:20px;grid-template-areas:"header" "input" "history";grid-template-rows:40px auto auto;grid-template-columns:auto}.header[_ngcontent-%COMP%]{grid-area:header;height:40px;font-size:large;font-weight:500;text-align:center}.input[_ngcontent-%COMP%]{grid-area:input;border:2px dashed #ccc;border-radius:25px;text-align:center}.inputfile[_ngcontent-%COMP%]{width:.1px;height:.1px;opacity:0;overflow:hidden;position:absolute;z-index:-1}.inputfile[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]{cursor:pointer}.inputfile[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{pointer-events:none}.input[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{width:100%;height:100%;display:block}.grid[_ngcontent-%COMP%]{display:grid;justify-content:center;align-items:center;height:100%}.grid[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{font-size:24px}.history[_ngcontent-%COMP%]{grid-area:history}']});let t=e;return t})();var rt=ld(P1());var e8=(()=>{let e=class e{constructor(){this.pressedKeys=new Set,this.pressedKeysSubject=new qe(new Set),this.pressedKeys$=this.pressedKeysSubject.pipe(Bi()),this.keyDownSubject=new qe(""),this.keyDown$=this.keyDownSubject.pipe(Bi()),this.keyDownRepeatSubject=new qe(""),this.keyDownRepeat$=this.keyDownRepeatSubject.pipe(Bi()),this.keyUpSubject=new qe(""),this.keyUp$=this.keyUpSubject.pipe(Bi()),console.log("KeypressService init"),this.setupEvents()}setupEvents(){window.addEventListener("keydown",r=>{let i=r.key;this.keyDownRepeatSubject.next(i),r.repeat||(this.pressedKeys.add(i),this.updateSubject(),this.keyDownSubject.next(i))}),window.addEventListener("keyup",r=>{this.pressedKeys.delete(r.key),this.updateSubject(),this.keyUpSubject.next(r.key)})}updateSubject(){this.pressedKeysSubject.next(this.pressedKeys)}isKeyPressed(r){return this.pressedKeys.has(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var JO=["scroll"],eR=["large"],t8=(()=>{let e=class e{onResize(r){this.resizeStage(),this.updateScale(),this.updateScroll(),this.updateBGPosition()}constructor(r,i){this.store=r,this.keypressService=i,this.destroy$=new Oe,this.id="-42",this.moveUpdater=new Oe,this.zoom=1,this.scroll={x:.5,y:.5},this.scrollUpdater=new Oe,console.log("constructor");let o=this;this.scrollHandler=function(s){o.onScroll(s)}}initSubs(){this.store.activeFile$.pipe(vt(this.destroy$)).subscribe(s=>{this.imageFile=s;let a=this.store.store.query(Wo());a&&(this.id=a.id),this.drawStageBG(),this.updateScale(),this.updateScroll(),this.updateBGPosition()}),this.store.zoom$.pipe(vt(this.destroy$)).subscribe(s=>{this.zoom=s||1,this.updateScale(),this.updateScroll(),this.updateBGPosition(),this.updateTransformerText()}),this.store.scroll$.pipe(vt(this.destroy$)).subscribe(s=>{this.scroll=s,this.updateScale(),this.updateScroll(),this.updateBGPosition()}),this.scrollRef.nativeElement.addEventListener("scroll",this.scrollHandler);let i=0;this.scrollUpdater.pipe(Fn(i),vt(this.destroy$)).subscribe(s=>{let a=s.x,c=s.y;this.store.updateScroll(this.image.id,a,c)}),this.store.selectedCut$.pipe(vt(this.destroy$)).subscribe(s=>{this.selectedCut=s,this.showTransformerText(!!s),this.updateSelectedCut()}),this.store.nonSelectedCuts$.pipe(vt(this.destroy$)).subscribe(s=>{this.nonSelectedCuts=s,this.updateNonSelectedCuts()}),this.keypressService.keyDownRepeat$.pipe(vt(this.destroy$)).subscribe(s=>{});let o=150;this.moveUpdater.pipe(Ad(o),vt(this.destroy$)).subscribe(s=>{this.store.updateCut(this.id,s)})}ngAfterViewInit(){return Bt(this,null,function*(){console.log("ngAfterViewInit"),this.stage||(this.initStage(),this.resizeStage(),this.initTransformer(),this.initTransformerText(),this.initHoverText()),this.initSubs()})}ngOnChanges(r){return Bt(this,null,function*(){})}ngOnDestroy(){this.destroy$.next(1),this.destroy$.complete()}handleKeypress(r){switch(r){case"ArrowUp":{this.moveSelectedCut(0,-1);break}case"ArrowDown":{this.moveSelectedCut(0,1);break}case"ArrowLeft":{this.moveSelectedCut(-1,0);break}case"ArrowRight":{this.moveSelectedCut(1,0);break}default:break}}initStage(){console.log("initStage"),this.stage=new rt.default.Stage({height:300,width:300,container:"konva"});let r=new rt.default.Layer({imageSmoothingEnabled:!1});this.layerBG=r,this.stage.add(this.layerBG),this.layerCuts=new rt.default.Layer,this.stage.add(this.layerCuts),this.layerSelected=new rt.default.Layer,this.stage.add(this.layerSelected);let i=this;this.stage.on("wheel",function(o){let s=o.evt;i.onMouseWheel(s)})}resizeStage(){let r=window.innerHeight,i=window.innerWidth,o=24,s=r-32-48-32-32-2*o,a=i-48-240-2*o;this.stage.height(s),this.stage.width(a)}drawStageBG(){if(!this.imageFile)return;let r=this.layerBG;this.layerBG.findOne("#bg")&&r.destroyChildren();let o=this.imageFile,s=this,a=this.stage;rt.default.Image.fromURL(o.dataURL,function(c){let l=o.width/2,u=o.height/2;c.setAttrs({x:l,y:u,scaleX:1,scaleY:1,offsetX:l,offsetY:u,id:"bg"}),s.bgImageRef=c,a.offset({x:l,y:u}),c.on("pointerclick",function(){let f=a.getPointerPosition();s.store.selectCut(s.id,void 0)}),r.add(c)})}getStageCenter(){let r=this.stage.width()/2,i=this.stage.height()/2;return{x:r,y:i}}getRelativePointerCoords(){return this.bgImageRef?this.bgImageRef.getRelativePointerPosition():null}updateScale(){if(!this.largeRef||!this.imageFile)return;let r=this.zoom,i=24,o=this.imageFile,s=o.width*r+2*i,a=o.height*r+2*i,c=this.largeRef.nativeElement;c.style.width=`${s}px`,c.style.height=`${a}px`}updateScroll(){if(this.scrollRef){let r=this.scrollRef.nativeElement;r.removeEventListener("scroll",this.scrollHandler);let i=(r.scrollWidth-r.clientWidth)*this.scroll.x;r.scrollLeft=i;let o=(r.scrollHeight-r.clientHeight)*this.scroll.y;r.scrollTop=o,r.addEventListener("scroll",this.scrollHandler)}}onScroll(r){let i=this.scrollRef.nativeElement,o=0;i.scrollWidth===i.clientWidth?o=this.image.meta.scrollX:o=i.scrollLeft/(i.scrollWidth-i.clientWidth);let s=0;i.scrollHeight===i.clientHeight?s=this.image.meta.scrollY:s=i.scrollTop/(i.scrollHeight-i.clientHeight),(this.image.meta.scrollX!=o||this.image.meta.scrollY!=s)&&(this.scroll={x:o,y:s},this.scrollUpdater.next(this.scroll),this.updateScale(),this.updateScroll(),this.updateBGPosition())}updateBGPosition(){if(!this.scrollRef)return;let r=this.scrollRef.nativeElement,i=this.getStageCenter(),o=this.zoom;this.stage.scale({x:o,y:o});let s=this.scroll.x,a=this.scroll.y,c=i.x;r.scrollWidth===r.clientWidth||(c=i.x+(.5-s)*(r.scrollWidth-r.clientWidth)),this.stage.x(c);let l=i.y;r.scrollHeight===r.clientHeight||(l=i.y+(.5-a)*(r.scrollHeight-r.clientHeight)),this.stage.y(l)}initTransformer(){let r=new rt.default.Transformer({ignoreStroke:!0,rotateEnabled:!1,flipEnabled:!1,enabledAnchors:["middle-right","bottom-center","bottom-right"],keepRatio:!1,shiftBehavior:"keepRatio"});this.transformer=r;let i=new rt.default.Text({x:0,y:0,draggable:!1}),o=function(){let h=["x: "+a.x(),"y: "+a.y(),"rotation: "+a.rotation(),"width: "+a.width(),"height: "+a.height(),"scaleX: "+a.scaleX(),"scaleY: "+a.scaleY()];i.text(h.join(`
`))},s=function(){},a=new rt.default.Rect({x:0,y:50,width:10,height:10,stroke:"#00A5A5",strokeWidth:5,strokeScaleEnabled:!1,id:"cut1",draggable:!0});this.rect=a,this.layerSelected.add(a),r.nodes([a]),this.layerSelected.add(r),o(),s();let c=this,l=function(){c.updateSelectedCutStore()};a.on("mouseenter",function(){c.updateCursor("move")}),a.on("mouseleave",function(){c.updateCursor("default")}),a.on("dragmove",function(){let h=Math.round(a.x()),g=Math.round(a.y());a.x(h),a.y(g),o(),s(),c.updateTransformerText()}),a.on("dragend",function(){l()});let u=0,f=0,d=function(){let h=Math.round(a.x()),g=Math.round(a.y()),v=Math.max(2,Math.round(a.width()*a.scaleX())),b=Math.max(2,Math.round(a.height()*a.scaleY()));a.scaleX(1),a.scaleY(1),a.width(v),a.height(b),a.x(h),a.y(g)};a.on("transformstart",function(){u=a.x(),f=a.y()}),a.on("transform",function(){r.getActiveAnchor()&&(d(),o(),s(),c.updateTransformerText())}),a.on("transformend",function(){l()})}initTransformerText(){let r=this.transformer,i={x:0,y:0,draggable:!1,fontFamily:"Inter",fontSize:16,fill:"orange",padding:0},o=new rt.default.Text(i);this.transformerTextOrigin=o,this.layerSelected.add(o);let s=new rt.default.Text(i);this.transformerTextY=s,this.layerSelected.add(s);let a={x:0,y:0},c={fill:"#24262B"};{let l=new rt.default.Label(a);this.transformerLabelOrigin=l,this.layerSelected.add(l);let u=new rt.default.Tag(c);l.add(u);let f=new rt.default.Text(i);this.transformerTextOrigin=f,l.add(f)}{let l=new rt.default.Label(a);this.transformerLabelX=l,this.layerSelected.add(l);let u=new rt.default.Tag(c);l.add(u);let f=new rt.default.Text(i);this.transformerTextX=f,l.add(f)}{let l=new rt.default.Label(a);this.transformerLabelY=l,this.layerSelected.add(l);let u=new rt.default.Tag(c);l.add(u);let f=new rt.default.Text(i);this.transformerTextY=f,l.add(f)}}showTransformerText(r){let i=this.layerSelected,o=this.transformerLabelOrigin,s=this.transformerLabelX,a=this.transformerLabelY;r?(i.add(o),i.add(s),i.add(a)):(o.remove(),s.remove(),a.remove())}updateTransformerText(){let r=this.rect,i=this.zoom,s=Math.max(16/i,5);{let a=this.transformerTextOrigin,c=this.transformerLabelOrigin,l=["x:"+r.x(),"y:"+r.y()];a.text(l.join(`
`)),a.fontSize(s),c.x(r.x()),c.y(r.y());let u=1;c.offsetY(c.height()+u),c.offsetX(c.width()+u)}{let a=this.transformerTextX,c=this.transformerLabelX,l=r.width();a.text(`${l}`),a.fontSize(s),c.x(r.x()+l/2),c.y(r.y());let u=2;c.offsetX(c.width()/2),c.offsetY(c.height()+u)}{let a=this.transformerTextY,c=this.transformerLabelY,l=r.height();a.text(`${l}`),a.fontSize(s),c.x(r.x()),c.y(r.y()+l/2);let u=2;c.offsetX(c.width()+u)}}updateSelectedCut(){let r=this.layerSelected,i=this.rect;i.remove();let o=this.transformer;o.remove();let s=this.selectedCut;if(s){if(s.type==="absolute"){let a=s.absolute;i.x(a.x),i.y(a.y),i.width(a.width),i.height(a.height)}else{let a=s.relative;return}r.add(i),r.add(o),this.updateTransformerText()}}updateSelectedCutStore(){let r=this.selectedCut,i=this.rect;if(!r)return;let o=T({},r);r.type==="absolute"&&(o.absolute.x=i.x(),o.absolute.y=i.y(),o.absolute.height=i.height(),o.absolute.width=i.width(),this.store.updateCut(this.id,o))}moveSelectedCut(r,i){let o=this.selectedCut;if(!o)return;let s=T({},o);o.type==="absolute"&&(s.absolute.x=s.absolute.x+r,s.absolute.y=s.absolute.y+i,this.moveUpdater.next(s),this.selectedCut=s,this.updateSelectedCut())}updateNonSelectedCuts(){let r=this.layerCuts;r.removeChildren();let i=r.find(""),o=this.nonSelectedCuts;if(!o||o.length<1)return;let s={stroke:"#171719",strokeWidth:3,strokeScaleEnabled:!1,id:"123",draggable:!1},a=this;o.forEach(c=>{if(c.type==="absolute"&&c.visible){let l=c.absolute,u=new rt.default.Rect(Se(T({},s),{x:l.x,y:l.y,width:l.width,height:l.height,id:c.id}));u.dash([8,1]),u.setAttr("cut",c),u.on("mouseenter",function(){a.updateCursor("pointer"),a.updateHoverLabel(u),u.stroke("#00A5A5")}),u.on("mouseleave",function(){a.updateCursor("default"),a.updateHoverLabel(void 0),u.stroke("#171719")}),u.on("pointerclick",function(f){a.onRectPointerClick(c)}),r.add(u)}})}updateCursor(r){this.stage.container().style.cursor=r}onRectPointerClick(r){this.updateHoverLabel(void 0),this.store.selectCut(this.id,r)}initHoverText(){let r=this.layerCuts,i=new rt.default.Label({});this.hoverLabel=i;let o=new rt.default.Tag({fill:"#24262B",pointerDirection:"down",pointerWidth:3,pointerHeight:3,lineJoin:"round"});this.hoverTag=o,i.add(o);let s=new rt.default.Text({x:0,y:0,draggable:!1,fontFamily:"Inter",fontSize:16,fill:"orange",padding:0});this.hoverText=s,i.add(s)}updateHoverLabel(r){let i=this.layerCuts,o=this.hoverLabel,s=this.hoverTag,a=this.hoverText;if(o.remove(),s.remove(),a.remove(),!r)return;let c=r.getAttr("cut");a.text(c.name);let l=this.zoom,f=Math.max(16/l,5);a.fontSize(f);let d=2;o.x(r.x()+r.width()/2),o.y(r.y()),o.add(s),o.add(a),i.add(o)}onMouseWheel(r){let i=r.deltaX,o=r.deltaY;this.keypressService.isKeyPressed("Shift")?this.handleWheel(o,0):this.handleWheel(0,o)}handleWheel(r,i){if(!this.scrollRef)return;let o=this.scrollRef.nativeElement,s=o.scrollWidth-o.clientWidth,a=o.scrollHeight-o.clientHeight,c=this.image.meta.scrollX,l=this.image.meta.scrollY,u=this.image.meta.scrollX,f=this.image.meta.scrollY;if(s>0&&Math.abs(r)>0){let d=.069*Math.sign(r);u=Math.min(Math.max(c+d,0),1)}if(a>0&&Math.abs(i)>0){let d=.069*Math.sign(i);f=Math.min(Math.max(l+d,0),1)}(this.image.meta.scrollX!=u||this.image.meta.scrollY!=f)&&(this.scroll={x:u,y:f},this.scrollUpdater.next(this.scroll),this.updateScale(),this.updateScroll(),this.updateBGPosition())}};e.\u0275fac=function(i){return new(i||e)(X(Te),X(e8))},e.\u0275cmp=ae({type:e,selectors:[["app-canvas"]],viewQuery:function(i,o){if(i&1&&(ur(JO,5),ur(eR,5)),i&2){let s;Gn(s=zn())&&(o.scrollRef=s.first),Gn(s=zn())&&(o.largeRef=s.first)}},hostBindings:function(i,o){i&1&&ie("resize",function(a){return o.onResize(a)},!1,Pc)},inputs:{image:"image"},standalone:!0,features:[Sn,de],decls:5,vars:0,consts:[["id","konva",1,"konva"],["id","scroll-container",3,"wheel"],["scroll",""],["id","large-container"],["large",""]],template:function(i,o){i&1&&(H(0,"div",0),x(1,"div",1,2),ie("wheel",function(a){return o.onMouseWheel(a)}),H(3,"div",3,4),A())},dependencies:[oe],styles:["#scroll-container[_ngcontent-%COMP%]{display:block;width:100%;height:100%;overflow:auto}#large-container[_ngcontent-%COMP%]{width:300px;height:300px;overflow:hidden}.konva[_ngcontent-%COMP%]{position:absolute;top:136px;left:72px}"]});let t=e;return t})();function tR(t,e){if(t&1&&(Ze(0),H(1,"app-canvas",2),Qe()),t&2){let n=e.ngIf;z(1),G("image",n)}}function nR(t,e){t&1&&(x(0,"div",3),H(1,"app-new-image",4),A())}var n8=(()=>{let e=class e{constructor(r){this.store=r,this.active$=r.active$}};e.\u0275fac=function(i){return new(i||e)(X(Te))},e.\u0275cmp=ae({type:e,selectors:[["app-main"]],standalone:!0,features:[de],decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["newImage",""],[3,"image"],[1,"container","grid"],[1,"place"]],template:function(i,o){if(i&1&&(ce(0,tR,2,1,"ng-container",0),Je(1,"async"),ce(2,nR,2,0,"ng-template",null,1,ot)),i&2){let s=Ye(3);G("ngIf",et(1,2,o.active$))("ngIfElse",s)}},dependencies:[oe,bt,Tt,J6,t8],styles:[".container[_ngcontent-%COMP%]{width:100%;height:100%}.grid[_ngcontent-%COMP%]{display:grid}.place[_ngcontent-%COMP%]{place-self:center}"]});let t=e;return t})();var r8=(()=>{let e=class e{constructor(r){this.store=r}onDrop(r){return Bt(this,null,function*(){if(r.preventDefault(),console.log("onDrop"),r.dataTransfer?.files){let i=r.dataTransfer.files;this.store.openFileList(i)}this.store.updateShowDropzone(!1)})}onDragOver(r){r.stopPropagation(),r.preventDefault(),this.store.store.getValue().showDropzone||this.store.updateShowDropzone(!0)}onDragLeave(r){this.store.updateShowDropzone(!1)}};e.\u0275fac=function(i){return new(i||e)(X(Te))},e.\u0275cmp=ae({type:e,selectors:[["app-drop-image"]],standalone:!0,features:[de],decls:2,vars:0,consts:[[1,"dropzone",3,"drop","dragover","dragleave"]],template:function(i,o){i&1&&(x(0,"div",0),ie("drop",function(a){return o.onDrop(a)})("dragover",function(a){return o.onDragOver(a)})("dragleave",function(a){return o.onDragLeave(a)}),J(1,"Drop to open File(s)"),A())},dependencies:[oe],styles:[".dropzone[_ngcontent-%COMP%]{position:fixed;z-index:1;left:0;top:0;width:100%;height:100%;background-color:#000;background-color:#0009;display:grid;align-items:center;justify-content:center;font-size:52px}"]});let t=e;return t})();function rR(t,e){t&1&&at(0)}function iR(t,e){if(t&1){let n=Ot();x(0,"div",3),ie("click",function(i){Ne(n);let o=Z();return Fe(o.onClose(i))}),_t(),x(1,"svg",4)(2,"g",5),H(3,"path",6),A(),x(4,"defs")(5,"clipPath",7),H(6,"rect",8),A()()()()}}var i8=(()=>{let e=class e{constructor(r){this.store=r,this.selected=!0}onClick(){this.selected||this.store.setActiveImage(this.image.id)}onClose(r){r.preventDefault(),r.stopPropagation(),this.store.closeImage(this.image.id)}};e.\u0275fac=function(i){return new(i||e)(X(Te))},e.\u0275cmp=ae({type:e,selectors:[["app-tabs"]],inputs:{image:"image",selected:"selected"},standalone:!0,features:[de],decls:6,vars:6,consts:[[1,"tab",3,"tooltip","position","click"],[4,"ngTemplateOutlet"],["closeTemplate",""],[1,"svg-container",3,"click"],["width","130","height","127","viewBox","0 0 130 127","fill","none","xmlns","http://www.w3.org/2000/svg"],["clip-path","url(#clip0_1_1098)"],["d","M62.3646 76.0631C51.1449 86.1077 40.1729 95.837 29.3108 105.688C23.0181 111.394 16.9507 117.348 10.6727 123.07C9.00056 124.633 7.07912 125.904 4.98761 126.829C3.95624 127.262 1.72909 126.829 1.22118 126.036C0.549153 124.983 0.747845 123.114 1.11236 121.74C1.37755 120.738 2.45728 119.909 3.27184 119.104C18.7625 103.852 34.2602 88.6096 49.7646 73.377C51.5043 71.6685 53.294 70.0121 55.2928 68.1149C48.5172 60.6057 41.7311 53.3598 35.2527 45.8445C24.9131 33.8447 14.7811 21.6664 4.5633 9.56263C4.19187 9.12275 3.87237 8.64128 3.49748 8.2014C1.70944 6.08771 0.448859 3.80952 2.48481 1.24556C4.0094 -0.674173 7.65404 -0.387446 10.1919 2.22415C16.5122 8.72629 22.669 15.386 28.7743 22.0968C39.9223 34.3434 50.9834 46.6697 62.0917 58.9527C62.5673 59.3995 63.0729 59.8129 63.6051 60.19C72.1946 51.9803 80.6889 43.7974 89.2543 35.6846C99.1879 26.2808 109.156 16.914 119.16 7.5841C122.912 4.07715 125.921 3.44504 128.223 5.49119C130.61 7.61095 130.388 11.1524 126.582 14.9494C116.292 25.2166 105.754 35.2344 95.2266 45.2634C87.2063 52.9059 79.0581 60.4168 70.5221 68.3997C77.4583 75.5738 84.0924 82.7244 91.0477 89.5444C97.7282 96.095 104.782 102.266 111.594 108.681C114.257 111.095 116.751 113.691 119.058 116.449C120.918 118.764 121.193 121.637 118.906 123.919C116.652 126.171 114.043 125.375 111.868 123.671C107.71 120.581 103.723 117.264 99.9272 113.736C88.3067 102.356 76.8911 90.7662 65.401 79.2521C64.4923 78.3429 63.624 77.3888 62.3646 76.0631Z","fill","white"],["id","clip0_1_1098"],["width","129","height","127","fill","white","transform","translate(0.777344)"]],template:function(i,o){if(i&1&&(x(0,"div",0),ie("click",function(){return o.onClick()}),x(1,"p"),J(2),A(),ce(3,rR,1,0,"ng-container",1),A(),ce(4,iR,7,0,"ng-template",null,2,ot)),i&2){let s=Ye(5);Hn("selected",o.selected),G("tooltip",o.image.file==null?null:o.image.file.name)("position","bottom"),z(2),Lr(" ",o.image.file==null?null:o.image.file.name,""),z(1),G("ngTemplateOutlet",s)}},dependencies:[oe,qn,Kn,Eo],styles:[".tab[_ngcontent-%COMP%]{padding:0 28px 0 10px;color:#ffffff80;cursor:pointer;overflow:hidden;position:relative;min-width:26px;max-width:250px}.tab[_ngcontent-%COMP%]:hover{color:#ffffffe6}.tab[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;line-height:32px;margin:0;padding:0;height:32px}.selected[_ngcontent-%COMP%]{color:#ffffffe6;cursor:default;background-color:var(--background-tools)}.svg-container[_ngcontent-%COMP%]{height:32px;width:32px;position:absolute;top:0;right:0;cursor:pointer}svg[_ngcontent-%COMP%]{height:18px;width:18px;margin-left:7px;margin-top:7px;display:none}.tab[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{display:block}"]});let t=e;return t})();function oR(t,e){if(t&1&&(Ze(0),H(1,"app-tabs",11),Qe()),t&2){let n=e.$implicit,r=Z(2).ngIf;z(1),G("image",n)("selected",n.id===r)}}function sR(t,e){if(t&1&&(Ze(0),ce(1,oR,2,2,"ng-container",10),Qe()),t&2){let n=e.ngIf;z(1),G("ngForOf",n)}}function aR(t,e){if(t&1){let n=Ot();Ze(0),ce(1,sR,2,1,"ng-container",2),Je(2,"async"),x(3,"div",3),ie("click",function(){Ne(n);let i=Z();return Fe(i.onClick())}),_t(),x(4,"svg",4)(5,"g",5),H(6,"path",6)(7,"path",7),A(),x(8,"defs")(9,"clipPath",8),H(10,"rect",9),A()()()(),Qe()}if(t&2){let n=e.ngIf,r=Z();z(1),G("ngIf",et(2,3,r.imagesOpen$)),z(2),Hn("selected",n==="-1")}}var o8=(()=>{let e=class e{constructor(r){this.store=r,this.active$=r.active$,this.imagesOpen$=r.imagesOpen$,this.activeID$=r.active$.pipe(ee(i=>i?i.id:"-1"))}onClick(){this.store.setActiveImage("-1")}};e.\u0275fac=function(i){return new(i||e)(X(Te))},e.\u0275cmp=ae({type:e,selectors:[["app-tabbar"]],standalone:!0,features:[de],decls:4,vars:3,consts:[[1,"container"],[1,"tabs"],[4,"ngIf"],[1,"adder",3,"click"],["width","138","height","164","viewBox","0 0 138 164","fill","none","xmlns","http://www.w3.org/2000/svg"],["clip-path","url(#clip0_1_589)"],["d","M137.273 82.673C137.273 97.0745 137.192 111.477 137.315 125.878C137.257 131.183 136.718 136.472 135.704 141.679C135.346 143.92 134.553 146.067 133.372 148.001C128.405 155.697 121.501 160.577 112.222 161.587C91.9284 163.816 71.465 164.02 51.1311 162.199C43.2342 161.486 35.2579 161.444 27.5523 159.315C23.8951 158.401 20.3171 157.194 16.8527 155.706C7.92056 151.593 2.80505 144.479 1.616 134.664C1.2437 131.655 1.05786 128.625 1.05958 125.593C1.16944 96.0341 1.35943 66.472 1.47704 36.911C1.53559 30.8429 2.38153 24.808 3.99348 18.959C5.06943 14.908 7.15491 11.1983 10.0538 8.17847C13.7054 4.23851 18.7609 1.90477 24.1195 1.68615C34.3047 1.17405 44.4892 0.555105 54.6821 0.331468C64.5003 0.116259 74.3316 0.206058 84.1504 0.425156C90.9403 0.576192 97.7296 1.06481 104.498 1.64627C106.373 1.80769 108.171 2.46653 109.709 3.55485C119.117 10.6029 127.839 18.4142 135.282 27.5846C136.961 29.6492 137.818 32.2647 137.688 34.9258C137.483 49.3241 137.407 63.7254 137.289 78.1251C137.277 79.6412 137.289 81.1568 137.289 82.673H137.273ZM12.4344 82.203C11.3675 98.0702 11.2945 113.953 11.2712 129.836C11.3269 133.244 11.8445 136.628 12.8099 139.896C13.3125 141.922 14.2457 143.815 15.5454 145.445C16.8452 147.076 18.4808 148.405 20.3404 149.343C22.3187 150.443 24.4302 151.281 26.6223 151.839C31.7689 152.976 36.9239 154.064 42.2352 154.358C62.9437 155.613 83.7077 155.647 104.421 154.461C107.053 154.297 109.695 154.112 112.299 153.717C115.3 153.231 118.098 151.891 120.362 149.857C123.238 147.384 125.384 144.168 126.566 140.557C128.419 135.061 128.44 129.408 128.44 123.727C128.436 99.141 128.432 74.5553 128.429 49.9698C128.429 46.9439 128.419 43.9173 128.343 40.8947C128.278 38.3095 126.856 37.0384 123.956 36.9528C118.679 36.7972 113.397 36.7643 108.123 36.5166C106.252 36.3845 104.402 36.0368 102.611 35.4797C101.691 35.243 100.858 34.7459 100.212 34.0478C99.5655 33.3498 99.1325 32.4801 98.9651 31.5423C98.6394 29.6825 98.4785 27.7972 98.4843 25.909C98.4326 21.3773 98.4902 16.8445 98.5134 12.3115C98.5173 11.5064 97.272 9.87169 96.598 9.77122C95.8626 9.61065 95.1175 9.49851 94.3679 9.43635C76.2697 9.17706 58.1707 8.9376 40.0716 8.71721C37.0615 8.68545 34.0476 9.00009 31.0342 9.13881C27.2124 9.31383 23.6077 10.4446 20.0871 11.802C17.589 12.7597 15.5152 14.5825 14.2407 16.9409C12.5838 19.9486 11.4509 23.1169 11.8393 26.6743C12.2496 30.434 12.8577 34.2002 12.8513 37.9631C12.8241 52.7076 12.5902 67.4553 12.4344 82.203ZM109.153 17.636C108.763 18.2309 108.47 18.8853 108.288 19.5736C108.114 21.4243 108.067 23.2915 108.076 25.1525C108.05 25.6142 108.116 26.0763 108.272 26.5117C108.427 26.9469 108.668 27.3468 108.98 27.6871C109.292 28.0276 109.669 28.3017 110.088 28.4937C110.507 28.6856 110.961 28.7913 111.422 28.8045C114.007 28.8466 116.595 28.7452 119.18 28.6544C119.332 28.6177 119.473 28.5453 119.592 28.443C119.711 28.3407 119.803 28.2111 119.863 28.0657C119.927 27.8917 119.956 27.7067 119.947 27.5213C119.94 27.3359 119.895 27.1536 119.816 26.9858C117.187 23.3863 113.949 20.2784 110.247 17.8043C109.975 17.615 109.523 17.6865 109.153 17.636Z","fill","white"],["d","M52.63 92.2501C56.3898 92.2501 60.1495 92.2806 63.9086 92.2346C64.652 92.1568 65.3482 91.8333 65.887 91.3134C66.4254 90.7936 66.7756 90.1084 66.8809 89.3662C67.1226 84.4663 67.2635 79.5612 67.5556 74.6652C67.6028 72.7853 67.9072 70.9211 68.4603 69.1242C68.6348 68.5836 68.9683 68.1091 69.4174 67.7636C69.8672 67.4174 70.4106 67.2171 70.9761 67.1886C71.5415 67.1601 72.1025 67.3046 72.5845 67.6035C73.066 67.9016 73.446 68.3405 73.6728 68.861C74.2705 70.2404 74.5969 71.7223 74.6337 73.2255C74.9232 76.9903 75.0447 80.7688 75.2696 84.5389C75.3375 85.6674 75.5094 86.7908 75.6625 87.9096C76.027 90.581 77.5618 92.1717 80.0375 92.1574C83.7972 92.1354 87.5557 91.8981 91.3154 91.8612C94.3107 91.834 97.3615 91.7691 100.104 93.2309C100.583 93.4856 100.757 94.4366 100.925 95.1042C100.954 95.2922 100.939 95.4847 100.882 95.6662C100.825 95.8471 100.726 96.0131 100.595 96.1505C100.072 96.6898 99.4197 97.0846 98.6998 97.2972C96.4716 97.6018 94.2189 97.7788 91.9707 97.8773C87.8348 98.0575 83.6951 98.1113 79.5599 98.2896C78.6235 98.3881 77.7537 98.8218 77.1088 99.5102C76.4645 100.199 76.0884 101.098 76.0496 102.042C75.7265 107.696 75.5042 113.355 75.1623 119.007C75.0492 120.876 74.7184 122.734 74.4366 124.589C74.2499 125.82 72.2136 127.291 71.095 127.104C69.884 126.901 68.1379 125.324 67.9834 124.155C67.7378 122.293 67.4664 120.423 67.4018 118.55C67.2008 112.893 67.1116 107.232 66.9359 101.573C66.868 100.825 66.5514 100.122 66.037 99.577C65.5226 99.0312 64.8399 98.6746 64.0992 98.5651C59.5911 98.3278 55.0792 98.1625 50.5718 97.9169C47.5701 97.7516 44.5703 97.5286 41.575 97.2622C40.0241 97.1254 38.2664 95.2806 38.753 94.3452C38.9799 93.8422 39.3438 93.4137 39.8026 93.1084C40.2614 92.8037 40.7967 92.6339 41.3469 92.6203C45.106 92.5872 48.8658 92.6086 52.6249 92.6086L52.63 92.2501Z","fill","white"],["id","clip0_1_589"],["width","137","height","164","fill","white","transform","translate(0.777344)"],[4,"ngFor","ngForOf"],[3,"image","selected"]],template:function(i,o){i&1&&(x(0,"div",0)(1,"div",1),ce(2,aR,11,5,"ng-container",2),Je(3,"async"),A()()),i&2&&(z(2),G("ngIf",et(3,1,o.activeID$)))},dependencies:[oe,Kc,bt,Tt,i8],styles:[".container[_ngcontent-%COMP%]{width:100%;border:1px solid rgba(0,0,0,.5)}.tabs[_ngcontent-%COMP%]{width:100%;display:grid;grid-auto-flow:column;grid-auto-columns:minmax(64px,250px)}.tabs-drop[_ngcontent-%COMP%]{width:64px;text-align:center;line-height:32px}app-tabs[_ngcontent-%COMP%]{border-right:1px solid rgba(0,0,0,.5)}.adder[_ngcontent-%COMP%]{width:64px;border-right:1px solid rgba(0,0,0,.5);text-align:center;cursor:pointer}.adder[_ngcontent-%COMP%] > svg[_ngcontent-%COMP%]{height:24px;width:auto;margin-top:4px}.adder[_ngcontent-%COMP%] > svg[_ngcontent-%COMP%] > g[_ngcontent-%COMP%] > path[_ngcontent-%COMP%]{fill:#ffffff80}.adder[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%] > g[_ngcontent-%COMP%] > path[_ngcontent-%COMP%]{fill:#ffffffe6}.selected[_ngcontent-%COMP%]{cursor:default;background-color:var(--background-tools)}.selected[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%] > g[_ngcontent-%COMP%] > path[_ngcontent-%COMP%]{fill:#ffffffe6}"]});let t=e;return t})();function cR(t,e){if(t&1){let n=Ot();Ze(0),x(1,"div",5)(2,"span"),J(3,"Pos: "),A(),x(4,"div",6)(5,"span"),J(6,"X"),A(),x(7,"input",7),ie("change",function(i){Ne(n);let o=Z().ngIf,s=Z();return Fe(s.inputChange(i,"posX",o))})("input",function(i){Ne(n);let o=Z().ngIf,s=Z();return Fe(s.input(i,"posX",o))}),A()(),x(8,"div",6)(9,"span"),J(10,"Y"),A(),x(11,"input",8),ie("change",function(i){Ne(n);let o=Z().ngIf,s=Z();return Fe(s.inputChange(i,"posY",o))})("input",function(i){Ne(n);let o=Z().ngIf,s=Z();return Fe(s.input(i,"posY",o))}),A()()(),x(12,"div",9)(13,"span"),J(14,"Size: "),A(),x(15,"div",6)(16,"span"),J(17,"W"),A(),x(18,"input",10),ie("change",function(i){Ne(n);let o=Z().ngIf,s=Z();return Fe(s.inputChange(i,"sizeX",o))})("input",function(i){Ne(n);let o=Z().ngIf,s=Z();return Fe(s.input(i,"sizeX",o))}),A()(),x(19,"div",6)(20,"span"),J(21,"H"),A(),x(22,"input",11),ie("change",function(i){Ne(n);let o=Z().ngIf,s=Z();return Fe(s.inputChange(i,"sizeY",o))})("input",function(i){Ne(n);let o=Z().ngIf,s=Z();return Fe(s.input(i,"sizeY",o))}),A()()(),Qe()}if(t&2){let n=Z().ngIf;z(7),G("value",n.absolute.x),z(4),G("value",n.absolute.y),z(7),G("value",n.absolute.width),z(4),G("value",n.absolute.height)}}function lR(t,e){t&1&&(Ze(0),x(1,"div",5)(2,"div"),J(3,"Posss: "),A()(),x(4,"div",9)(5,"div"),J(6,"Sizess: "),A()(),Qe())}function uR(t,e){if(t&1&&(Ze(0),x(1,"div",1),H(2,"div",2),x(3,"div",3)(4,"div"),J(5,"Type: "),A(),x(6,"button"),J(7,"Absolute"),A(),x(8,"button"),J(9,"Relative"),A()(),ce(10,cR,23,4,"ng-container",0)(11,lR,7,0,"ng-container",0),H(12,"div",4),A(),Qe()),t&2){let n=e.ngIf;z(6),Hn("selected",n.type==="absolute"),z(2),Hn("selected",n.type==="relative"),z(2),G("ngIf",n.type==="absolute"),z(1),G("ngIf",n.type==="relative")}}var s8=(()=>{let e=class e{constructor(r){this.store=r,this.selectedCut$=r.selectedCut$}inputChange(r,i,o){}input(r,i,o){let s=r.target,a=s.id,c=Math.min(Number(s.max),Math.max(Number(s.min),Number(s.value)));this.changeStoreValues(a,o,c),s.value=String(c)}changeStoreValues(r,i,o){let s=T({},i);switch(r){case"posX":{s.absolute.x=o;break}case"posY":{s.absolute.y=o;break}case"sizeX":{s.absolute.width=o;break}case"sizeY":{s.absolute.height=o;break}default:return}this.store.updateCut(this.active.id,s)}};e.\u0275fac=function(i){return new(i||e)(X(Te))},e.\u0275cmp=ae({type:e,selectors:[["app-toolbar-cuts"]],inputs:{active:"active"},standalone:!0,features:[de],decls:2,vars:3,consts:[[4,"ngIf"],[1,"container"],[1,"spacer"],[1,"type","flex"],[1,"buttons"],[1,"coords","flex"],[1,"input-box"],["type","number","id","posX","name","posX","min","0","max","9999",3,"value","change","input"],["type","number","id","posY","name","posY","min","0","max","9999",3,"value","change","input"],[1,"size","flex"],["type","number","id","sizeX","name","sizeX","min","1","max","9999",3,"value","change","input"],["type","number","id","sizeY","name","sizeY","min","1","max","9999",3,"value","change","input"]],template:function(i,o){i&1&&(ce(0,uR,13,6,"ng-container",0),Je(1,"async")),i&2&&G("ngIf",et(1,1,o.selectedCut$))},dependencies:[oe,bt,Tt],styles:[".container[_ngcontent-%COMP%]{height:48px;display:grid;grid-template-columns:repeat(5,max-content);gap:8px}.flex[_ngcontent-%COMP%]{display:flex;align-items:center}.spacer[_ngcontent-%COMP%]{width:80px}.type[_ngcontent-%COMP%]{line-height:32px}.type[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-right:4px}.type[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{height:32px;background-color:var(--background-header);color:#ffffff80;border:0;cursor:pointer}.type[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:hover{color:#ffffffe6}.type[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:nth-of-type(1){border-radius:5px 0 0 5px}.type[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:nth-of-type(2){margin-left:2px;border-radius:0 5px 5px 0}.type[_ngcontent-%COMP%] > button.selected[_ngcontent-%COMP%]{background-color:var(--accent);color:#fff}.flex[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{line-height:18px}.input-box[_ngcontent-%COMP%]{background-color:var(--background-header);border-radius:5px;padding:2.5px .5px 1.5px 6px;color:#ffffff80;margin-left:4px;border:1px solid rgba(255,255,255,.25)}.input-box[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{line-height:18px}input[_ngcontent-%COMP%]{margin-left:2px;width:3.25rem;height:20px;color:#ffffffe6;text-align:right;background:none;border:0;border-radius:0}input[_ngcontent-%COMP%]::-webkit-outer-spin-button, input[_ngcontent-%COMP%]::-webkit-inner-spin-button{margin-left:4px}input[_ngcontent-%COMP%]:focus{outline:none}"]});let t=e;return t})();function dR(t,e){if(t&1&&(Ze(0),H(1,"app-toolbar-cuts",1),Qe()),t&2){let n=e.ngIf;z(1),G("active",n)}}var a8=(()=>{let e=class e{constructor(r){this.store=r,this.active$=r.active$}};e.\u0275fac=function(i){return new(i||e)(X(Te))},e.\u0275cmp=ae({type:e,selectors:[["app-toolbar"]],standalone:!0,features:[de],decls:2,vars:3,consts:[[4,"ngIf"],[3,"active"]],template:function(i,o){i&1&&(ce(0,dR,2,1,"ng-container",0),Je(1,"async")),i&2&&G("ngIf",et(1,1,o.active$))},dependencies:[oe,bt,Tt,s8]});let t=e;return t})();function fR(t,e){t&1&&H(0,"app-drop-image")}var c8=(()=>{let e=class e{constructor(r){this.store=r,this.showDropzone$=r.showDropzone$,this.active$=r.active$}onDrop(r){r.preventDefault()}onDragOver(r){r.stopPropagation(),r.preventDefault(),this.store.store.getValue().showDropzone||this.store.updateShowDropzone(!0)}onDragLeave(r){}};e.\u0275fac=function(i){return new(i||e)(X(Te))},e.\u0275cmp=ae({type:e,selectors:[["app-layout"]],standalone:!0,features:[de],decls:12,vars:3,consts:[[1,"grid-container",3,"drop","dragover","dragleave"],[1,"header"],[1,"toolbar"],[1,"tools"],[1,"tabs"],[1,"layers"],[1,"main"],[1,"footer"],[4,"ngIf"]],template:function(i,o){i&1&&(x(0,"div",0),ie("drop",function(a){return o.onDrop(a)})("dragover",function(a){return o.onDragOver(a)})("dragleave",function(a){return o.onDragLeave(a)}),H(1,"app-header",1)(2,"app-toolbar",2),x(3,"div",3),J(4,"tools"),A(),H(5,"app-tabbar",4)(6,"app-layers",5)(7,"app-main",6),x(8,"div",7),J(9,"footer"),A()(),ce(10,fR,1,0,"app-drop-image",8),Je(11,"async")),i&2&&(z(10),G("ngIf",et(11,1,o.showDropzone$)))},dependencies:[oe,bt,Tt,S4,Q6,n8,r8,o8,a8],styles:['.grid-container[_ngcontent-%COMP%]{display:grid;grid-template-areas:"header header header" "toolbar toolbar toolbar" "tools tabs layers" "tools main layers" "tools footer layers";grid-template-rows:32px 48px 32px auto 32px;grid-template-columns:48px auto 240px;background-color:#2196f3;width:100vw;height:100vh;justify-content:stretch}.grid-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{text-align:center}.header[_ngcontent-%COMP%]{grid-area:header;background-color:var(--background-header)}.toolbar[_ngcontent-%COMP%]{grid-area:toolbar;background-color:var(--background-tools)}.tools[_ngcontent-%COMP%]{grid-area:tools;background-color:var(--background-tools)}.tabs[_ngcontent-%COMP%]{grid-area:tabs;background-color:var(--background-header)}.layers[_ngcontent-%COMP%]{grid-area:layers;background-color:var(--background-tools)}.main[_ngcontent-%COMP%]{grid-area:main;background-color:var(--background);overflow:auto}.footer[_ngcontent-%COMP%]{grid-area:footer;background-color:var(--background-header)}']});let t=e;return t})();var l8=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=ae({type:e,selectors:[["app-home"]],standalone:!0,features:[de],decls:1,vars:0,template:function(i,o){i&1&&H(0,"app-layout")},dependencies:[oe,c8]});let t=e;return t})();var u8=[{path:"",component:l8}];function hR(){console.log("Init devTools"),w4()}var d8={providers:[f4(u8),{provide:$c,useFactory:()=>hR()}]};var f8=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Nr({type:e}),e.\u0275inj=Pr({providers:[Te],imports:[oe]});let t=e;return t})();var h8=(()=>{let e=class e{constructor(r){this.store=r,this.title="ImageCutter"}};e.\u0275fac=function(i){return new(i||e)(X(Te))},e.\u0275cmp=ae({type:e,selectors:[["app-root"]],standalone:!0,features:[de],decls:2,vars:0,consts:[[1,"app-container"]],template:function(i,o){i&1&&(x(0,"div",0),H(1,"router-outlet"),A())},dependencies:[oe,_p,f8]});let t=e;return t})();Av(h8,d8).catch(t=>console.error(t));
