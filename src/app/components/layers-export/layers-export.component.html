<div class="container">
    <ng-container *ngIf="(activeCanvas$ | async) as activeCanvas">
        <ng-container *ngIf="(active$ | async) as active">
            <app-layer-box class="exports" [headerText]="'Export'">
                <ng-container *ngTemplateOutlet="exportActive"></ng-container>
                <ng-container *ngTemplateOutlet="exportAll"></ng-container>
                <ng-container *ngTemplateOutlet="exportAllVisible"></ng-container>
                <ng-container *ngTemplateOutlet="exportAs"></ng-container>


                <app-exporter #exporter [active]="active" [activeCanvas]="activeCanvas"></app-exporter>
            </app-layer-box>
            <div class="buttons">
            </div>
        </ng-container>
    </ng-container>
</div>

<ng-template #iconDownload>
    <svg class="icon-download" width="158" height="146" viewBox="0 0 158 146" fill="none"
        xmlns="http://www.w3.org/2000/svg">
        <g clip-path="url(#clip0_1_595)">
            <path
                d="M70.5401 108.42C69.3341 107.513 68.082 106.667 66.7903 105.886L66.5126 105.725C63.2038 103.799 59.7829 101.808 56.3218 100.016C55.4323 99.5558 54.5377 99.0461 53.6722 98.5518C51.2997 97.1984 48.8474 95.7998 46.035 95.128C45.9112 95.0982 45.7815 95.1047 45.6611 95.1467C45.5409 95.188 45.4351 95.263 45.3564 95.3631L44.0193 97.0511C43.9436 97.1468 43.8959 97.2617 43.8813 97.3832C43.8666 97.504 43.8857 97.6267 43.9363 97.7372C44.0285 97.9394 44.105 98.1449 44.1802 98.3445C44.3357 98.8438 44.5791 99.3116 44.8991 99.7257C52.1892 108.196 61.1181 115.77 73.8469 124.284C74.6234 124.777 75.4363 125.212 76.2778 125.586C77.3988 126.146 78.6321 126.45 79.8868 126.474C81.5716 126.453 83.1922 125.824 84.447 124.705C84.7155 124.479 84.9893 124.258 85.2631 124.038C85.8535 123.564 86.4633 123.073 87.0238 122.527C88.5698 121.024 90.123 119.526 91.6832 118.035C95.8191 114.066 100.095 109.961 104.095 105.722C106.574 102.979 108.877 100.084 110.993 97.055C111.699 96.086 112.405 95.1163 113.123 94.1609L113.203 94.0549C113.618 93.5136 114.588 92.2461 113.158 90.7647C113.04 90.6433 112.881 90.5709 112.711 90.5619C110.291 90.4424 108.679 91.8539 107.124 93.228C106.542 93.7681 105.924 94.2668 105.272 94.7197C102.835 96.3941 100.509 98.223 98.3097 100.196L97.9081 100.541C96.7838 101.505 95.6984 102.54 94.6487 103.539C93.6457 104.495 92.6077 105.483 91.5489 106.398C90.8197 107.028 90.1346 107.726 89.4729 108.4C88.2364 109.778 86.8136 110.977 85.2449 111.963C85.2358 111.891 85.2274 111.823 85.219 111.754C85.1314 111.196 85.0866 110.634 85.0847 110.07C85.1878 106.448 85.3001 102.827 85.422 99.2043C85.6095 93.4199 85.8035 87.4384 85.9313 81.5512C85.9715 79.7107 86.0131 77.8689 86.0565 76.0271C86.438 59.5536 86.8318 42.5255 85.3358 25.7872C84.7992 19.7792 83.889 13.7166 83.0093 7.85141L82.6402 5.38277C82.4157 4.44857 82.0037 3.56944 81.4283 2.7987C81.0766 2.23408 80.6783 1.59394 80.2326 0.777372C80.1723 0.667426 80.0827 0.576769 79.9731 0.515555C79.8635 0.454342 79.7389 0.424669 79.613 0.431018C79.4878 0.437367 79.3665 0.478926 79.264 0.550885C79.1608 0.622843 79.0804 0.722499 79.0324 0.837936C77.5136 4.44013 77.4643 7.54494 77.4209 10.2834C77.406 11.2402 77.3917 12.1449 77.3203 13.0429C77.1977 14.5881 77.0485 16.1315 76.8993 17.6735C76.7105 19.62 76.5159 21.633 76.3803 23.6214C76.1856 26.4852 76.0637 29.3992 75.9469 32.2165C75.9093 33.1106 75.871 34.0043 75.8327 34.8984L75.7912 35.8364C75.6413 39.2242 75.4869 42.7268 75.3734 46.1759C75.2689 49.3698 75.1885 52.7454 75.1223 56.7992C75.0795 59.3833 75.0574 61.9711 75.0354 64.5584L75.0029 68.0818C74.9913 69.2536 74.977 70.4255 74.9608 71.5974C74.9277 74.1434 74.8959 76.7765 74.8959 79.3683C74.8991 82.7024 74.9199 86.6509 75.0432 90.6646C75.0938 92.3262 75.1917 94.009 75.2871 95.639C75.3948 97.4827 75.5057 99.3858 75.5466 101.259C75.5719 102.388 75.6647 103.538 75.7542 104.65C76.026 107.03 76.0403 109.431 75.7964 111.814C73.9558 110.824 72.1984 109.689 70.5401 108.42Z"
                fill="white" />
            <path
                d="M154.191 82.8569C153.744 82.6101 153.249 82.4621 152.739 82.4234C152.229 82.3853 151.717 82.4576 151.238 82.6346C151.144 82.6605 151.057 82.7063 150.983 82.7684C150.909 82.831 150.85 82.9092 150.81 82.9971C149.077 86.744 148.595 106.975 148.244 121.748C148.106 127.519 147.995 132.177 147.842 134.43C147.03 134.507 146.264 134.589 145.533 134.666C143.717 134.86 142.147 135.025 140.568 135.063C134.253 135.213 126.785 135.366 119.282 135.366H119.171C114.222 135.366 109.273 135.373 104.323 135.386C88.7154 135.414 72.5762 135.446 56.7108 135.16C47.3609 134.99 37.8546 134.392 28.661 133.812C24.7951 133.567 20.7975 133.316 16.8634 133.102C16.1357 133.045 15.4118 132.947 14.6952 132.809C14.4357 132.765 14.1697 132.72 13.8901 132.675C13.8389 132.333 13.7843 131.996 13.7305 131.661C13.5519 130.672 13.4265 129.673 13.3548 128.67C13.1926 125.565 13.0584 122.459 12.9235 119.352C12.6886 113.938 12.446 108.34 12.0554 102.841C11.6402 96.9756 11.0485 87.1264 10.7339 81.78C10.6799 80.7722 10.2443 79.8212 9.51481 79.1203C8.78534 78.4194 7.8161 78.0195 6.80236 78.0014C5.76153 77.9794 4.75231 78.3574 3.98422 79.057C3.21613 79.7573 2.74817 80.7244 2.67751 81.7586C2.03719 91.7157 0.623532 116.375 1.3229 130.279L1.36772 131.235C1.391 133.381 1.63708 135.52 2.10209 137.617C3.0655 141.327 5.29401 142.99 9.55186 143.181C12.9312 143.333 16.31 143.511 19.6881 143.69C25.0728 143.975 30.6449 144.272 36.1308 144.446C48.1595 144.833 59.0509 145.054 69.4271 145.128C74.0521 145.162 78.6765 145.205 83.3015 145.257C91.5927 145.343 100.003 145.431 108.457 145.431C119.85 145.431 131.323 145.272 142.687 144.74C145.152 144.67 147.609 144.442 150.044 144.055C153.921 143.365 156.099 140.984 156.341 137.168C156.435 135.679 156.557 134.071 156.681 132.446C156.848 130.242 157.022 127.964 157.13 125.88C157.052 111.441 155.603 86.7369 155.324 84.7988C155.288 84.4125 155.169 84.0391 154.973 83.7038C154.777 83.3685 154.51 83.0791 154.191 82.8569Z"
                fill="white" />
        </g>
        <defs>
            <clipPath id="clip0_1_595">
                <rect width="157" height="146" fill="white" transform="translate(0.777344)" />
            </clipPath>
        </defs>
    </svg>
</ng-template>

<ng-template #exportActive>
    <!--  <div class="sub-container selected" [tooltip]="'download as .png'" [position]="'top'"> -->
    <div class="sub-container prevent-select" (click)="onClickSelected()">
        <div class="main">
            <div class="title">Download Selected</div>
            <div class="size">size: 548kb</div>
        </div>
        <div class="icon">
            <ng-container *ngTemplateOutlet="iconDownload"></ng-container>
        </div>
    </div>
</ng-template>

<ng-template #exportAll>
    <!--  <div class="sub-container selected" [tooltip]="'download as .png'" [position]="'top'"> -->
    <div class="sub-container prevent-select" (click)="onClickAll()">
        <div class="main">
            <div class="title">Download All</div>
            <div class="size">size: 2.48mb</div>
        </div>
        <div class="icon">
            <ng-container *ngTemplateOutlet="iconDownload"></ng-container>
        </div>
    </div>
</ng-template>


<ng-template #exportAllVisible>
    <!--  <div class="sub-container selected" [tooltip]="'download as .png'" [position]="'top'"> -->
    <div class="sub-container prevent-select" (click)="onClickAllVisible()">
        <div class="main">
            <div class="title">Download All Visible</div>
            <div class="size">size: 1.69</div>
        </div>
        <div class="icon">
            <ng-container *ngTemplateOutlet="iconDownload"></ng-container>
        </div>
    </div>
</ng-template>


<ng-template #exportAs>
    <!--  <div class="sub-container selected" [tooltip]="'download as .png'" [position]="'top'"> -->
    <div class="sub-container prevent-select" (click)="onClickAs()">
        <div class="main">
            <div class="title">Download...</div>
            <div class="size">...</div>
        </div>
        <div class="icon">
            <ng-container *ngTemplateOutlet="iconDownload"></ng-container>
        </div>
    </div>
</ng-template>