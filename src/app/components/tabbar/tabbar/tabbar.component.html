<div class="container">
    <div class="tabs">
        <ng-container *ngIf="(activeID$ |async) as activeID">
            <ng-container *ngIf="(tabs$ |async) as tabs">
                <ng-container *ngFor="let im of tabs.tabs">
                    <app-tabs [image]="im" [selected]="im.id === activeID"></app-tabs>
                </ng-container>

                <!-- Overflow   -->
                <div class="overflow" (click)="onClickContext($event)">
                    <svg width="159" height="141" viewBox="0 0 159 141" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M136.393 0.381542C139.137 0.684334 141.887 0.939129 144.624 1.29845C153.504 2.46804 157.911 7.35436 158.262 16.3498C158.83 30.852 158.457 45.3295 157.828 59.831C157.268 72.7543 157.763 85.7204 157.664 98.6664C157.612 105.301 157.627 111.967 156.989 118.558C155.626 132.658 147.596 139.965 133.422 140.481C129.988 140.606 126.543 140.51 123.103 140.506C105.36 140.487 87.6172 140.531 69.8747 140.425C54.681 140.334 39.4851 140.184 24.2964 139.803C20.0904 139.634 15.9133 139.028 11.8321 137.996C5.73166 136.543 2.20576 132.377 1.15181 126.226C0.796907 124.267 0.627423 122.278 0.645609 120.287C0.935704 105.679 1.35949 91.0745 1.62492 76.4664C1.78846 67.3917 1.77936 58.3127 1.7547 49.2361C1.65296 47.4683 1.42919 45.7094 1.08497 43.9726C0.355517 38.8595 2.16421 34.8707 7.03353 33.0566C11.352 31.3526 15.8838 30.2505 20.5018 29.7811C33.092 28.7915 45.7263 28.2145 58.3529 27.7778C66.2184 27.5062 74.1028 27.7879 81.9756 27.8191C83.049 27.8237 84.1224 27.8191 85.2504 27.8191C85.2504 24.8159 85.1855 22.1856 85.2672 19.5599C85.3522 16.7977 85.4457 14.0244 85.7643 11.2823C86.4133 5.6826 88.6932 2.98553 94.2491 2.26169C100.285 1.47547 106.395 1.28041 112.477 0.886003C116.004 0.657285 119.537 0.54468 123.068 0.379639L136.393 0.381542ZM96.0383 12.7608C96.0383 16.7854 96.0039 20.5306 96.052 24.2746C96.0779 26.2648 96.3602 28.2554 96.3258 30.2424C96.2557 34.3184 94.8981 36.0808 90.9283 37.0002C88.5764 37.5991 86.1648 37.9297 83.7382 37.9863C75.8622 37.9805 67.9856 37.7786 60.1103 37.5999C47.4642 37.2953 34.8112 37.7507 22.2196 38.9642C19.0303 39.315 15.8714 39.903 12.7692 40.7231C9.8488 41.458 9.54508 41.9782 9.43994 44.8463C9.35882 47.0555 9.40879 49.2743 9.46071 51.4874C9.75665 64.2132 10.1655 76.9375 10.3498 89.6652C10.5153 101.065 10.3706 112.472 10.5056 123.87C10.5549 128.044 11.8847 129.462 16.0122 129.924C21.1852 130.503 26.3867 131.152 31.5792 131.18C51.1051 131.285 70.6314 131.126 90.1586 131.115C99.8076 131.108 109.457 131.208 119.107 131.253C124.654 131.279 130.205 131.473 135.745 131.262C141.937 131.026 145.08 128.444 146.598 122.454C147.308 119.667 147.681 116.805 147.709 113.93C147.759 106.182 147.45 98.4318 147.442 90.6827C147.432 79.838 147.504 68.9934 147.658 58.1489C147.769 49.7363 148.137 41.3264 148.198 32.9138C148.234 27.9359 147.965 22.9514 147.706 17.9761C147.463 13.3458 146.959 12.8955 142.471 12.4816C141.368 12.3796 140.258 12.2506 139.151 12.2519C126.06 12.2688 112.969 12.3037 99.877 12.3578C98.5914 12.425 97.3103 12.5595 96.0383 12.7608Z"
                            fill="white" />
                    </svg>
                </div>
                <ng-container [ngTemplateOutlet]="context"
                    [ngTemplateOutletContext]="{overflow:tabs.overflow}"></ng-container>
            </ng-container>

            <div class="adder" [class.selected]="activeID === '-1'" (click)="onClick()">
                <svg width="138" height="164" viewBox="0 0 138 164" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <g clip-path="url(#clip0_1_589)">
                        <path
                            d="M137.273 82.673C137.273 97.0745 137.192 111.477 137.315 125.878C137.257 131.183 136.718 136.472 135.704 141.679C135.346 143.92 134.553 146.067 133.372 148.001C128.405 155.697 121.501 160.577 112.222 161.587C91.9284 163.816 71.465 164.02 51.1311 162.199C43.2342 161.486 35.2579 161.444 27.5523 159.315C23.8951 158.401 20.3171 157.194 16.8527 155.706C7.92056 151.593 2.80505 144.479 1.616 134.664C1.2437 131.655 1.05786 128.625 1.05958 125.593C1.16944 96.0341 1.35943 66.472 1.47704 36.911C1.53559 30.8429 2.38153 24.808 3.99348 18.959C5.06943 14.908 7.15491 11.1983 10.0538 8.17847C13.7054 4.23851 18.7609 1.90477 24.1195 1.68615C34.3047 1.17405 44.4892 0.555105 54.6821 0.331468C64.5003 0.116259 74.3316 0.206058 84.1504 0.425156C90.9403 0.576192 97.7296 1.06481 104.498 1.64627C106.373 1.80769 108.171 2.46653 109.709 3.55485C119.117 10.6029 127.839 18.4142 135.282 27.5846C136.961 29.6492 137.818 32.2647 137.688 34.9258C137.483 49.3241 137.407 63.7254 137.289 78.1251C137.277 79.6412 137.289 81.1568 137.289 82.673H137.273ZM12.4344 82.203C11.3675 98.0702 11.2945 113.953 11.2712 129.836C11.3269 133.244 11.8445 136.628 12.8099 139.896C13.3125 141.922 14.2457 143.815 15.5454 145.445C16.8452 147.076 18.4808 148.405 20.3404 149.343C22.3187 150.443 24.4302 151.281 26.6223 151.839C31.7689 152.976 36.9239 154.064 42.2352 154.358C62.9437 155.613 83.7077 155.647 104.421 154.461C107.053 154.297 109.695 154.112 112.299 153.717C115.3 153.231 118.098 151.891 120.362 149.857C123.238 147.384 125.384 144.168 126.566 140.557C128.419 135.061 128.44 129.408 128.44 123.727C128.436 99.141 128.432 74.5553 128.429 49.9698C128.429 46.9439 128.419 43.9173 128.343 40.8947C128.278 38.3095 126.856 37.0384 123.956 36.9528C118.679 36.7972 113.397 36.7643 108.123 36.5166C106.252 36.3845 104.402 36.0368 102.611 35.4797C101.691 35.243 100.858 34.7459 100.212 34.0478C99.5655 33.3498 99.1325 32.4801 98.9651 31.5423C98.6394 29.6825 98.4785 27.7972 98.4843 25.909C98.4326 21.3773 98.4902 16.8445 98.5134 12.3115C98.5173 11.5064 97.272 9.87169 96.598 9.77122C95.8626 9.61065 95.1175 9.49851 94.3679 9.43635C76.2697 9.17706 58.1707 8.9376 40.0716 8.71721C37.0615 8.68545 34.0476 9.00009 31.0342 9.13881C27.2124 9.31383 23.6077 10.4446 20.0871 11.802C17.589 12.7597 15.5152 14.5825 14.2407 16.9409C12.5838 19.9486 11.4509 23.1169 11.8393 26.6743C12.2496 30.434 12.8577 34.2002 12.8513 37.9631C12.8241 52.7076 12.5902 67.4553 12.4344 82.203ZM109.153 17.636C108.763 18.2309 108.47 18.8853 108.288 19.5736C108.114 21.4243 108.067 23.2915 108.076 25.1525C108.05 25.6142 108.116 26.0763 108.272 26.5117C108.427 26.9469 108.668 27.3468 108.98 27.6871C109.292 28.0276 109.669 28.3017 110.088 28.4937C110.507 28.6856 110.961 28.7913 111.422 28.8045C114.007 28.8466 116.595 28.7452 119.18 28.6544C119.332 28.6177 119.473 28.5453 119.592 28.443C119.711 28.3407 119.803 28.2111 119.863 28.0657C119.927 27.8917 119.956 27.7067 119.947 27.5213C119.94 27.3359 119.895 27.1536 119.816 26.9858C117.187 23.3863 113.949 20.2784 110.247 17.8043C109.975 17.615 109.523 17.6865 109.153 17.636Z"
                            fill="white" />
                        <path
                            d="M52.63 92.2501C56.3898 92.2501 60.1495 92.2806 63.9086 92.2346C64.652 92.1568 65.3482 91.8333 65.887 91.3134C66.4254 90.7936 66.7756 90.1084 66.8809 89.3662C67.1226 84.4663 67.2635 79.5612 67.5556 74.6652C67.6028 72.7853 67.9072 70.9211 68.4603 69.1242C68.6348 68.5836 68.9683 68.1091 69.4174 67.7636C69.8672 67.4174 70.4106 67.2171 70.9761 67.1886C71.5415 67.1601 72.1025 67.3046 72.5845 67.6035C73.066 67.9016 73.446 68.3405 73.6728 68.861C74.2705 70.2404 74.5969 71.7223 74.6337 73.2255C74.9232 76.9903 75.0447 80.7688 75.2696 84.5389C75.3375 85.6674 75.5094 86.7908 75.6625 87.9096C76.027 90.581 77.5618 92.1717 80.0375 92.1574C83.7972 92.1354 87.5557 91.8981 91.3154 91.8612C94.3107 91.834 97.3615 91.7691 100.104 93.2309C100.583 93.4856 100.757 94.4366 100.925 95.1042C100.954 95.2922 100.939 95.4847 100.882 95.6662C100.825 95.8471 100.726 96.0131 100.595 96.1505C100.072 96.6898 99.4197 97.0846 98.6998 97.2972C96.4716 97.6018 94.2189 97.7788 91.9707 97.8773C87.8348 98.0575 83.6951 98.1113 79.5599 98.2896C78.6235 98.3881 77.7537 98.8218 77.1088 99.5102C76.4645 100.199 76.0884 101.098 76.0496 102.042C75.7265 107.696 75.5042 113.355 75.1623 119.007C75.0492 120.876 74.7184 122.734 74.4366 124.589C74.2499 125.82 72.2136 127.291 71.095 127.104C69.884 126.901 68.1379 125.324 67.9834 124.155C67.7378 122.293 67.4664 120.423 67.4018 118.55C67.2008 112.893 67.1116 107.232 66.9359 101.573C66.868 100.825 66.5514 100.122 66.037 99.577C65.5226 99.0312 64.8399 98.6746 64.0992 98.5651C59.5911 98.3278 55.0792 98.1625 50.5718 97.9169C47.5701 97.7516 44.5703 97.5286 41.575 97.2622C40.0241 97.1254 38.2664 95.2806 38.753 94.3452C38.9799 93.8422 39.3438 93.4137 39.8026 93.1084C40.2614 92.8037 40.7967 92.6339 41.3469 92.6203C45.106 92.5872 48.8658 92.6086 52.6249 92.6086L52.63 92.2501Z"
                            fill="white" />
                    </g>
                    <defs>
                        <clipPath id="clip0_1_589">
                            <rect width="137" height="164" fill="white" transform="translate(0.777344)" />
                        </clipPath>
                    </defs>
                </svg>
            </div>
        </ng-container>
    </div>

    <!--  <div class="tabs-drop">drop</div> -->
</div>

<ng-template #context let-overflow='overflow'>
    <div class="context" *ngIf="showContext" (mouseleave)="onMouseLeave()">
        <div class="entry prevent-select" *ngFor="let tab of overflow" (click)="onSelect($event,tab)">
            {{tab.meta.name}}
        </div>
    </div>
</ng-template>